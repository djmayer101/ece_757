<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gem5: cpu/inorder/cpu.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>cpu/inorder/cpu.cc</h1>  </div>
</div>
<div class="contents">
<a href="inorder_2cpu_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2012 ARM Limited</span>
<a name="l00003"></a>00003 <span class="comment"> * All rights reserved</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * The license below extends only to copyright in the software and shall</span>
<a name="l00006"></a>00006 <span class="comment"> * not be construed as granting a license to any other intellectual</span>
<a name="l00007"></a>00007 <span class="comment"> * property including but not limited to intellectual property relating</span>
<a name="l00008"></a>00008 <span class="comment"> * to a hardware implementation of the functionality of the software</span>
<a name="l00009"></a>00009 <span class="comment"> * licensed hereunder.  You may use the software subject to the license</span>
<a name="l00010"></a>00010 <span class="comment"> * terms below provided that you ensure that this notice is replicated</span>
<a name="l00011"></a>00011 <span class="comment"> * unmodified and in its entirety in all distributions of the software,</span>
<a name="l00012"></a>00012 <span class="comment"> * modified or unmodified, in source code or in binary form.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * Copyright (c) 2007 MIPS Technologies, Inc.</span>
<a name="l00015"></a>00015 <span class="comment"> * All rights reserved.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00018"></a>00018 <span class="comment"> * modification, are permitted provided that the following conditions are</span>
<a name="l00019"></a>00019 <span class="comment"> * met: redistributions of source code must retain the above copyright</span>
<a name="l00020"></a>00020 <span class="comment"> * notice, this list of conditions and the following disclaimer;</span>
<a name="l00021"></a>00021 <span class="comment"> * redistributions in binary form must reproduce the above copyright</span>
<a name="l00022"></a>00022 <span class="comment"> * notice, this list of conditions and the following disclaimer in the</span>
<a name="l00023"></a>00023 <span class="comment"> * documentation and/or other materials provided with the distribution;</span>
<a name="l00024"></a>00024 <span class="comment"> * neither the name of the copyright holders nor the names of its</span>
<a name="l00025"></a>00025 <span class="comment"> * contributors may be used to endorse or promote products derived from</span>
<a name="l00026"></a>00026 <span class="comment"> * this software without specific prior written permission.</span>
<a name="l00027"></a>00027 <span class="comment"> *</span>
<a name="l00028"></a>00028 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00029"></a>00029 <span class="comment"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00030"></a>00030 <span class="comment"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00031"></a>00031 <span class="comment"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<a name="l00032"></a>00032 <span class="comment"> * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<a name="l00033"></a>00033 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00034"></a>00034 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00035"></a>00035 <span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00036"></a>00036 <span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00037"></a>00037 <span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00038"></a>00038 <span class="comment"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00039"></a>00039 <span class="comment"> *</span>
<a name="l00040"></a>00040 <span class="comment"> * Authors: Korey Sewell</span>
<a name="l00041"></a>00041 <span class="comment"> *</span>
<a name="l00042"></a>00042 <span class="comment"> */</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;arch/utility.hh&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="bigint_8hh.html">base/bigint.hh</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;config/the_isa.hh&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="cache__unit_8hh.html">cpu/inorder/resources/cache_unit.hh</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="resource__list_8hh.html">cpu/inorder/resources/resource_list.hh</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="inorder_2cpu_8hh.html">cpu/inorder/cpu.hh</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="first__stage_8hh.html">cpu/inorder/first_stage.hh</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="inorder__dyn__inst_8hh.html" title="Defines a dynamic instruction context for a inorder CPU model.">cpu/inorder/inorder_dyn_inst.hh</a>&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="pipeline__traits_8hh.html">cpu/inorder/pipeline_traits.hh</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="resource__pool_8hh.html">cpu/inorder/resource_pool.hh</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="inorder_2thread__context_8hh.html">cpu/inorder/thread_context.hh</a>&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;<a class="code" href="inorder_2thread__state_8hh.html">cpu/inorder/thread_state.hh</a>&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="activity_8hh.html">cpu/activity.hh</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="cpu_2base_8hh.html">cpu/base.hh</a>&quot;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;<a class="code" href="exetrace_8hh.html">cpu/exetrace.hh</a>&quot;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="quiesce__event_8hh.html">cpu/quiesce_event.hh</a>&quot;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &quot;<a class="code" href="simple__thread_8hh.html">cpu/simple_thread.hh</a>&quot;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &quot;<a class="code" href="thread__context_8hh.html">cpu/thread_context.hh</a>&quot;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &quot;debug/Activity.hh&quot;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &quot;debug/InOrderCPU.hh&quot;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &quot;debug/InOrderCachePort.hh&quot;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include &quot;debug/Interrupt.hh&quot;</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &quot;debug/Quiesce.hh&quot;</span>
<a name="l00069"></a>00069 <span class="preprocessor">#include &quot;debug/RefCount.hh&quot;</span>
<a name="l00070"></a>00070 <span class="preprocessor">#include &quot;debug/SkedCache.hh&quot;</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &quot;params/InOrderCPU.hh&quot;</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include &quot;<a class="code" href="full__system_8hh.html">sim/full_system.hh</a>&quot;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include &quot;<a class="code" href="sim_2process_8hh.html">sim/process.hh</a>&quot;</span>
<a name="l00074"></a>00074 <span class="preprocessor">#include &quot;<a class="code" href="stat__control_8hh.html">sim/stat_control.hh</a>&quot;</span>
<a name="l00075"></a>00075 <span class="preprocessor">#include &quot;<a class="code" href="sim_2system_8hh.html">sim/system.hh</a>&quot;</span>
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="preprocessor">#if THE_ISA == ALPHA_ISA</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="osfpal_8hh.html">arch/alpha/osfpal.hh</a>&quot;</span>
<a name="l00079"></a>00079 <span class="preprocessor">#endif</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span>
<a name="l00081"></a>00081 <span class="keyword">using namespace </span>std;
<a name="l00082"></a>00082 <span class="keyword">using namespace </span>TheISA;
<a name="l00083"></a>00083 <span class="keyword">using namespace </span>ThePipeline;
<a name="l00084"></a>00084 
<a name="l00085"></a><a class="code" href="classInOrderCPU_1_1CachePort.html#ab4a496fe55a71b620acc1c8035c67850">00085</a> <a class="code" href="classInOrderCPU_1_1CachePort.html#ab4a496fe55a71b620acc1c8035c67850" title="Default constructor.">InOrderCPU::CachePort::CachePort</a>(<a class="code" href="classCacheUnit.html">CacheUnit</a> *_cacheUnit,
<a name="l00086"></a>00086                                  <span class="keyword">const</span> std::string&amp; <a class="code" href="trace_8hh.html#a166fa10b86d8faa127fb7c78191e3e60">name</a>) :
<a name="l00087"></a>00087     <a class="code" href="classBaseCPU_1_1CpuPort.html" title="Define a base class for the CPU ports (instruction and data) that is refined in the subclasses...">CpuPort</a>(_cacheUnit-&gt;name() + name, _cacheUnit-&gt;cpu),
<a name="l00088"></a>00088     cacheUnit(_cacheUnit)
<a name="l00089"></a>00089 { }
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="keywordtype">bool</span>
<a name="l00092"></a>00092 <a class="code" href="classInOrderCPU_1_1CachePort.html#adddf318710bf607a07948382cae3955a" title="Timing version of receive.">InOrderCPU::CachePort::recvTimingResp</a>(<a class="code" href="classPacket.html" title="A Packet is used to encapsulate a transfer between two objects in the memory system (e...">Packet</a> *pkt)
<a name="l00093"></a>00093 {
<a name="l00094"></a>00094     <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="classPacket.html#a1ea5391da77928d157f79bebe80f6a97">isError</a>())
<a name="l00095"></a>00095         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(InOrderCachePort, <span class="stringliteral">&quot;Got error packet back for address: %x\n&quot;</span>,
<a name="l00096"></a>00096                 pkt-&gt;<a class="code" href="classPacket.html#a1c04785186ba5aa70a40cac9b2bfc86e">getAddr</a>());
<a name="l00097"></a>00097     <span class="keywordflow">else</span>
<a name="l00098"></a>00098         <a class="code" href="classInOrderCPU_1_1CachePort.html#aaffd4a8c583db5af609eb4c5aef0d608" title="Pointer to cache unit.">cacheUnit</a>-&gt;<a class="code" href="classCacheUnit.html#aa6c432e3538f075c45abff9fa8e2e914" title="After memory request is completedd in the cache, then do final processing to complete the request in ...">processCacheCompletion</a>(pkt);
<a name="l00099"></a>00099 
<a name="l00100"></a>00100     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00101"></a>00101 }
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 <span class="keywordtype">void</span>
<a name="l00104"></a><a class="code" href="classInOrderCPU_1_1CachePort.html#a8904acc229e1560ac97cb3fc4819303c">00104</a> <a class="code" href="classInOrderCPU_1_1CachePort.html#a8904acc229e1560ac97cb3fc4819303c" title="Handles doing a retry of a failed timing request.">InOrderCPU::CachePort::recvRetry</a>()
<a name="l00105"></a>00105 {
<a name="l00106"></a>00106     <a class="code" href="classInOrderCPU_1_1CachePort.html#aaffd4a8c583db5af609eb4c5aef0d608" title="Pointer to cache unit.">cacheUnit</a>-&gt;<a class="code" href="classCacheUnit.html#a8b69d59eedccb36ceaa3afaf8c3e0bd5">recvRetry</a>();
<a name="l00107"></a>00107 }
<a name="l00108"></a>00108 
<a name="l00109"></a><a class="code" href="classInOrderCPU_1_1TickEvent.html#a836b7592d74a7fd105abb37747ce293b">00109</a> <a class="code" href="classInOrderCPU_1_1TickEvent.html#a836b7592d74a7fd105abb37747ce293b" title="Constructs a tick event.">InOrderCPU::TickEvent::TickEvent</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a> *<a class="code" href="namespaceArmISA.html#a21f7b327cbedf079597394ec2c3f2a6d">c</a>)
<a name="l00110"></a>00110   : <a class="code" href="classEvent.html">Event</a>(CPU_Tick_Pri), cpu(c)
<a name="l00111"></a>00111 { }
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="keywordtype">void</span>
<a name="l00115"></a><a class="code" href="classInOrderCPU_1_1TickEvent.html#ada997f036d1f5edd07ec1e33fdfda3bc">00115</a> <a class="code" href="classInOrderCPU_1_1TickEvent.html#ada997f036d1f5edd07ec1e33fdfda3bc" title="Processes a tick event, calling tick() on the CPU.">InOrderCPU::TickEvent::process</a>()
<a name="l00116"></a>00116 {
<a name="l00117"></a>00117     <a class="code" href="classInOrderCPU_1_1TickEvent.html#aee956067db336c9628829c24f03ffbc0" title="Pointer to the CPU.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#acbe2e6646947e739582a2b301ab9faf0" title="Ticks CPU, calling tick() on each stage, and checking the overall activity to see if the CPU should d...">tick</a>();
<a name="l00118"></a>00118 }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00122"></a><a class="code" href="classInOrderCPU_1_1TickEvent.html#a7e6e7c77050de690cf118911b71b0b95">00122</a> <a class="code" href="classInOrderCPU_1_1TickEvent.html#a7e6e7c77050de690cf118911b71b0b95" title="Returns the description of the tick event.">InOrderCPU::TickEvent::description</a>()<span class="keyword"> const</span>
<a name="l00123"></a>00123 <span class="keyword"></span>{
<a name="l00124"></a>00124     <span class="keywordflow">return</span> <span class="stringliteral">&quot;InOrderCPU tick event&quot;</span>;
<a name="l00125"></a>00125 }
<a name="l00126"></a>00126 
<a name="l00127"></a><a class="code" href="classInOrderCPU_1_1CPUEvent.html#afa1b49bee369e3854e002898ddc8541d">00127</a> <a class="code" href="classInOrderCPU_1_1CPUEvent.html#afa1b49bee369e3854e002898ddc8541d" title="Constructs a CPU event.">InOrderCPU::CPUEvent::CPUEvent</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a> *_cpu, <a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76">CPUEventType</a> e_type,
<a name="l00128"></a>00128                                <a class="code" href="classRefCountingPtr.html">Fault</a> fault, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> _tid, <a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst,
<a name="l00129"></a>00129                                <a class="code" href="classInOrderCPU.html#af38ac311cde1a68889c87d9067f5b06f">CPUEventPri</a> event_pri)
<a name="l00130"></a>00130     : <a class="code" href="classEvent.html">Event</a>(event_pri), cpu(_cpu)
<a name="l00131"></a>00131 {
<a name="l00132"></a>00132     <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac3a20e264175b07d328a8d09a5884cf1" title="Set Type of Event To Be Scheduled.">setEvent</a>(e_type, fault, _tid, inst);
<a name="l00133"></a>00133 }
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 std::string <a class="code" href="classInOrderCPU.html#a3fbe4650c953138164078b58652676e1">InOrderCPU::eventNames</a>[NumCPUEvents] =
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138     <span class="stringliteral">&quot;ActivateThread&quot;</span>,
<a name="l00139"></a>00139     <span class="stringliteral">&quot;ActivateNextReadyThread&quot;</span>,
<a name="l00140"></a>00140     <span class="stringliteral">&quot;DeactivateThread&quot;</span>,
<a name="l00141"></a>00141     <span class="stringliteral">&quot;HaltThread&quot;</span>,
<a name="l00142"></a>00142     <span class="stringliteral">&quot;SuspendThread&quot;</span>,
<a name="l00143"></a>00143     <span class="stringliteral">&quot;Trap&quot;</span>,
<a name="l00144"></a>00144     <span class="stringliteral">&quot;Syscall&quot;</span>,
<a name="l00145"></a>00145     <span class="stringliteral">&quot;SquashFromMemStall&quot;</span>,
<a name="l00146"></a>00146     <span class="stringliteral">&quot;UpdatePCs&quot;</span>
<a name="l00147"></a>00147 };
<a name="l00148"></a>00148 
<a name="l00149"></a>00149 <span class="keywordtype">void</span>
<a name="l00150"></a><a class="code" href="classInOrderCPU_1_1CPUEvent.html#aa32a29576c1744428ae49d4987340d91">00150</a> <a class="code" href="classInOrderCPU_1_1CPUEvent.html#aa32a29576c1744428ae49d4987340d91" title="Processes a CPU event.">InOrderCPU::CPUEvent::process</a>()
<a name="l00151"></a>00151 {
<a name="l00152"></a>00152     <span class="keywordflow">switch</span> (<a class="code" href="classInOrderCPU_1_1CPUEvent.html#acad495848102c156329709389d207676">cpuEventType</a>)
<a name="l00153"></a>00153     {
<a name="l00154"></a>00154       <span class="keywordflow">case</span> <a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76a6267e868cd6e742200feaf13a1978a3b">ActivateThread</a>:
<a name="l00155"></a>00155         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#ac207259de125dc941432f4eb1c9b18c2" title="Add Thread to Active Threads List.">activateThread</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>);
<a name="l00156"></a>00156         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#a61d94c1e40bf65f8c3c2b35a11e56df1" title="Activate Thread in all resources.">activateThread</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>);
<a name="l00157"></a>00157         <span class="keywordflow">break</span>;
<a name="l00158"></a>00158 
<a name="l00159"></a>00159       <span class="keywordflow">case</span> <a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76a7ed2dff125186d914080dc2327cfe780">ActivateNextReadyThread</a>:
<a name="l00160"></a>00160         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#ab729240ce56c85f0c14020c44bc2de87" title="Add Thread From Ready List to Active Threads List.">activateNextReadyThread</a>();
<a name="l00161"></a>00161         <span class="keywordflow">break</span>;
<a name="l00162"></a>00162 
<a name="l00163"></a>00163       <span class="keywordflow">case</span> <a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76ad8db38e0539305f7d681658891b55f1a">DeactivateThread</a>:
<a name="l00164"></a>00164         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a7aca82c82b31b401a4d5b80eca6b211d" title="Remove from Active Thread List.">deactivateThread</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>);
<a name="l00165"></a>00165         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#ad9987d8e9bbbca9fb4d865b624ed487d" title="De-Activate Thread in all resources.">deactivateThread</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>);
<a name="l00166"></a>00166         <span class="keywordflow">break</span>;
<a name="l00167"></a>00167 
<a name="l00168"></a>00168       <span class="keywordflow">case</span> <a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76a5faf0ed149785d9b2b75ea6c72607096">HaltThread</a>:
<a name="l00169"></a>00169         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a056f52e5931b938d79f1f0e66b832ece" title="Halt Thread, Remove from Active Thread List, Place Thread on Halted Threads List.">haltThread</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>);
<a name="l00170"></a>00170         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#ad9987d8e9bbbca9fb4d865b624ed487d" title="De-Activate Thread in all resources.">deactivateThread</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>);
<a name="l00171"></a>00171         <span class="keywordflow">break</span>;
<a name="l00172"></a>00172 
<a name="l00173"></a>00173       <span class="keywordflow">case</span> <a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76a345beeab727c00cb1f182047366e239a">SuspendThread</a>: 
<a name="l00174"></a>00174         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a3bfdf2d7e5e26edc8ee9d9f225c0d031" title="Suspend Thread, Remove from Active Threads List, Add to Suspend List.">suspendThread</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>);
<a name="l00175"></a>00175         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#a918673774eb19c593df4f56a8dd24891" title="Suspend Thread in all resources.">suspendThread</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>);
<a name="l00176"></a>00176         <span class="keywordflow">break</span>;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178       <span class="keywordflow">case</span> <a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76a61515977f8181df20244d22a7335deee">SquashFromMemStall</a>:
<a name="l00179"></a>00179         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a6d3d05ec06949189533ebc55081ffb92">squashDueToMemStall</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac2ac8e8fdd3ed4e5141dd34347dc7d1a">inst</a>-&gt;squashingStage, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac2ac8e8fdd3ed4e5141dd34347dc7d1a">inst</a>-&gt;seqNum, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>);
<a name="l00180"></a>00180         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#ac19c45016db6a0c6a614f81d8bf9e24b" title="Squash Resources in Pool after a memory stall NOTE: Only use during Switch-On-Miss Thread model...">squashDueToMemStall</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac2ac8e8fdd3ed4e5141dd34347dc7d1a">inst</a>, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac2ac8e8fdd3ed4e5141dd34347dc7d1a">inst</a>-&gt;squashingStage,
<a name="l00181"></a>00181                                           <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac2ac8e8fdd3ed4e5141dd34347dc7d1a">inst</a>-&gt;seqNum, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>);
<a name="l00182"></a>00182         <span class="keywordflow">break</span>;
<a name="l00183"></a>00183 
<a name="l00184"></a>00184       <span class="keywordflow">case</span> <a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76a3cb6c7f8efe02671d483234610ec3740">Trap</a>:
<a name="l00185"></a>00185         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Trapping CPU\n&quot;</span>);
<a name="l00186"></a>00186         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a501137b42b356a6a5edeb46e9b754f1b" title="Perform trap to Handle Given Fault.">trap</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#aacb598b5c8c75d9c8c049a3a90ce74c9">fault</a>, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac2ac8e8fdd3ed4e5141dd34347dc7d1a">inst</a>);
<a name="l00187"></a>00187         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#a65ae7615b062c4d7fdf550e008754bcb" title="Broadcast trap to all resources.">trap</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#aacb598b5c8c75d9c8c049a3a90ce74c9">fault</a>, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac2ac8e8fdd3ed4e5141dd34347dc7d1a">inst</a>);
<a name="l00188"></a>00188         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#aed7228e307be5a47640e6ce25dc2f649">trapPending</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>] = <span class="keyword">false</span>;
<a name="l00189"></a>00189         <span class="keywordflow">break</span>;
<a name="l00190"></a>00190 
<a name="l00191"></a>00191       <span class="keywordflow">case</span> <a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76aa849f281ea5e5a6574aaa80388b72ea7">Syscall</a>:
<a name="l00192"></a>00192         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#aa65977de06df6cd7579c8d790d45c686" title="Executes a syscall.">syscall</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac2ac8e8fdd3ed4e5141dd34347dc7d1a">inst</a>-&gt;syscallNum, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>);
<a name="l00193"></a>00193         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#a65ae7615b062c4d7fdf550e008754bcb" title="Broadcast trap to all resources.">trap</a>(<a class="code" href="classInOrderCPU_1_1CPUEvent.html#aacb598b5c8c75d9c8c049a3a90ce74c9">fault</a>, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac2ac8e8fdd3ed4e5141dd34347dc7d1a">inst</a>);
<a name="l00194"></a>00194         <span class="keywordflow">break</span>;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196       <span class="keywordflow">default</span>:
<a name="l00197"></a>00197         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Unrecognized Event Type %s&quot;</span>, <a class="code" href="classInOrderCPU.html#a3fbe4650c953138164078b58652676e1">eventNames</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#acad495848102c156329709389d207676">cpuEventType</a>]);    
<a name="l00198"></a>00198     }
<a name="l00199"></a>00199     
<a name="l00200"></a>00200     <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#abfbb828608f829b3418949ea566657a3" title="List of all the cpu event requests that will be removed at the end of the current cycle...">cpuEventRemoveList</a>.push(<span class="keyword">this</span>);
<a name="l00201"></a>00201 }
<a name="l00202"></a>00202 
<a name="l00203"></a>00203     
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00206"></a><a class="code" href="classInOrderCPU_1_1CPUEvent.html#a5ee4dd0b10eb2a48d84ee9f63f39ab5c">00206</a> <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a5ee4dd0b10eb2a48d84ee9f63f39ab5c" title="Returns the description of the CPU event.">InOrderCPU::CPUEvent::description</a>()<span class="keyword"> const</span>
<a name="l00207"></a>00207 <span class="keyword"></span>{
<a name="l00208"></a>00208     <span class="keywordflow">return</span> <span class="stringliteral">&quot;InOrderCPU event&quot;</span>;
<a name="l00209"></a>00209 }
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 <span class="keywordtype">void</span>
<a name="l00212"></a><a class="code" href="classInOrderCPU_1_1CPUEvent.html#a99ca9d7b4065929b6384d8be0cf64901">00212</a> <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a99ca9d7b4065929b6384d8be0cf64901" title="Schedule Event.">InOrderCPU::CPUEvent::scheduleEvent</a>(<a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a> delay)
<a name="l00213"></a>00213 {
<a name="l00214"></a>00214     assert(!<a class="code" href="classEvent.html#a36bdc2ee73215ed7670a7bfc0f25ab8b" title="Determine if the current event is scheduled.">scheduled</a>() || <a class="code" href="classEvent.html#a5e55aa146f3ad853902f912c7622fe4c" title="Check whether the event is squashed.">squashed</a>());
<a name="l00215"></a>00215     <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classEventManager.html#a766c5f955dfa1609696955f075492687">reschedule</a>(<span class="keyword">this</span>, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a8cbef173f6fb87e3c30337decbb2ac7a">cpu</a>-&gt;<a class="code" href="classClockedObject.html#a7c1f64c925f158530be84323a503dbb7" title="Determine the tick when a cycle begins, by default the current one, but the argument also enables the...">clockEdge</a>(delay), <span class="keyword">true</span>);
<a name="l00216"></a>00216 }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218 <span class="keywordtype">void</span>
<a name="l00219"></a><a class="code" href="classInOrderCPU_1_1CPUEvent.html#a157dfd4c52883438de0121904a7381f9">00219</a> <a class="code" href="classInOrderCPU_1_1CPUEvent.html#a157dfd4c52883438de0121904a7381f9" title="Unschedule This Event.">InOrderCPU::CPUEvent::unscheduleEvent</a>()
<a name="l00220"></a>00220 {
<a name="l00221"></a>00221     <span class="keywordflow">if</span> (<a class="code" href="classEvent.html#a36bdc2ee73215ed7670a7bfc0f25ab8b" title="Determine if the current event is scheduled.">scheduled</a>())
<a name="l00222"></a>00222         <a class="code" href="classEvent.html#a91707c0c1d479ac987d1ec416406cb3f" title="Squash the current event.">squash</a>();
<a name="l00223"></a>00223 }
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 <a class="code" href="classInOrderCPU.html#a640df8274cd6555cf61d9d1af7489b11" title="Constructs a CPU with the given parameters.">InOrderCPU::InOrderCPU</a>(<a class="code" href="classBaseCPU.html#a90fc6c04f05a1cbadf117d848db83fb3">Params</a> *<a class="code" href="classBaseCPU.html#a8e895dfbcaacea5e84e7e5dbfcead414">params</a>)
<a name="l00226"></a>00226     : <a class="code" href="classBaseCPU.html">BaseCPU</a>(params),
<a name="l00227"></a>00227       <a class="code" href="classInOrderCPU.html#a9173cca19736bf0adfb34fadb5c0e6f1" title="CPU ID.">cpu_id</a>(params-&gt;<a class="code" href="classInOrderCPU.html#a9173cca19736bf0adfb34fadb5c0e6f1" title="CPU ID.">cpu_id</a>),
<a name="l00228"></a>00228       <a class="code" href="classInOrderCPU.html#a002865687bd2630e1a928e24e0e3d252" title="Type of core that this is.">coreType</a>(<span class="stringliteral">&quot;default&quot;</span>),
<a name="l00229"></a>00229       <a class="code" href="classInOrderCPU.html#abdfe006587f18258188c043d20190cce" title="Overall CPU status.">_status</a>(<a class="code" href="classInOrderCPU.html#a894abae94956c9f162f778a5964fd418af468fc8865fd3315033fcd51131863b1">Idle</a>),
<a name="l00230"></a>00230       <a class="code" href="classInOrderCPU.html#ac65e706c78081100af986b30274f6eb1" title="The tick event used for scheduling CPU ticks.">tickEvent</a>(this),
<a name="l00231"></a>00231       <a class="code" href="classInOrderCPU.html#a0455a6209bbe736b8a1a081d7c8f55f5" title="Width (processing bandwidth) of each stage.">stageWidth</a>(params-&gt;<a class="code" href="classInOrderCPU.html#a0455a6209bbe736b8a1a081d7c8f55f5" title="Width (processing bandwidth) of each stage.">stageWidth</a>),
<a name="l00232"></a>00232       <a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>(new <a class="code" href="classResourcePool.html">ResourcePool</a>(this, params)),
<a name="l00233"></a>00233       <a class="code" href="classInOrderCPU.html#a980b838613b45c5d8dd40bae319652d3" title="ISA state.">isa</a>(<a class="code" href="classBaseCPU.html#a7c1d0eec4075862b04e96cad7a82799d" title="Number of threads we&amp;#39;re actually simulating (&amp;lt;= SMT_MAX_THREADS).">numThreads</a>, NULL),
<a name="l00234"></a>00234       <a class="code" href="classInOrderCPU.html#ae827e7ceb3a768f21e08a34d89b12712" title="Global communication structure.">timeBuffer</a>(2 , 2),
<a name="l00235"></a>00235       <a class="code" href="classInOrderCPU.html#ac85d8a0d77e4a2c9876a7a243728ee74" title="Data port.">dataPort</a>(<a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;getDataUnit(), <span class="stringliteral">&quot;.dcache_port&quot;</span>),
<a name="l00236"></a>00236       <a class="code" href="classInOrderCPU.html#a0eb9a599c6c504ad8391e8e2eb13fa7c" title="Instruction port.">instPort</a>(<a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;getInstUnit(), <span class="stringliteral">&quot;.icache_port&quot;</span>),
<a name="l00237"></a>00237       <a class="code" href="classInOrderCPU.html#a576be973b6f9802f822e0b0549de79eb" title="Records if instructions need to be removed this cycle due to being retired or squashed.">removeInstsThisCycle</a>(false),
<a name="l00238"></a>00238       <a class="code" href="classInOrderCPU.html#a73f78983745b757743951ab2ffe945b5" title="The activity recorder; used to tell if the CPU has any activity remaining or if it can go to idle and...">activityRec</a>(params-&gt;<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>, <a class="code" href="namespaceThePipeline.html#ab8c8c960bf74f5d154c9bf6c3e25ff13">NumStages</a>, 10, params-&gt;<a class="code" href="classInOrderCPU.html#af577c348e47220ba259933b6c243a6c9" title="Percentage of cycles a stage was active.">activity</a>),
<a name="l00239"></a>00239       <a class="code" href="classInOrderCPU.html#ad7994af60a87b663866f1b48ed8b7744" title="Pointer to the system.">system</a>(params-&gt;<a class="code" href="classInOrderCPU.html#ad7994af60a87b663866f1b48ed8b7744" title="Pointer to the system.">system</a>),
<a name="l00240"></a>00240 #ifdef DEBUG
<a name="l00241"></a>00241       cpuEventNum(0),
<a name="l00242"></a>00242       resReqCount(0),
<a name="l00243"></a>00243 #endif <span class="comment">// DEBUG</span>
<a name="l00244"></a>00244       <a class="code" href="classInOrderCPU.html#ac9a5d3c4a3cc0246b52d53ffbc4510db" title="Counter of how many stages have completed draining.">drainCount</a>(0),
<a name="l00245"></a>00245       <a class="code" href="classInOrderCPU.html#a828d787c111f96a771d0b6589acf0bb6" title="Per-Stage Instruction Tracing.">stageTracing</a>(params-&gt;<a class="code" href="classInOrderCPU.html#a828d787c111f96a771d0b6589acf0bb6" title="Per-Stage Instruction Tracing.">stageTracing</a>),
<a name="l00246"></a>00246       <a class="code" href="classInOrderCPU.html#ae1f2ea9a1ebfb0935f4fd476acba2173" title="The cycle that the CPU was last running, used for statistics.">lastRunningCycle</a>(0),
<a name="l00247"></a>00247       <a class="code" href="classInOrderCPU.html#ab70f0446882da3603e689c2f86ec77b3">instsPerSwitch</a>(0)
<a name="l00248"></a>00248 {    
<a name="l00249"></a>00249     <a class="code" href="classInOrderCPU.html#a34c01cbeac90136f0bde145ab4bfb8df">cpu_params</a> = params;
<a name="l00250"></a>00250 
<a name="l00251"></a>00251     <span class="comment">// Resize for Multithreading CPUs</span>
<a name="l00252"></a>00252     <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>.resize(<a class="code" href="classBaseCPU.html#a7c1d0eec4075862b04e96cad7a82799d" title="Number of threads we&amp;#39;re actually simulating (&amp;lt;= SMT_MAX_THREADS).">numThreads</a>);
<a name="l00253"></a>00253 
<a name="l00254"></a>00254     <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> active_threads = params-&gt;workload.size();
<a name="l00255"></a>00255     <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370" title="The FullSystem variable can be used to determine the current mode of simulation.">FullSystem</a>) {
<a name="l00256"></a>00256         active_threads = 1;
<a name="l00257"></a>00257     } <span class="keywordflow">else</span> {
<a name="l00258"></a>00258         active_threads = params-&gt;workload.size();
<a name="l00259"></a>00259 
<a name="l00260"></a>00260         <span class="keywordflow">if</span> (active_threads &gt; <a class="code" href="namespaceThePipeline.html#ac112f78ed37b295b4f2f3d8c9fe9dc64">MaxThreads</a>) {
<a name="l00261"></a>00261             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Workload Size too large. Increase the &#39;MaxThreads&#39;&quot;</span>
<a name="l00262"></a>00262                   <span class="stringliteral">&quot;in your InOrder implementation or &quot;</span>
<a name="l00263"></a>00263                   <span class="stringliteral">&quot;edit your workload size.&quot;</span>);
<a name="l00264"></a>00264         }
<a name="l00265"></a>00265 
<a name="l00266"></a>00266 
<a name="l00267"></a>00267         <span class="keywordflow">if</span> (active_threads &gt; 1) {
<a name="l00268"></a>00268             <a class="code" href="classInOrderCPU.html#ad3dc1ef578d975494a1096f61753c19a">threadModel</a> = (InOrderCPU::ThreadModel) params-&gt;threadModel;
<a name="l00269"></a>00269 
<a name="l00270"></a>00270             if (<a class="code" href="classInOrderCPU.html#ad3dc1ef578d975494a1096f61753c19a">threadModel</a> == <a class="code" href="classInOrderCPU.html#ab1d289a2e829b22be393397bad515918ac83e5f3e5eeb9094b4d78564e82960cc">SMT</a>) {
<a name="l00271"></a>00271                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Setting Thread Model to SMT.\n&quot;</span>);
<a name="l00272"></a>00272             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classInOrderCPU.html#ad3dc1ef578d975494a1096f61753c19a">threadModel</a> == <a class="code" href="classInOrderCPU.html#ab1d289a2e829b22be393397bad515918ae1a6f0ecf00fbeeb96de3da59293b5c4">SwitchOnCacheMiss</a>) {
<a name="l00273"></a>00273                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Setting Thread Model to &quot;</span>
<a name="l00274"></a>00274                         <span class="stringliteral">&quot;Switch On Cache Miss\n&quot;</span>);
<a name="l00275"></a>00275             }
<a name="l00276"></a>00276 
<a name="l00277"></a>00277         } <span class="keywordflow">else</span> {
<a name="l00278"></a>00278             <a class="code" href="classInOrderCPU.html#ad3dc1ef578d975494a1096f61753c19a">threadModel</a> = Single;
<a name="l00279"></a>00279         }
<a name="l00280"></a>00280     }
<a name="l00281"></a>00281 
<a name="l00282"></a>00282     <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a> = 0; <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a> &lt; <a class="code" href="classBaseCPU.html#a7c1d0eec4075862b04e96cad7a82799d" title="Number of threads we&amp;#39;re actually simulating (&amp;lt;= SMT_MAX_THREADS).">numThreads</a>; ++<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>) {
<a name="l00283"></a>00283         <a class="code" href="classInOrderCPU.html#a980b838613b45c5d8dd40bae319652d3" title="ISA state.">isa</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>] = params-&gt;isa[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>];
<a name="l00284"></a>00284         <a class="code" href="classInOrderCPU.html#ad8e3fe94f47c43dc39aeccf94ad7b3f1" title="Program Counters.">pc</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>].set(0);
<a name="l00285"></a>00285         <a class="code" href="classInOrderCPU.html#a941894c79f3b2bb15082a46f813d2411" title="Last Committed PC.">lastCommittedPC</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>].set(0);
<a name="l00286"></a>00286 
<a name="l00287"></a>00287         <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370" title="The FullSystem variable can be used to determine the current mode of simulation.">FullSystem</a>) {
<a name="l00288"></a>00288             <span class="comment">// SMT is not supported in FS mode yet.</span>
<a name="l00289"></a>00289             assert(numThreads == 1);
<a name="l00290"></a>00290             <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>] = <span class="keyword">new</span> <a class="code" href="classInOrderCPU.html#ac235093d5c51f4aa93bf50497ceac2b6">Thread</a>(<span class="keyword">this</span>, 0, NULL);
<a name="l00291"></a>00291         } <span class="keywordflow">else</span> {
<a name="l00292"></a>00292             <span class="keywordflow">if</span> (<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a> &lt; (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a>)params-&gt;workload.size()) {
<a name="l00293"></a>00293                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Workload[%i] process is %#x\n&quot;</span>,
<a name="l00294"></a>00294                         <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>, params-&gt;workload[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>]-&gt;progName());
<a name="l00295"></a>00295                 <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>] =
<a name="l00296"></a>00296                     <span class="keyword">new</span> <a class="code" href="classInOrderCPU.html#ac235093d5c51f4aa93bf50497ceac2b6">Thread</a>(<span class="keyword">this</span>, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>, params-&gt;workload[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>]);
<a name="l00297"></a>00297             } <span class="keywordflow">else</span> {
<a name="l00298"></a>00298                 <span class="comment">//Allocate Empty thread so M5 can use later</span>
<a name="l00299"></a>00299                 <span class="comment">//when scheduling threads to CPU</span>
<a name="l00300"></a>00300                 <a class="code" href="classProcess.html">Process</a>* dummy_proc = params-&gt;workload[0];
<a name="l00301"></a>00301                 <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>] = <span class="keyword">new</span> <a class="code" href="classInOrderCPU.html#ac235093d5c51f4aa93bf50497ceac2b6">Thread</a>(<span class="keyword">this</span>, <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>, dummy_proc);
<a name="l00302"></a>00302             }
<a name="l00303"></a>00303 
<a name="l00304"></a>00304             <span class="comment">// Eventually set this with parameters...</span>
<a name="l00305"></a>00305             <a class="code" href="classInOrderCPU.html#a2ecb3e5a075e164cd24aceb3929512e4">asid</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>] = <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>;
<a name="l00306"></a>00306         }
<a name="l00307"></a>00307 
<a name="l00308"></a>00308         <span class="comment">// Setup the TC that will serve as the interface to the threads/CPU.</span>
<a name="l00309"></a>00309         <a class="code" href="classInOrderThreadContext.html" title="Derived ThreadContext class for use with the InOrderCPU.">InOrderThreadContext</a> *tc = <span class="keyword">new</span> <a class="code" href="classInOrderThreadContext.html" title="Derived ThreadContext class for use with the InOrderCPU.">InOrderThreadContext</a>;
<a name="l00310"></a>00310         tc-&gt;<a class="code" href="classInOrderThreadContext.html#a962478f148427471298fbce1e6bd13a0" title="Pointer to the CPU.">cpu</a> = <span class="keyword">this</span>;
<a name="l00311"></a>00311         tc-&gt;<a class="code" href="classInOrderThreadContext.html#aafb2d5aabc005d2f0afcfd274882155b" title="Pointer to the thread state that this TC corrseponds to.">thread</a> = <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>];
<a name="l00312"></a>00312 
<a name="l00313"></a>00313         <span class="comment">// Setup quiesce event.</span>
<a name="l00314"></a>00314         this-&gt;<a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>]-&gt;quiesceEvent = <span class="keyword">new</span> <a class="code" href="classEndQuiesceEvent.html" title="Event for timing out quiesce instruction.">EndQuiesceEvent</a>(tc);
<a name="l00315"></a>00315 
<a name="l00316"></a>00316         <span class="comment">// Give the thread the TC.</span>
<a name="l00317"></a>00317         <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>]-&gt;tc = tc;
<a name="l00318"></a>00318         <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>]-&gt;setFuncExeInst(0);
<a name="l00319"></a>00319         <a class="code" href="classInOrderCPU.html#ab09e289c472887058582069c77517041" title="The global sequence number counter.">globalSeqNum</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>] = 1;
<a name="l00320"></a>00320 
<a name="l00321"></a>00321         <span class="comment">// Add the TC to the CPU&#39;s list of TC&#39;s.</span>
<a name="l00322"></a>00322         this-&gt;<a class="code" href="classBaseCPU.html#a22178d56f16f4d27c17453771f334a88">threadContexts</a>.push_back(tc);
<a name="l00323"></a>00323     }
<a name="l00324"></a>00324 
<a name="l00325"></a>00325     <span class="comment">// Initialize TimeBuffer Stage Queues</span>
<a name="l00326"></a>00326     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stNum=0; stNum &lt; <a class="code" href="namespaceThePipeline.html#ab8c8c960bf74f5d154c9bf6c3e25ff13">NumStages</a> - 1; stNum++) {
<a name="l00327"></a>00327         <a class="code" href="classInOrderCPU.html#a590ac86c992c72ca6f287221c144f895" title="Communication structure that sits in between pipeline stages.">stageQueue</a>[stNum] = <span class="keyword">new</span> <a class="code" href="classInOrderCPU.html#acfd8e08947359e23930e5157a6bde30d">StageQueue</a>(NumStages, NumStages);
<a name="l00328"></a>00328         <a class="code" href="classInOrderCPU.html#a590ac86c992c72ca6f287221c144f895" title="Communication structure that sits in between pipeline stages.">stageQueue</a>[stNum]-&gt;id(stNum);
<a name="l00329"></a>00329     }
<a name="l00330"></a>00330 
<a name="l00331"></a>00331 
<a name="l00332"></a>00332     <span class="comment">// Set Up Pipeline Stages</span>
<a name="l00333"></a>00333     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stNum=0; stNum &lt; NumStages; stNum++) {
<a name="l00334"></a>00334         <span class="keywordflow">if</span> (stNum == 0)
<a name="l00335"></a>00335             <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stNum] = <span class="keyword">new</span> <a class="code" href="classFirstStage.html">FirstStage</a>(params, stNum);
<a name="l00336"></a>00336         <span class="keywordflow">else</span>
<a name="l00337"></a>00337             <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stNum] = <span class="keyword">new</span> <a class="code" href="classPipelineStage.html">PipelineStage</a>(params, stNum);
<a name="l00338"></a>00338 
<a name="l00339"></a>00339         <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stNum]-&gt;<a class="code" href="classPipelineStage.html#ace44729dd804ae58504cb7d72af36ae1" title="Sets CPU pointer.">setCPU</a>(<span class="keyword">this</span>);
<a name="l00340"></a>00340         <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stNum]-&gt;<a class="code" href="classPipelineStage.html#a5305443f521e36acce604ed0a3ff6c08" title="Sets pointer to list of active threads.">setActiveThreads</a>(&amp;<a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>);
<a name="l00341"></a>00341         <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stNum]-&gt;<a class="code" href="classPipelineStage.html#aa1a763b3037528533550861055e13aef" title="Sets the main backwards communication time buffer pointer.">setTimeBuffer</a>(&amp;<a class="code" href="classInOrderCPU.html#ae827e7ceb3a768f21e08a34d89b12712" title="Global communication structure.">timeBuffer</a>);
<a name="l00342"></a>00342 
<a name="l00343"></a>00343         <span class="comment">// Take Care of 1st/Nth stages</span>
<a name="l00344"></a>00344         <span class="keywordflow">if</span> (stNum &gt; 0)
<a name="l00345"></a>00345             <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stNum]-&gt;<a class="code" href="classPipelineStage.html#acc34112fca14ff0228ff0ee07c367ceb" title="Sets pointer to time buffer coming from fetch.">setPrevStageQueue</a>(<a class="code" href="classInOrderCPU.html#a590ac86c992c72ca6f287221c144f895" title="Communication structure that sits in between pipeline stages.">stageQueue</a>[stNum - 1]);
<a name="l00346"></a>00346         <span class="keywordflow">if</span> (stNum &lt; NumStages - 1)
<a name="l00347"></a>00347             <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stNum]-&gt;<a class="code" href="classPipelineStage.html#a513ef83403641cc8e48b2f02189a9386" title="Sets pointer to time buffer used to communicate to the next stage.">setNextStageQueue</a>(<a class="code" href="classInOrderCPU.html#a590ac86c992c72ca6f287221c144f895" title="Communication structure that sits in between pipeline stages.">stageQueue</a>[stNum]);
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350     <span class="comment">// Initialize thread specific variables</span>
<a name="l00351"></a>00351     <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a> = 0; <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a> &lt; numThreads; <a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>++) {
<a name="l00352"></a>00352         <a class="code" href="classInOrderCPU.html#a531943d53b1a13aabceb5c1973d698d1" title="Dependency Tracker for Integer &amp;amp; Floating Point Regs.">archRegDepMap</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>].<a class="code" href="classRegDepMap.html#a6177ed41ff95c6d7437994c7885af4e9">setCPU</a>(<span class="keyword">this</span>);
<a name="l00353"></a>00353 
<a name="l00354"></a>00354         <a class="code" href="classInOrderCPU.html#a3265800212197b04257383a5d1e32346" title="True if there is non-speculative Inst Active In Pipeline.">nonSpecInstActive</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>] = <span class="keyword">false</span>;
<a name="l00355"></a>00355         <a class="code" href="classInOrderCPU.html#ae33c372448d9bce9d15a72bac5a72a19" title="Instruction Seq.">nonSpecSeqNum</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>] = 0;
<a name="l00356"></a>00356 
<a name="l00357"></a>00357         <a class="code" href="classInOrderCPU.html#ad993e75cc7417941d4c06697e4b03903" title="Instruction Seq.">squashSeqNum</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>] = <a class="code" href="base_2types_8hh.html#a65da65e69ea5fb1119733a22d695b6f9">MaxAddr</a>;
<a name="l00358"></a>00358         <a class="code" href="classInOrderCPU.html#a18a49fcfbcef4ff39443f827445ea158" title="Last Cycle that the CPU squashed instruction end.">lastSquashCycle</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>] = 0;
<a name="l00359"></a>00359 
<a name="l00360"></a>00360         memset(<a class="code" href="classInOrderCPU.html#a4e34eadc97cb2d21868951a747f892ca">intRegs</a>[<a class="code" href="classInOrderCPU_1_1CPUEvent.html#ac4f92d793c9be446fda1afdbaaa52c14">tid</a>], 0, <span class="keyword">sizeof</span>(<a class="code" href="classInOrderCPU.html#a4e34eadc97cb2d21868951a747f892ca">intRegs</a>[tid]));
<a name="l00361"></a>00361         memset(<a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.i[tid], 0, <span class="keyword">sizeof</span>(<a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.i[tid]));
<a name="l00362"></a>00362         <a class="code" href="classInOrderCPU.html#a980b838613b45c5d8dd40bae319652d3" title="ISA state.">isa</a>[tid]-&gt;clear();
<a name="l00363"></a>00363 
<a name="l00364"></a>00364         <span class="comment">// Define dummy instructions and resource requests to be used.</span>
<a name="l00365"></a>00365         <a class="code" href="classInOrderCPU.html#a7d8fa4094cc4ac8dbb1e57ab9a958740" title="Instruction used to signify that there is no *real* instruction in buffer slot.">dummyInst</a>[tid] = <span class="keyword">new</span> <a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>(<span class="keyword">this</span>, 
<a name="l00366"></a>00366                                             <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid], 
<a name="l00367"></a>00367                                             0, 
<a name="l00368"></a>00368                                             tid, 
<a name="l00369"></a>00369                                             <a class="code" href="classInOrderCPU.html#a2ecb3e5a075e164cd24aceb3929512e4">asid</a>[tid]);
<a name="l00370"></a>00370 
<a name="l00371"></a>00371         <a class="code" href="classInOrderCPU.html#a0959cab05bfe835f7d9202f53fa4843a" title="Used by resources to signify a denied access to a resource.">dummyReq</a>[tid] = <span class="keyword">new</span> <a class="code" href="classResourceRequest.html">ResourceRequest</a>(<a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#a1c401fc7b9d99af8f8991757304e7526" title="Returns a pointer to a resource.">getResource</a>(0));
<a name="l00372"></a>00372 
<a name="l00373"></a>00373 
<a name="l00374"></a>00374         <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370" title="The FullSystem variable can be used to determine the current mode of simulation.">FullSystem</a>) {
<a name="l00375"></a>00375             <span class="comment">// Use this dummy inst to force squashing behind every instruction</span>
<a name="l00376"></a>00376             <span class="comment">// in pipeline</span>
<a name="l00377"></a>00377             <a class="code" href="classInOrderCPU.html#ab409072422b2ed614b0411ec36b409e2">dummyTrapInst</a>[tid] = <span class="keyword">new</span> <a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>(<span class="keyword">this</span>, NULL, 0, 0, 0);
<a name="l00378"></a>00378             <a class="code" href="classInOrderCPU.html#ab409072422b2ed614b0411ec36b409e2">dummyTrapInst</a>[tid]-&gt;seqNum = 0;
<a name="l00379"></a>00379             <a class="code" href="classInOrderCPU.html#ab409072422b2ed614b0411ec36b409e2">dummyTrapInst</a>[tid]-&gt;squashSeqNum = 0;
<a name="l00380"></a>00380             <a class="code" href="classInOrderCPU.html#ab409072422b2ed614b0411ec36b409e2">dummyTrapInst</a>[tid]-&gt;setTid(tid);
<a name="l00381"></a>00381         }
<a name="l00382"></a>00382 
<a name="l00383"></a>00383         <a class="code" href="classInOrderCPU.html#aed7228e307be5a47640e6ce25dc2f649">trapPending</a>[tid] = <span class="keyword">false</span>;
<a name="l00384"></a>00384 
<a name="l00385"></a>00385     }
<a name="l00386"></a>00386 
<a name="l00387"></a>00387     <span class="comment">// InOrderCPU always requires an interrupt controller.</span>
<a name="l00388"></a>00388     <span class="keywordflow">if</span> (!params-&gt;switched_out &amp;&amp; !<a class="code" href="classBaseCPU.html#a28c30d48c15c3096813e4941f90226d7">interrupts</a>) {
<a name="l00389"></a>00389         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;InOrderCPU %s has no interrupt controller.\n&quot;</span>
<a name="l00390"></a>00390               <span class="stringliteral">&quot;Ensure createInterruptController() is called.\n&quot;</span>, <a class="code" href="classEvent.html#a8659815158da793f30fd5147d6f7fe20">name</a>());
<a name="l00391"></a>00391     }
<a name="l00392"></a>00392 
<a name="l00393"></a>00393     <a class="code" href="classInOrderCPU.html#aba8bc48c06a190c373cee484f1f203c0">dummyReqInst</a> = <span class="keyword">new</span> <a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>(<span class="keyword">this</span>, NULL, 0, 0, 0);
<a name="l00394"></a>00394     <a class="code" href="classInOrderCPU.html#aba8bc48c06a190c373cee484f1f203c0">dummyReqInst</a>-&gt;setSquashed();
<a name="l00395"></a>00395     <a class="code" href="classInOrderCPU.html#aba8bc48c06a190c373cee484f1f203c0">dummyReqInst</a>-&gt;resetInstCount();
<a name="l00396"></a>00396 
<a name="l00397"></a>00397     <a class="code" href="classInOrderCPU.html#a020560f1463e2bb474adca563911beca">dummyBufferInst</a> = <span class="keyword">new</span> <a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>(<span class="keyword">this</span>, NULL, 0, 0, 0);
<a name="l00398"></a>00398     <a class="code" href="classInOrderCPU.html#a020560f1463e2bb474adca563911beca">dummyBufferInst</a>-&gt;setSquashed();
<a name="l00399"></a>00399     <a class="code" href="classInOrderCPU.html#a020560f1463e2bb474adca563911beca">dummyBufferInst</a>-&gt;resetInstCount();
<a name="l00400"></a>00400 
<a name="l00401"></a>00401     <a class="code" href="classInOrderCPU.html#a633a6ccea01925e42fc86b2e3d254f25" title="Initialized to last iterator in map, signifying a invalid entry on map searches.">endOfSkedIt</a> = <a class="code" href="classInOrderCPU.html#a03f4fd5e5fa270837168b275bb06348c" title="Cache of Instruction Schedule using the instruction&amp;#39;s name as a key.">skedCache</a>.end();
<a name="l00402"></a>00402     <a class="code" href="classInOrderCPU.html#ac37ca3f44438e97441ab84665b22e048">frontEndSked</a> = <a class="code" href="classInOrderCPU.html#a8f23637a40e61e12aba2b1a9ff808c84">createFrontEndSked</a>();
<a name="l00403"></a>00403     <a class="code" href="classInOrderCPU.html#a0184c949f94a6cd1466e44db9e468a19">faultSked</a> = <a class="code" href="classInOrderCPU.html#a00228582c2e8e3a454a8acee20afa828">createFaultSked</a>();
<a name="l00404"></a>00404 
<a name="l00405"></a>00405     <a class="code" href="classInOrderCPU.html#ae1f2ea9a1ebfb0935f4fd476acba2173" title="The cycle that the CPU was last running, used for statistics.">lastRunningCycle</a> = <a class="code" href="classClockedObject.html#a2b4a36a0ae697fe2c7c1c493146d7626" title="Determine the current cycle, corresponding to a tick aligned to a clock edge.">curCycle</a>();
<a name="l00406"></a>00406 
<a name="l00407"></a>00407     <a class="code" href="classInOrderCPU.html#a585104263cf3ce9e22af305295d4cd5d">lockAddr</a> = 0;
<a name="l00408"></a>00408     <a class="code" href="classInOrderCPU.html#a499f4e7f874fe929d43ea8ee87b60cae" title="Temporary fix for the lock flag, works in the UP case.">lockFlag</a> = <span class="keyword">false</span>;
<a name="l00409"></a>00409     
<a name="l00410"></a>00410     <span class="comment">// Schedule First Tick Event, CPU will reschedule itself from here on out.</span>
<a name="l00411"></a>00411     <a class="code" href="classInOrderCPU.html#ad2c54ca04c8e15fd63d875391f7a412b" title="Schedule tick event, regardless of its current state.">scheduleTickEvent</a>(<a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a>(0));
<a name="l00412"></a>00412 }
<a name="l00413"></a>00413 
<a name="l00414"></a><a class="code" href="classInOrderCPU.html#ad12472b8ebf53bdc714bb999591350cc">00414</a> <a class="code" href="classInOrderCPU.html#ad12472b8ebf53bdc714bb999591350cc">InOrderCPU::~InOrderCPU</a>()
<a name="l00415"></a>00415 {
<a name="l00416"></a>00416     <span class="keyword">delete</span> <a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>;
<a name="l00417"></a>00417 
<a name="l00418"></a>00418     <a class="code" href="classInOrderCPU.html#aa7fad580cb96ed44c0cd426718897d78">SkedCacheIt</a> sked_it = <a class="code" href="classInOrderCPU.html#a03f4fd5e5fa270837168b275bb06348c" title="Cache of Instruction Schedule using the instruction&amp;#39;s name as a key.">skedCache</a>.begin();
<a name="l00419"></a>00419     <a class="code" href="classInOrderCPU.html#aa7fad580cb96ed44c0cd426718897d78">SkedCacheIt</a> sked_end = <a class="code" href="classInOrderCPU.html#a03f4fd5e5fa270837168b275bb06348c" title="Cache of Instruction Schedule using the instruction&amp;#39;s name as a key.">skedCache</a>.end();
<a name="l00420"></a>00420 
<a name="l00421"></a>00421     <span class="keywordflow">while</span> (sked_it != sked_end) {
<a name="l00422"></a>00422         <span class="keyword">delete</span> (*sked_it).second;
<a name="l00423"></a>00423         sked_it++;
<a name="l00424"></a>00424     }
<a name="l00425"></a>00425     <a class="code" href="classInOrderCPU.html#a03f4fd5e5fa270837168b275bb06348c" title="Cache of Instruction Schedule using the instruction&amp;#39;s name as a key.">skedCache</a>.clear();
<a name="l00426"></a>00426 }
<a name="l00427"></a>00427 
<a name="l00428"></a>00428 m5::hash_map&lt;InOrderCPU::SkedID, ThePipeline::RSkedPtr&gt; <a class="code" href="classInOrderCPU.html#a03f4fd5e5fa270837168b275bb06348c" title="Cache of Instruction Schedule using the instruction&amp;#39;s name as a key.">InOrderCPU::skedCache</a>;
<a name="l00429"></a>00429 
<a name="l00430"></a>00430 <a class="code" href="classResourceSked.html" title="The ResourceSked maintains the complete schedule for an instruction.">RSkedPtr</a>
<a name="l00431"></a><a class="code" href="classInOrderCPU.html#a8f23637a40e61e12aba2b1a9ff808c84">00431</a> <a class="code" href="classInOrderCPU.html#a8f23637a40e61e12aba2b1a9ff808c84">InOrderCPU::createFrontEndSked</a>()
<a name="l00432"></a>00432 {
<a name="l00433"></a>00433     <a class="code" href="classResourceSked.html" title="The ResourceSked maintains the complete schedule for an instruction.">RSkedPtr</a> res_sked = <span class="keyword">new</span> <a class="code" href="classResourceSked.html" title="The ResourceSked maintains the complete schedule for an instruction.">ResourceSked</a>();
<a name="l00434"></a>00434     <span class="keywordtype">int</span> stage_num = 0;
<a name="l00435"></a>00435     <a class="code" href="classInOrderCPU_1_1StageScheduler.html">StageScheduler</a> F(res_sked, stage_num++);
<a name="l00436"></a>00436     <a class="code" href="classInOrderCPU_1_1StageScheduler.html">StageScheduler</a> D(res_sked, stage_num++);
<a name="l00437"></a>00437 
<a name="l00438"></a>00438     <span class="comment">// FETCH</span>
<a name="l00439"></a>00439     F.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2ba737d0a49af31018ae9f53a8ff0c038bf">FetchSeq</a>, <a class="code" href="classFetchSeqUnit.html#a1ad78168d300e87adf295d20ee3ec8cca02b70386fad6078b49959b1224fd73bf">FetchSeqUnit::AssignNextPC</a>);
<a name="l00440"></a>00440     F.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2ba92a8319a5bd5582d8bf2b680bbfb6bbd">ICache</a>, <a class="code" href="classFetchUnit.html#a18e204ec78d59de1d47aaa7bd94f9591a57b8a12bc3bf471b8b0643082046a946">FetchUnit::InitiateFetch</a>);
<a name="l00441"></a>00441 
<a name="l00442"></a>00442     <span class="comment">// DECODE</span>
<a name="l00443"></a>00443     D.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2ba92a8319a5bd5582d8bf2b680bbfb6bbd">ICache</a>, <a class="code" href="classFetchUnit.html#a18e204ec78d59de1d47aaa7bd94f9591a644daf523ab89d6c3e32d9606921c442">FetchUnit::CompleteFetch</a>);
<a name="l00444"></a>00444     D.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2ba54cdad6d20f9a0eb3c4074462bb61a41">Decode</a>, <a class="code" href="classDecodeUnit.html#aef0f6de943e15f0c734ac17857de79cfa28466c84858152591d337a730b766a48">DecodeUnit::DecodeInst</a>);
<a name="l00445"></a>00445     D.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2ba8301942dbfc788e5392a840606ad5aa5">BPred</a>, <a class="code" href="classBranchPredictor.html#a871698cabfdf568209e1362ab02ce7bfaddffb1bf5b603b9b9fcc9a89ddb68bba">BranchPredictor::PredictBranch</a>);
<a name="l00446"></a>00446     D.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2ba737d0a49af31018ae9f53a8ff0c038bf">FetchSeq</a>, <a class="code" href="classFetchSeqUnit.html#a1ad78168d300e87adf295d20ee3ec8ccaa51172bb7c2ad33083707e2610b0bd61">FetchSeqUnit::UpdateTargetPC</a>);
<a name="l00447"></a>00447 
<a name="l00448"></a>00448 
<a name="l00449"></a>00449     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(SkedCache, <span class="stringliteral">&quot;Resource Sked created for instruction Front End\n&quot;</span>);
<a name="l00450"></a>00450 
<a name="l00451"></a>00451     <span class="keywordflow">return</span> res_sked;
<a name="l00452"></a>00452 }
<a name="l00453"></a>00453 
<a name="l00454"></a>00454 <a class="code" href="classResourceSked.html" title="The ResourceSked maintains the complete schedule for an instruction.">RSkedPtr</a>
<a name="l00455"></a><a class="code" href="classInOrderCPU.html#a00228582c2e8e3a454a8acee20afa828">00455</a> <a class="code" href="classInOrderCPU.html#a00228582c2e8e3a454a8acee20afa828">InOrderCPU::createFaultSked</a>()
<a name="l00456"></a>00456 {
<a name="l00457"></a>00457     <a class="code" href="classResourceSked.html" title="The ResourceSked maintains the complete schedule for an instruction.">RSkedPtr</a> res_sked = <span class="keyword">new</span> <a class="code" href="classResourceSked.html" title="The ResourceSked maintains the complete schedule for an instruction.">ResourceSked</a>();
<a name="l00458"></a>00458     <a class="code" href="classInOrderCPU_1_1StageScheduler.html">StageScheduler</a> W(res_sked, NumStages - 1);
<a name="l00459"></a>00459     W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2baa95d2cd190defaf8ff6fa013d26b0f2a">Grad</a>, <a class="code" href="classGraduationUnit.html#a7c6645777f56bd3b476d906c0a7990b7a6a2b8bf3aaa4ecb809e57ffb3992a548">GraduationUnit::CheckFault</a>);
<a name="l00460"></a>00460     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(SkedCache, <span class="stringliteral">&quot;Resource Sked created for instruction Faults\n&quot;</span>);
<a name="l00461"></a>00461     <span class="keywordflow">return</span> res_sked;
<a name="l00462"></a>00462 }
<a name="l00463"></a>00463 
<a name="l00464"></a>00464 <a class="code" href="classResourceSked.html" title="The ResourceSked maintains the complete schedule for an instruction.">RSkedPtr</a>
<a name="l00465"></a><a class="code" href="classInOrderCPU.html#adc0a4e705232abfa9784c42e2a307909">00465</a> <a class="code" href="classInOrderCPU.html#adc0a4e705232abfa9784c42e2a307909">InOrderCPU::createBackEndSked</a>(<a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst)
<a name="l00466"></a>00466 {
<a name="l00467"></a>00467     <a class="code" href="classResourceSked.html" title="The ResourceSked maintains the complete schedule for an instruction.">RSkedPtr</a> res_sked = <a class="code" href="classInOrderCPU.html#a33d5688c7cc349d2a44e85b307ded214" title="Find a instruction schedule.">lookupSked</a>(inst);
<a name="l00468"></a>00468     <span class="keywordflow">if</span> (res_sked != NULL) {
<a name="l00469"></a>00469         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(SkedCache, <span class="stringliteral">&quot;Found %s in sked cache.\n&quot;</span>,
<a name="l00470"></a>00470                 inst-&gt;instName());
<a name="l00471"></a>00471         <span class="keywordflow">return</span> res_sked;
<a name="l00472"></a>00472     } <span class="keywordflow">else</span> {
<a name="l00473"></a>00473         res_sked = <span class="keyword">new</span> <a class="code" href="classResourceSked.html" title="The ResourceSked maintains the complete schedule for an instruction.">ResourceSked</a>();
<a name="l00474"></a>00474     }
<a name="l00475"></a>00475 
<a name="l00476"></a>00476     <span class="keywordtype">int</span> stage_num = <a class="code" href="namespaceThePipeline.html#ae1f7d925b86908d6ba944281b205a63b">ThePipeline::BackEndStartStage</a>;
<a name="l00477"></a>00477     <a class="code" href="classInOrderCPU_1_1StageScheduler.html">StageScheduler</a> <a class="code" href="namespaceX86ISA.html#aa57c1c472510f3e4d608bcb15769b6af">X</a>(res_sked, stage_num++);
<a name="l00478"></a>00478     <a class="code" href="classInOrderCPU_1_1StageScheduler.html">StageScheduler</a> M(res_sked, stage_num++);
<a name="l00479"></a>00479     <a class="code" href="classInOrderCPU_1_1StageScheduler.html">StageScheduler</a> W(res_sked, stage_num++);
<a name="l00480"></a>00480 
<a name="l00481"></a>00481     <span class="keywordflow">if</span> (!inst-&gt;staticInst) {
<a name="l00482"></a>00482         <a class="code" href="base_2misc_8hh.html#abb243c15dfbeedf4ae64aa213f4f18c7">warn_once</a>(<span class="stringliteral">&quot;Static Instruction Object Not Set. Can&#39;t Create&quot;</span>
<a name="l00483"></a>00483                   <span class="stringliteral">&quot; Back End Schedule&quot;</span>);
<a name="l00484"></a>00484         <span class="keywordflow">return</span> NULL;
<a name="l00485"></a>00485     }
<a name="l00486"></a>00486 
<a name="l00487"></a>00487     <span class="comment">// EXECUTE</span>
<a name="l00488"></a>00488     X.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bacf08ddf1ffa51768385b8c650a83a516">RegManager</a>, <a class="code" href="classUseDefUnit.html#a83a8ac78c58bf8d406a07702d18a2d7aa617c00cc2c775e3195a6b5dbe9ad5177">UseDefUnit::MarkDestRegs</a>);
<a name="l00489"></a>00489     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx=0; idx &lt; inst-&gt;numSrcRegs(); idx++) {
<a name="l00490"></a>00490         <span class="keywordflow">if</span> (!idx || !inst-&gt;isStore()) {
<a name="l00491"></a>00491             X.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bacf08ddf1ffa51768385b8c650a83a516">RegManager</a>, <a class="code" href="classUseDefUnit.html#a83a8ac78c58bf8d406a07702d18a2d7aa39810a13d1daa7d14b7bdb542c8412c0">UseDefUnit::ReadSrcReg</a>, idx);
<a name="l00492"></a>00492         }
<a name="l00493"></a>00493     }
<a name="l00494"></a>00494 
<a name="l00495"></a>00495     <span class="comment">//@todo: schedule non-spec insts to operate on this cycle</span>
<a name="l00496"></a>00496     <span class="comment">// as long as all previous insts are done</span>
<a name="l00497"></a>00497     <span class="keywordflow">if</span> ( inst-&gt;isNonSpeculative() ) {
<a name="l00498"></a>00498         <span class="comment">// skip execution of non speculative insts until later</span>
<a name="l00499"></a>00499     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( inst-&gt;isMemRef() ) {
<a name="l00500"></a>00500         <span class="keywordflow">if</span> ( inst-&gt;isLoad() ) {
<a name="l00501"></a>00501             X.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2ba6890ecb47ccd941a284d29ea99cf9537">AGEN</a>, <a class="code" href="classAGENUnit.html#aef5110d7d14d6906758ccbf7a47b47c3a8c7bf65013657a6b3c5a692c84a280d5">AGENUnit::GenerateAddr</a>);
<a name="l00502"></a>00502         }
<a name="l00503"></a>00503     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inst-&gt;opClass() == <a class="code" href="op__class_8hh.html#ae50ef4669f1d2743a6a3f6a104817cbc">IntMultOp</a> || inst-&gt;opClass() == <a class="code" href="op__class_8hh.html#a303ec67a6fe8b9a36513930abda060dd">IntDivOp</a>) {
<a name="l00504"></a>00504         X.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2babd0cedbab69faf586edd82aac1254553">MDU</a>, <a class="code" href="classMultDivUnit.html#ac2b9752b32b97082e06f09fce114e109a526d4d20c06fd3dfaace324f8bbd5986">MultDivUnit::StartMultDiv</a>);
<a name="l00505"></a>00505     } <span class="keywordflow">else</span> {
<a name="l00506"></a>00506         X.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad85c3801e1f9fb3b51c78ee259a79999">ExecUnit</a>, <a class="code" href="classExecutionUnit.html#a94b9cc9f107895c46f4adecb9c499ec2a9f16b71b94da391280d15783dd0f823b">ExecutionUnit::ExecuteInst</a>);
<a name="l00507"></a>00507     }
<a name="l00508"></a>00508 
<a name="l00509"></a>00509     <span class="comment">// MEMORY</span>
<a name="l00510"></a>00510     <span class="keywordflow">if</span> (!inst-&gt;isNonSpeculative()) {
<a name="l00511"></a>00511         <span class="keywordflow">if</span> (inst-&gt;opClass() == <a class="code" href="op__class_8hh.html#ae50ef4669f1d2743a6a3f6a104817cbc">IntMultOp</a> || inst-&gt;opClass() == <a class="code" href="op__class_8hh.html#a303ec67a6fe8b9a36513930abda060dd">IntDivOp</a>) {
<a name="l00512"></a>00512             M.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2babd0cedbab69faf586edd82aac1254553">MDU</a>, <a class="code" href="classMultDivUnit.html#ac2b9752b32b97082e06f09fce114e109a0198c42943c96ad6dc7b0ca5f61bb961">MultDivUnit::EndMultDiv</a>);
<a name="l00513"></a>00513         }
<a name="l00514"></a>00514 
<a name="l00515"></a>00515         <span class="keywordflow">if</span> ( inst-&gt;isLoad() ) {
<a name="l00516"></a>00516             M.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8a021ed4b41cb490959113606398c6f440">CacheUnit::InitiateReadData</a>);
<a name="l00517"></a>00517             <span class="keywordflow">if</span> (inst-&gt;splitInst)
<a name="l00518"></a>00518                 M.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8a63f480e206b8d9784e8c042b08146ef5">CacheUnit::InitSecondSplitRead</a>);
<a name="l00519"></a>00519         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( inst-&gt;isStore() ) {
<a name="l00520"></a>00520             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="classInOrderCPU.html#a4d58008c24b336fffd3837b7bdc2cd1c">i</a> = 1; <a class="code" href="classInOrderCPU.html#a4d58008c24b336fffd3837b7bdc2cd1c">i</a> &lt; inst-&gt;numSrcRegs(); <a class="code" href="classInOrderCPU.html#a4d58008c24b336fffd3837b7bdc2cd1c">i</a>++ ) {
<a name="l00521"></a>00521                 M.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bacf08ddf1ffa51768385b8c650a83a516">RegManager</a>, <a class="code" href="classUseDefUnit.html#a83a8ac78c58bf8d406a07702d18a2d7aa39810a13d1daa7d14b7bdb542c8412c0">UseDefUnit::ReadSrcReg</a>, <a class="code" href="classInOrderCPU.html#a4d58008c24b336fffd3837b7bdc2cd1c">i</a>);
<a name="l00522"></a>00522             }
<a name="l00523"></a>00523             M.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2ba6890ecb47ccd941a284d29ea99cf9537">AGEN</a>, <a class="code" href="classAGENUnit.html#aef5110d7d14d6906758ccbf7a47b47c3a8c7bf65013657a6b3c5a692c84a280d5">AGENUnit::GenerateAddr</a>);
<a name="l00524"></a>00524             M.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8a40f896d7e18eecc0818ff41d21a72bc8">CacheUnit::InitiateWriteData</a>);
<a name="l00525"></a>00525             <span class="keywordflow">if</span> (inst-&gt;splitInst)
<a name="l00526"></a>00526                 M.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8a5d1f82b8a96a255e2a42da7213d5e3f5">CacheUnit::InitSecondSplitWrite</a>);
<a name="l00527"></a>00527         }
<a name="l00528"></a>00528     }
<a name="l00529"></a>00529 
<a name="l00530"></a>00530     <span class="comment">// WRITEBACK</span>
<a name="l00531"></a>00531     <span class="keywordflow">if</span> (!inst-&gt;isNonSpeculative()) {
<a name="l00532"></a>00532         <span class="keywordflow">if</span> ( inst-&gt;isLoad() ) {
<a name="l00533"></a>00533             W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8aaa3d19f36ac5a7fa5e59826adee06766">CacheUnit::CompleteReadData</a>);
<a name="l00534"></a>00534             <span class="keywordflow">if</span> (inst-&gt;splitInst)
<a name="l00535"></a>00535                 W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8ae6e716f27e36c1f8d3460537dafcce6f">CacheUnit::CompleteSecondSplitRead</a>);
<a name="l00536"></a>00536         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( inst-&gt;isStore() ) {
<a name="l00537"></a>00537             W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8a547a584e8df1f185f3f715d4f7ff7af1">CacheUnit::CompleteWriteData</a>);
<a name="l00538"></a>00538             <span class="keywordflow">if</span> (inst-&gt;splitInst)
<a name="l00539"></a>00539                 W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8a59291a6bb7804127c0389448ca250c49">CacheUnit::CompleteSecondSplitWrite</a>);
<a name="l00540"></a>00540         }
<a name="l00541"></a>00541     } <span class="keywordflow">else</span> {
<a name="l00542"></a>00542         <span class="comment">// Finally, Execute Speculative Data</span>
<a name="l00543"></a>00543         <span class="keywordflow">if</span> (inst-&gt;isMemRef()) {
<a name="l00544"></a>00544             <span class="keywordflow">if</span> (inst-&gt;isLoad()) {
<a name="l00545"></a>00545                 W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2ba6890ecb47ccd941a284d29ea99cf9537">AGEN</a>, <a class="code" href="classAGENUnit.html#aef5110d7d14d6906758ccbf7a47b47c3a8c7bf65013657a6b3c5a692c84a280d5">AGENUnit::GenerateAddr</a>);
<a name="l00546"></a>00546                 W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8a021ed4b41cb490959113606398c6f440">CacheUnit::InitiateReadData</a>);
<a name="l00547"></a>00547                 <span class="keywordflow">if</span> (inst-&gt;splitInst)
<a name="l00548"></a>00548                     W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8a63f480e206b8d9784e8c042b08146ef5">CacheUnit::InitSecondSplitRead</a>);
<a name="l00549"></a>00549                 W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8aaa3d19f36ac5a7fa5e59826adee06766">CacheUnit::CompleteReadData</a>);
<a name="l00550"></a>00550                 <span class="keywordflow">if</span> (inst-&gt;splitInst)
<a name="l00551"></a>00551                     W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8ae6e716f27e36c1f8d3460537dafcce6f">CacheUnit::CompleteSecondSplitRead</a>);
<a name="l00552"></a>00552             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inst-&gt;isStore()) {
<a name="l00553"></a>00553                 <span class="keywordflow">if</span> ( inst-&gt;numSrcRegs() &gt;= 2 ) {
<a name="l00554"></a>00554                     W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bacf08ddf1ffa51768385b8c650a83a516">RegManager</a>, <a class="code" href="classUseDefUnit.html#a83a8ac78c58bf8d406a07702d18a2d7aa39810a13d1daa7d14b7bdb542c8412c0">UseDefUnit::ReadSrcReg</a>, 1);
<a name="l00555"></a>00555                 }
<a name="l00556"></a>00556                 W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2ba6890ecb47ccd941a284d29ea99cf9537">AGEN</a>, <a class="code" href="classAGENUnit.html#aef5110d7d14d6906758ccbf7a47b47c3a8c7bf65013657a6b3c5a692c84a280d5">AGENUnit::GenerateAddr</a>);
<a name="l00557"></a>00557                 W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8a40f896d7e18eecc0818ff41d21a72bc8">CacheUnit::InitiateWriteData</a>);
<a name="l00558"></a>00558                 <span class="keywordflow">if</span> (inst-&gt;splitInst)
<a name="l00559"></a>00559                     W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8a5d1f82b8a96a255e2a42da7213d5e3f5">CacheUnit::InitSecondSplitWrite</a>);
<a name="l00560"></a>00560                 W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8a547a584e8df1f185f3f715d4f7ff7af1">CacheUnit::CompleteWriteData</a>);
<a name="l00561"></a>00561                 <span class="keywordflow">if</span> (inst-&gt;splitInst)
<a name="l00562"></a>00562                     W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad6e7718bf97fb4a2c9c214d0d69770a0">DCache</a>, <a class="code" href="classCacheUnit.html#ad2c74fcc25210436155e1d508c7c60e8a59291a6bb7804127c0389448ca250c49">CacheUnit::CompleteSecondSplitWrite</a>);
<a name="l00563"></a>00563             }
<a name="l00564"></a>00564         } <span class="keywordflow">else</span> {
<a name="l00565"></a>00565             W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bad85c3801e1f9fb3b51c78ee259a79999">ExecUnit</a>, <a class="code" href="classExecutionUnit.html#a94b9cc9f107895c46f4adecb9c499ec2a9f16b71b94da391280d15783dd0f823b">ExecutionUnit::ExecuteInst</a>);
<a name="l00566"></a>00566         }
<a name="l00567"></a>00567     }
<a name="l00568"></a>00568 
<a name="l00569"></a>00569     W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2baa95d2cd190defaf8ff6fa013d26b0f2a">Grad</a>, <a class="code" href="classGraduationUnit.html#a7c6645777f56bd3b476d906c0a7990b7a6a2b8bf3aaa4ecb809e57ffb3992a548">GraduationUnit::CheckFault</a>);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx=0; idx &lt; inst-&gt;numDestRegs(); idx++) {
<a name="l00572"></a>00572         W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2bacf08ddf1ffa51768385b8c650a83a516">RegManager</a>, <a class="code" href="classUseDefUnit.html#a83a8ac78c58bf8d406a07702d18a2d7aa608f77cf784ed740d7f9d5bd7743622a">UseDefUnit::WriteDestReg</a>, idx);
<a name="l00573"></a>00573     }
<a name="l00574"></a>00574 
<a name="l00575"></a>00575     <span class="keywordflow">if</span> (inst-&gt;isControl())
<a name="l00576"></a>00576         W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2ba8301942dbfc788e5392a840606ad5aa5">BPred</a>, <a class="code" href="classBranchPredictor.html#a871698cabfdf568209e1362ab02ce7bfac1deb4e3fcba62bfdf5e02f6c59c1688">BranchPredictor::UpdatePredictor</a>);
<a name="l00577"></a>00577 
<a name="l00578"></a>00578     W.<a class="code" href="classInOrderCPU_1_1StageScheduler.html#a65529ba7e8f3a41f07b3bfb010416f18">needs</a>(<a class="code" href="namespaceThePipeline.html#a6fe6e0def324ecc663819b4cad987a2baa95d2cd190defaf8ff6fa013d26b0f2a">Grad</a>, <a class="code" href="classGraduationUnit.html#a7c6645777f56bd3b476d906c0a7990b7a3dd61d180e83067a43eb816c968848ed">GraduationUnit::GraduateInst</a>);
<a name="l00579"></a>00579 
<a name="l00580"></a>00580     <span class="comment">// Insert Back Schedule into our cache of</span>
<a name="l00581"></a>00581     <span class="comment">// resource schedules</span>
<a name="l00582"></a>00582     <a class="code" href="classInOrderCPU.html#a71eb13a6c2b1243f0ce137738270332e" title="Add a new instruction schedule to the schedule cache.">addToSkedCache</a>(inst, res_sked);
<a name="l00583"></a>00583 
<a name="l00584"></a>00584     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(SkedCache, <span class="stringliteral">&quot;Back End Sked Created for instruction: %s (%08p)\n&quot;</span>,
<a name="l00585"></a>00585             inst-&gt;instName(), inst-&gt;getMachInst());
<a name="l00586"></a>00586     res_sked-&gt;<a class="code" href="classResourceSked.html#a8215a194d786209bea296dfc918127ff" title="Print what&amp;#39;s left on the instruction schedule.">print</a>();
<a name="l00587"></a>00587 
<a name="l00588"></a>00588     <span class="keywordflow">return</span> res_sked;
<a name="l00589"></a>00589 }
<a name="l00590"></a>00590 
<a name="l00591"></a>00591 <span class="keywordtype">void</span>
<a name="l00592"></a><a class="code" href="classInOrderCPU.html#ab9a0cabbafb7e265ec978fee29b991da">00592</a> <a class="code" href="classInOrderCPU.html#ab9a0cabbafb7e265ec978fee29b991da" title="Registers statistics.">InOrderCPU::regStats</a>()
<a name="l00593"></a>00593 {
<a name="l00594"></a>00594     <span class="comment">/* Register the Resource Pool&#39;s stats here.*/</span>
<a name="l00595"></a>00595     <a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#aaa28a0e4f4655eac8586b5156a022dc0" title="Register Statistics in All Resources.">regStats</a>();
<a name="l00596"></a>00596 
<a name="l00597"></a>00597     <span class="comment">/* Register for each Pipeline Stage */</span>
<a name="l00598"></a>00598     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stage_num=0; stage_num &lt; <a class="code" href="namespaceThePipeline.html#ab8c8c960bf74f5d154c9bf6c3e25ff13">ThePipeline::NumStages</a>; stage_num++) {
<a name="l00599"></a>00599         <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stage_num]-&gt;<a class="code" href="classPipelineStage.html#a852608cb02b0f4b91e277d191b00d970" title="Registers statistics.">regStats</a>();
<a name="l00600"></a>00600     }
<a name="l00601"></a>00601 
<a name="l00602"></a>00602     <span class="comment">/* Register any of the InOrderCPU&#39;s stats here.*/</span>
<a name="l00603"></a>00603     <a class="code" href="classInOrderCPU.html#abe243b2922185ff89d3cbeefe2fb1b2d">instsPerCtxtSwitch</a>
<a name="l00604"></a>00604         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.instsPerContextSwitch&quot;</span>)
<a name="l00605"></a>00605         .desc(<span class="stringliteral">&quot;Instructions Committed Per Context Switch&quot;</span>)
<a name="l00606"></a>00606         .prereq(<a class="code" href="classInOrderCPU.html#abe243b2922185ff89d3cbeefe2fb1b2d">instsPerCtxtSwitch</a>);
<a name="l00607"></a>00607     
<a name="l00608"></a>00608     <a class="code" href="classInOrderCPU.html#ac8e8d6311421fc98db6bfa0dc3ebe6d8">numCtxtSwitches</a>
<a name="l00609"></a>00609         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.contextSwitches&quot;</span>)
<a name="l00610"></a>00610         .desc(<span class="stringliteral">&quot;Number of context switches&quot;</span>);
<a name="l00611"></a>00611 
<a name="l00612"></a>00612     <a class="code" href="classInOrderCPU.html#a6df696663b487012068a9a872ee47456" title="Instruction Mix Stats.">comLoads</a>
<a name="l00613"></a>00613         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.comLoads&quot;</span>)
<a name="l00614"></a>00614         .desc(<span class="stringliteral">&quot;Number of Load instructions committed&quot;</span>);
<a name="l00615"></a>00615 
<a name="l00616"></a>00616     <a class="code" href="classInOrderCPU.html#ab44ec4ec8c5a18c9c98fee409e76b326">comStores</a>
<a name="l00617"></a>00617         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.comStores&quot;</span>)
<a name="l00618"></a>00618         .desc(<span class="stringliteral">&quot;Number of Store instructions committed&quot;</span>);
<a name="l00619"></a>00619 
<a name="l00620"></a>00620     <a class="code" href="classInOrderCPU.html#ae2c4152f69d007f60e9da7c8e9107e1a">comBranches</a>
<a name="l00621"></a>00621         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.comBranches&quot;</span>)
<a name="l00622"></a>00622         .desc(<span class="stringliteral">&quot;Number of Branches instructions committed&quot;</span>);
<a name="l00623"></a>00623 
<a name="l00624"></a>00624     <a class="code" href="classInOrderCPU.html#ab19438e97acdc039e518eeaa3f7dd6cb">comNops</a>
<a name="l00625"></a>00625         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.comNops&quot;</span>)
<a name="l00626"></a>00626         .desc(<span class="stringliteral">&quot;Number of Nop instructions committed&quot;</span>);
<a name="l00627"></a>00627 
<a name="l00628"></a>00628     <a class="code" href="classInOrderCPU.html#a74532fc813e9b13acbc9ed53aa343daa">comNonSpec</a>
<a name="l00629"></a>00629         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.comNonSpec&quot;</span>)
<a name="l00630"></a>00630         .desc(<span class="stringliteral">&quot;Number of Non-Speculative instructions committed&quot;</span>);
<a name="l00631"></a>00631 
<a name="l00632"></a>00632     <a class="code" href="classInOrderCPU.html#a917ee8d2f7f7ac04bcd6998c01662ace">comInts</a>
<a name="l00633"></a>00633         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.comInts&quot;</span>)
<a name="l00634"></a>00634         .desc(<span class="stringliteral">&quot;Number of Integer instructions committed&quot;</span>);
<a name="l00635"></a>00635 
<a name="l00636"></a>00636     <a class="code" href="classInOrderCPU.html#a922449bc11a00c3ea7496fe24fc6e259">comFloats</a>
<a name="l00637"></a>00637         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.comFloats&quot;</span>)
<a name="l00638"></a>00638         .desc(<span class="stringliteral">&quot;Number of Floating Point instructions committed&quot;</span>);
<a name="l00639"></a>00639             
<a name="l00640"></a>00640     <a class="code" href="classInOrderCPU.html#a11888a9f8c1bc8d01480e8a77a7bcab7" title="Stat for total number of times the CPU is descheduled.">timesIdled</a>
<a name="l00641"></a>00641         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.timesIdled&quot;</span>)
<a name="l00642"></a>00642         .desc(<span class="stringliteral">&quot;Number of times that the entire CPU went into an idle state and&quot;</span>
<a name="l00643"></a>00643               <span class="stringliteral">&quot; unscheduled itself&quot;</span>)
<a name="l00644"></a>00644         .prereq(<a class="code" href="classInOrderCPU.html#a11888a9f8c1bc8d01480e8a77a7bcab7" title="Stat for total number of times the CPU is descheduled.">timesIdled</a>);
<a name="l00645"></a>00645 
<a name="l00646"></a>00646     <a class="code" href="classInOrderCPU.html#ae1467169175524e340a416a903e2d899" title="Stat for total number of cycles the CPU spends descheduled or no stages active.">idleCycles</a>
<a name="l00647"></a>00647         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.idleCycles&quot;</span>)
<a name="l00648"></a>00648         .desc(<span class="stringliteral">&quot;Number of cycles cpu&#39;s stages were not processed&quot;</span>);
<a name="l00649"></a>00649 
<a name="l00650"></a>00650     <a class="code" href="classInOrderCPU.html#a9661471728f9a86d663046d4d0259c73" title="Stat for total number of cycles the CPU is active.">runCycles</a>
<a name="l00651"></a>00651         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.runCycles&quot;</span>)
<a name="l00652"></a>00652         .desc(<span class="stringliteral">&quot;Number of cycles cpu stages are processed.&quot;</span>);
<a name="l00653"></a>00653 
<a name="l00654"></a>00654     <a class="code" href="classInOrderCPU.html#af577c348e47220ba259933b6c243a6c9" title="Percentage of cycles a stage was active.">activity</a>
<a name="l00655"></a>00655         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.activity&quot;</span>)
<a name="l00656"></a>00656         .desc(<span class="stringliteral">&quot;Percentage of cycles cpu is active&quot;</span>)
<a name="l00657"></a>00657         .precision(6);
<a name="l00658"></a>00658     <a class="code" href="classInOrderCPU.html#af577c348e47220ba259933b6c243a6c9" title="Percentage of cycles a stage was active.">activity</a> = (<a class="code" href="classInOrderCPU.html#a9661471728f9a86d663046d4d0259c73" title="Stat for total number of cycles the CPU is active.">runCycles</a> / <a class="code" href="classBaseCPU.html#a205aff3cc2e726632f492ccd4f45d3ca">numCycles</a>) * 100;
<a name="l00659"></a>00659 
<a name="l00660"></a>00660     <a class="code" href="classInOrderCPU.html#a666c920f85b1e0ea517f4e0f52f18d86" title="Per-Thread Tick.">threadCycles</a>
<a name="l00661"></a>00661         .<a class="code" href="classStats_1_1VectorBase.html#ada7b4d1605ccdfba6975aa1025b861a2" title="Set this vector to have the given size.">init</a>(numThreads)
<a name="l00662"></a>00662         .name(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.threadCycles&quot;</span>)
<a name="l00663"></a>00663         .desc(<span class="stringliteral">&quot;Total Number of Cycles A Thread Was Active in CPU (Per-Thread)&quot;</span>);
<a name="l00664"></a>00664 
<a name="l00665"></a>00665     <a class="code" href="classInOrderCPU.html#a9f4ccb48e35b7b91a173e2baabd54c3b" title="Tick for SMT.">smtCycles</a>
<a name="l00666"></a>00666         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.smtCycles&quot;</span>)
<a name="l00667"></a>00667         .desc(<span class="stringliteral">&quot;Total number of cycles that the CPU was in SMT-mode&quot;</span>);
<a name="l00668"></a>00668 
<a name="l00669"></a>00669     <a class="code" href="classInOrderCPU.html#ab842b054883c3e33939d5dc33dae99f6" title="Stat for the number of committed instructions per thread.">committedInsts</a>
<a name="l00670"></a>00670         .<a class="code" href="classStats_1_1VectorBase.html#ada7b4d1605ccdfba6975aa1025b861a2" title="Set this vector to have the given size.">init</a>(numThreads)
<a name="l00671"></a>00671         .name(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.committedInsts&quot;</span>)
<a name="l00672"></a>00672         .desc(<span class="stringliteral">&quot;Number of Instructions committed (Per-Thread)&quot;</span>);
<a name="l00673"></a>00673 
<a name="l00674"></a>00674     <a class="code" href="classInOrderCPU.html#ae1d4d4c79c9cc7d403b0068b4d61fbc8" title="Stat for the number of committed ops per thread.">committedOps</a>
<a name="l00675"></a>00675         .<a class="code" href="classStats_1_1VectorBase.html#ada7b4d1605ccdfba6975aa1025b861a2" title="Set this vector to have the given size.">init</a>(numThreads)
<a name="l00676"></a>00676         .name(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.committedOps&quot;</span>)
<a name="l00677"></a>00677         .desc(<span class="stringliteral">&quot;Number of Ops committed (Per-Thread)&quot;</span>);
<a name="l00678"></a>00678 
<a name="l00679"></a>00679     <a class="code" href="classInOrderCPU.html#af63629582266eb4a815060226c1f1ceb" title="Stat for the number of committed instructions per thread.">smtCommittedInsts</a>
<a name="l00680"></a>00680         .<a class="code" href="classStats_1_1VectorBase.html#ada7b4d1605ccdfba6975aa1025b861a2" title="Set this vector to have the given size.">init</a>(numThreads)
<a name="l00681"></a>00681         .name(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.smtCommittedInsts&quot;</span>)
<a name="l00682"></a>00682         .desc(<span class="stringliteral">&quot;Number of SMT Instructions committed (Per-Thread)&quot;</span>);
<a name="l00683"></a>00683 
<a name="l00684"></a>00684     <a class="code" href="classInOrderCPU.html#a17b41e39c6eb146b3126911bf78cea5c" title="Stat for the total number of committed instructions.">totalCommittedInsts</a>
<a name="l00685"></a>00685         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.committedInsts_total&quot;</span>)
<a name="l00686"></a>00686         .desc(<span class="stringliteral">&quot;Number of Instructions committed (Total)&quot;</span>);
<a name="l00687"></a>00687 
<a name="l00688"></a>00688     <a class="code" href="classInOrderCPU.html#aa3becf69fb3f0e887aeb5e2bec0fc9f6" title="Stat for the CPI per thread.">cpi</a>
<a name="l00689"></a>00689         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.cpi&quot;</span>)
<a name="l00690"></a>00690         .desc(<span class="stringliteral">&quot;CPI: Cycles Per Instruction (Per-Thread)&quot;</span>)
<a name="l00691"></a>00691         .precision(6);
<a name="l00692"></a>00692     <a class="code" href="classInOrderCPU.html#aa3becf69fb3f0e887aeb5e2bec0fc9f6" title="Stat for the CPI per thread.">cpi</a> = <a class="code" href="classBaseCPU.html#a205aff3cc2e726632f492ccd4f45d3ca">numCycles</a> / <a class="code" href="classInOrderCPU.html#ab842b054883c3e33939d5dc33dae99f6" title="Stat for the number of committed instructions per thread.">committedInsts</a>;
<a name="l00693"></a>00693 
<a name="l00694"></a>00694     <a class="code" href="classInOrderCPU.html#abf90bede8ed495aae6f7edd614d54bea" title="Stat for the SMT-CPI per thread.">smtCpi</a>
<a name="l00695"></a>00695         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.smt_cpi&quot;</span>)
<a name="l00696"></a>00696         .desc(<span class="stringliteral">&quot;CPI: Total SMT-CPI&quot;</span>)
<a name="l00697"></a>00697         .precision(6);
<a name="l00698"></a>00698     <a class="code" href="classInOrderCPU.html#abf90bede8ed495aae6f7edd614d54bea" title="Stat for the SMT-CPI per thread.">smtCpi</a> = <a class="code" href="classInOrderCPU.html#a9f4ccb48e35b7b91a173e2baabd54c3b" title="Tick for SMT.">smtCycles</a> / <a class="code" href="classInOrderCPU.html#af63629582266eb4a815060226c1f1ceb" title="Stat for the number of committed instructions per thread.">smtCommittedInsts</a>;
<a name="l00699"></a>00699 
<a name="l00700"></a>00700     <a class="code" href="classInOrderCPU.html#a1f99b7f117adbd661fc38d4ef420bb26" title="Stat for the total CPI.">totalCpi</a>
<a name="l00701"></a>00701         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.cpi_total&quot;</span>)
<a name="l00702"></a>00702         .desc(<span class="stringliteral">&quot;CPI: Total CPI of All Threads&quot;</span>)
<a name="l00703"></a>00703         .precision(6);
<a name="l00704"></a>00704     <a class="code" href="classInOrderCPU.html#a1f99b7f117adbd661fc38d4ef420bb26" title="Stat for the total CPI.">totalCpi</a> = <a class="code" href="classBaseCPU.html#a205aff3cc2e726632f492ccd4f45d3ca">numCycles</a> / <a class="code" href="classInOrderCPU.html#a17b41e39c6eb146b3126911bf78cea5c" title="Stat for the total number of committed instructions.">totalCommittedInsts</a>;
<a name="l00705"></a>00705 
<a name="l00706"></a>00706     <a class="code" href="classInOrderCPU.html#a02357b77169aff3dc326e05a4bae7d64" title="Stat for the IPC per thread.">ipc</a>
<a name="l00707"></a>00707         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.ipc&quot;</span>)
<a name="l00708"></a>00708         .desc(<span class="stringliteral">&quot;IPC: Instructions Per Cycle (Per-Thread)&quot;</span>)
<a name="l00709"></a>00709         .precision(6);
<a name="l00710"></a>00710     <a class="code" href="classInOrderCPU.html#a02357b77169aff3dc326e05a4bae7d64" title="Stat for the IPC per thread.">ipc</a> =  <a class="code" href="classInOrderCPU.html#ab842b054883c3e33939d5dc33dae99f6" title="Stat for the number of committed instructions per thread.">committedInsts</a> / <a class="code" href="classBaseCPU.html#a205aff3cc2e726632f492ccd4f45d3ca">numCycles</a>;
<a name="l00711"></a>00711 
<a name="l00712"></a>00712     <a class="code" href="classInOrderCPU.html#a6abb881804b3322e5195b7f59f03236e" title="Stat for the total IPC.">smtIpc</a>
<a name="l00713"></a>00713         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.smt_ipc&quot;</span>)
<a name="l00714"></a>00714         .desc(<span class="stringliteral">&quot;IPC: Total SMT-IPC&quot;</span>)
<a name="l00715"></a>00715         .precision(6);
<a name="l00716"></a>00716     <a class="code" href="classInOrderCPU.html#a6abb881804b3322e5195b7f59f03236e" title="Stat for the total IPC.">smtIpc</a> = <a class="code" href="classInOrderCPU.html#af63629582266eb4a815060226c1f1ceb" title="Stat for the number of committed instructions per thread.">smtCommittedInsts</a> / <a class="code" href="classInOrderCPU.html#a9f4ccb48e35b7b91a173e2baabd54c3b" title="Tick for SMT.">smtCycles</a>;
<a name="l00717"></a>00717 
<a name="l00718"></a>00718     <a class="code" href="classInOrderCPU.html#ac9d7f57fe0a1468adceea8cd3ab8129e" title="Stat for the total IPC.">totalIpc</a>
<a name="l00719"></a>00719         .<a class="code" href="classStats_1_1DataWrap.html#a8f6effeadf113613c8e96c732bef7228" title="Set the name and marks this stat to print at the end of simulation.">name</a>(<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() + <span class="stringliteral">&quot;.ipc_total&quot;</span>)
<a name="l00720"></a>00720         .desc(<span class="stringliteral">&quot;IPC: Total IPC of All Threads&quot;</span>)
<a name="l00721"></a>00721         .precision(6);
<a name="l00722"></a>00722         <a class="code" href="classInOrderCPU.html#ac9d7f57fe0a1468adceea8cd3ab8129e" title="Stat for the total IPC.">totalIpc</a> =  <a class="code" href="classInOrderCPU.html#a17b41e39c6eb146b3126911bf78cea5c" title="Stat for the total number of committed instructions.">totalCommittedInsts</a> / <a class="code" href="classBaseCPU.html#a205aff3cc2e726632f492ccd4f45d3ca">numCycles</a>;
<a name="l00723"></a>00723 
<a name="l00724"></a>00724     <a class="code" href="classInOrderCPU.html#ab9a0cabbafb7e265ec978fee29b991da" title="Registers statistics.">BaseCPU::regStats</a>();
<a name="l00725"></a>00725 }
<a name="l00726"></a>00726 
<a name="l00727"></a>00727 
<a name="l00728"></a>00728 <span class="keywordtype">void</span>
<a name="l00729"></a><a class="code" href="classInOrderCPU.html#acbe2e6646947e739582a2b301ab9faf0">00729</a> <a class="code" href="classInOrderCPU.html#acbe2e6646947e739582a2b301ab9faf0" title="Ticks CPU, calling tick() on each stage, and checking the overall activity to see if the CPU should d...">InOrderCPU::tick</a>()
<a name="l00730"></a>00730 {
<a name="l00731"></a>00731     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;\n\nInOrderCPU: Ticking main, InOrderCPU.\n&quot;</span>);
<a name="l00732"></a>00732 
<a name="l00733"></a>00733     ++<a class="code" href="classBaseCPU.html#a205aff3cc2e726632f492ccd4f45d3ca">numCycles</a>;
<a name="l00734"></a>00734 
<a name="l00735"></a>00735     <a class="code" href="classInOrderCPU.html#aac31413a1ed94b1a31afa4dd75307a0b">checkForInterrupts</a>();
<a name="l00736"></a>00736 
<a name="l00737"></a>00737     <span class="keywordtype">bool</span> pipes_idle = <span class="keyword">true</span>;
<a name="l00738"></a>00738     <span class="comment">//Tick each of the stages</span>
<a name="l00739"></a>00739     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stNum=NumStages - 1; stNum &gt;= 0 ; stNum--) {
<a name="l00740"></a>00740         <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stNum]-&gt;<a class="code" href="classPipelineStage.html#ae23493f1933e7b3fe1531915775426e7" title="Ticks stage, processing all input signals and executing as many instructions as possible.">tick</a>();
<a name="l00741"></a>00741 
<a name="l00742"></a>00742         pipes_idle = pipes_idle &amp;&amp; <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stNum]-&gt;<a class="code" href="classPipelineStage.html#a13eb5e7e08a374e47cc45ea5844617ff">idle</a>;
<a name="l00743"></a>00743     }
<a name="l00744"></a>00744 
<a name="l00745"></a>00745     <span class="keywordflow">if</span> (pipes_idle)
<a name="l00746"></a>00746         <a class="code" href="classInOrderCPU.html#ae1467169175524e340a416a903e2d899" title="Stat for total number of cycles the CPU spends descheduled or no stages active.">idleCycles</a>++;
<a name="l00747"></a>00747     <span class="keywordflow">else</span>
<a name="l00748"></a>00748         <a class="code" href="classInOrderCPU.html#a9661471728f9a86d663046d4d0259c73" title="Stat for total number of cycles the CPU is active.">runCycles</a>++;
<a name="l00749"></a>00749     
<a name="l00750"></a>00750     <span class="comment">// Now advance the time buffers one tick</span>
<a name="l00751"></a>00751     <a class="code" href="classInOrderCPU.html#ae827e7ceb3a768f21e08a34d89b12712" title="Global communication structure.">timeBuffer</a>.<a class="code" href="classTimeBuffer.html#a21de34de6f57e99a2f78a5160fb6e3e0">advance</a>();
<a name="l00752"></a>00752     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> sqNum=0; sqNum &lt; NumStages - 1; sqNum++) {
<a name="l00753"></a>00753         <a class="code" href="classInOrderCPU.html#a590ac86c992c72ca6f287221c144f895" title="Communication structure that sits in between pipeline stages.">stageQueue</a>[sqNum]-&gt;<a class="code" href="classTimeBuffer.html#a21de34de6f57e99a2f78a5160fb6e3e0">advance</a>();
<a name="l00754"></a>00754     }
<a name="l00755"></a>00755     <a class="code" href="classInOrderCPU.html#a73f78983745b757743951ab2ffe945b5" title="The activity recorder; used to tell if the CPU has any activity remaining or if it can go to idle and...">activityRec</a>.<a class="code" href="classActivityRecorder.html#ab051abcb3f284fe59d0d5d63dd7e47bf" title="Advances the activity buffer, decrementing the activityCount if active communication just left the ti...">advance</a>();
<a name="l00756"></a>00756    
<a name="l00757"></a>00757     <span class="comment">// Any squashed events, or insts then remove them now</span>
<a name="l00758"></a>00758     <a class="code" href="classInOrderCPU.html#a35745c37d4d9d4a9fd220fb37dcd36a5" title="Cleans up all events on the CPU event remove list.">cleanUpRemovedEvents</a>();
<a name="l00759"></a>00759     <a class="code" href="classInOrderCPU.html#acc457d97742eb9777cde82fb844475d9" title="Cleans up all instructions on the instruction remove list.">cleanUpRemovedInsts</a>();
<a name="l00760"></a>00760 
<a name="l00761"></a>00761     <span class="comment">// Re-schedule CPU for this cycle</span>
<a name="l00762"></a>00762     <span class="keywordflow">if</span> (!<a class="code" href="classInOrderCPU.html#ac65e706c78081100af986b30274f6eb1" title="The tick event used for scheduling CPU ticks.">tickEvent</a>.<a class="code" href="classEvent.html#a36bdc2ee73215ed7670a7bfc0f25ab8b" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l00763"></a>00763         <span class="keywordflow">if</span> (<a class="code" href="classInOrderCPU.html#abdfe006587f18258188c043d20190cce" title="Overall CPU status.">_status</a> == <a class="code" href="classInOrderCPU.html#a894abae94956c9f162f778a5964fd418a73c9b15ef5d065cfa659cd8e128facf0">SwitchedOut</a>) {
<a name="l00764"></a>00764             <span class="comment">// increment stat</span>
<a name="l00765"></a>00765             <a class="code" href="classInOrderCPU.html#ae1f2ea9a1ebfb0935f4fd476acba2173" title="The cycle that the CPU was last running, used for statistics.">lastRunningCycle</a> = <a class="code" href="classClockedObject.html#a2b4a36a0ae697fe2c7c1c493146d7626" title="Determine the current cycle, corresponding to a tick aligned to a clock edge.">curCycle</a>();
<a name="l00766"></a>00766         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classInOrderCPU.html#a73f78983745b757743951ab2ffe945b5" title="The activity recorder; used to tell if the CPU has any activity remaining or if it can go to idle and...">activityRec</a>.<a class="code" href="classActivityRecorder.html#a15680655b8e19e88b2e2bf1c4416448e" title="Returns if the CPU should be active.">active</a>()) {
<a name="l00767"></a>00767             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;sleeping CPU.\n&quot;</span>);
<a name="l00768"></a>00768             <a class="code" href="classInOrderCPU.html#ae1f2ea9a1ebfb0935f4fd476acba2173" title="The cycle that the CPU was last running, used for statistics.">lastRunningCycle</a> = <a class="code" href="classClockedObject.html#a2b4a36a0ae697fe2c7c1c493146d7626" title="Determine the current cycle, corresponding to a tick aligned to a clock edge.">curCycle</a>();
<a name="l00769"></a>00769             <a class="code" href="classInOrderCPU.html#a11888a9f8c1bc8d01480e8a77a7bcab7" title="Stat for total number of times the CPU is descheduled.">timesIdled</a>++;
<a name="l00770"></a>00770         } <span class="keywordflow">else</span> {
<a name="l00771"></a>00771             <span class="comment">//Tick next_tick = curTick() + cycles(1);</span>
<a name="l00772"></a>00772             <span class="comment">//tickEvent.schedule(next_tick);</span>
<a name="l00773"></a>00773             <a class="code" href="classEventManager.html#a749a10828b2dd5017a2582960d04e400">schedule</a>(&amp;<a class="code" href="classInOrderCPU.html#ac65e706c78081100af986b30274f6eb1" title="The tick event used for scheduling CPU ticks.">tickEvent</a>, <a class="code" href="classClockedObject.html#a7c1f64c925f158530be84323a503dbb7" title="Determine the tick when a cycle begins, by default the current one, but the argument also enables the...">clockEdge</a>(<a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a>(1)));
<a name="l00774"></a>00774             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Scheduled CPU for next tick @ %i.\n&quot;</span>, 
<a name="l00775"></a>00775                     <a class="code" href="classClockedObject.html#a7c1f64c925f158530be84323a503dbb7" title="Determine the tick when a cycle begins, by default the current one, but the argument also enables the...">clockEdge</a>(<a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a>(1)));
<a name="l00776"></a>00776         }
<a name="l00777"></a>00777     }
<a name="l00778"></a>00778 
<a name="l00779"></a>00779     <a class="code" href="classInOrderCPU.html#aadea303cd5f0cee39ed1fff40c271238" title="Update Thread , used for statistic purposes.">tickThreadStats</a>();
<a name="l00780"></a>00780     <a class="code" href="classInOrderCPU.html#a0c40696bb7905268a2377f4c5b1fba4f" title="Update The Order In Which We Process Threads.">updateThreadPriority</a>();
<a name="l00781"></a>00781 }
<a name="l00782"></a>00782 
<a name="l00783"></a>00783 
<a name="l00784"></a>00784 <span class="keywordtype">void</span>
<a name="l00785"></a><a class="code" href="classInOrderCPU.html#a73e953203ccc65c2893d0fe14e7d5753">00785</a> <a class="code" href="classInOrderCPU.html#a73e953203ccc65c2893d0fe14e7d5753" title="Initialize the CPU.">InOrderCPU::init</a>()
<a name="l00786"></a>00786 {
<a name="l00787"></a>00787     <a class="code" href="classInOrderCPU.html#a73e953203ccc65c2893d0fe14e7d5753" title="Initialize the CPU.">BaseCPU::init</a>();
<a name="l00788"></a>00788 
<a name="l00789"></a>00789     <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid = 0; tid &lt; numThreads; ++tid) {
<a name="l00790"></a>00790         <span class="comment">// Set noSquashFromTC so that the CPU doesn&#39;t squash when initially</span>
<a name="l00791"></a>00791         <span class="comment">// setting up registers.</span>
<a name="l00792"></a>00792         <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;noSquashFromTC = <span class="keyword">true</span>;
<a name="l00793"></a>00793         <span class="comment">// Initialise the ThreadContext&#39;s memory proxies</span>
<a name="l00794"></a>00794         <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;initMemProxies(<a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;getTC());
<a name="l00795"></a>00795     }
<a name="l00796"></a>00796 
<a name="l00797"></a>00797     <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370" title="The FullSystem variable can be used to determine the current mode of simulation.">FullSystem</a> &amp;&amp; !<a class="code" href="classBaseCPU.html#a8e895dfbcaacea5e84e7e5dbfcead414">params</a>()-&gt;switched_out) {
<a name="l00798"></a>00798         <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid = 0; tid &lt; numThreads; tid++) {
<a name="l00799"></a>00799             <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *src_tc = <a class="code" href="classBaseCPU.html#a22178d56f16f4d27c17453771f334a88">threadContexts</a>[tid];
<a name="l00800"></a>00800             <a class="code" href="namespaceAlphaISA.html#a06411429ba06d7939a3aedc9099788eb">TheISA::initCPU</a>(src_tc, src_tc-&gt;<a class="code" href="classThreadContext.html#a516a77735ff104335e299bf628b87614">contextId</a>());
<a name="l00801"></a>00801         }
<a name="l00802"></a>00802     }
<a name="l00803"></a>00803 
<a name="l00804"></a>00804     <span class="comment">// Clear noSquashFromTC.</span>
<a name="l00805"></a>00805     <span class="keywordflow">for</span> (<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid = 0; tid &lt; numThreads; ++tid)
<a name="l00806"></a>00806         <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;noSquashFromTC = <span class="keyword">false</span>;
<a name="l00807"></a>00807 
<a name="l00808"></a>00808     <span class="comment">// Call Initializiation Routine for Resource Pool</span>
<a name="l00809"></a>00809     <a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#aba9c6c07d81394349978cb3ef3ae72cf">init</a>();
<a name="l00810"></a>00810 }
<a name="l00811"></a>00811 
<a name="l00812"></a>00812 <span class="keywordtype">void</span>
<a name="l00813"></a><a class="code" href="classInOrderCPU.html#aae9d8c5ee6c59940d25872a60c7b2d71">00813</a> <a class="code" href="classInOrderCPU.html#aae9d8c5ee6c59940d25872a60c7b2d71" title="Verify that the system is in a memory mode supported by the CPU.">InOrderCPU::verifyMemoryMode</a>()<span class="keyword"> const</span>
<a name="l00814"></a>00814 <span class="keyword"></span>{
<a name="l00815"></a>00815     <span class="keywordflow">if</span> (!<a class="code" href="classInOrderCPU.html#ad7994af60a87b663866f1b48ed8b7744" title="Pointer to the system.">system</a>-&gt;<a class="code" href="classSystem.html#a38e4aae7c6118a9a03c2a2b1b83d56fd" title="Is the system in timing mode?">isTimingMode</a>()) {
<a name="l00816"></a>00816         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;The in-order CPU requires the memory system to be in &quot;</span>
<a name="l00817"></a>00817               <span class="stringliteral">&quot;&#39;timing&#39; mode.\n&quot;</span>);
<a name="l00818"></a>00818     }
<a name="l00819"></a>00819 }
<a name="l00820"></a>00820 
<a name="l00821"></a>00821 <a class="code" href="classRefCountingPtr.html">Fault</a>
<a name="l00822"></a><a class="code" href="classInOrderCPU.html#a1a368806b237012f99d27e6b0d39be35">00822</a> <a class="code" href="classInOrderCPU.html#a1a368806b237012f99d27e6b0d39be35" title="HW return from error interrupt.">InOrderCPU::hwrei</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l00823"></a>00823 {
<a name="l00824"></a>00824 <span class="preprocessor">#if THE_ISA == ALPHA_ISA</span>
<a name="l00825"></a>00825 <span class="preprocessor"></span>    <span class="comment">// Need to clear the lock flag upon returning from an interrupt.</span>
<a name="l00826"></a>00826     <a class="code" href="classInOrderCPU.html#a84e343c93a28505ca5a53511b98921c7" title="Sets a miscellaneous register.">setMiscRegNoEffect</a>(<a class="code" href="namespaceAlphaISA.html#ad058b0990dcb8ed4d0b373396689fa12a940bae0a50c859bc5c9d21c3ed7f5b93">AlphaISA::MISCREG_LOCKFLAG</a>, <span class="keyword">false</span>, tid);
<a name="l00827"></a>00827 
<a name="l00828"></a>00828     <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;kernelStats-&gt;hwrei();
<a name="l00829"></a>00829     <span class="comment">// FIXME: XXX check for interrupts? XXX</span>
<a name="l00830"></a>00830 <span class="preprocessor">#endif</span>
<a name="l00831"></a>00831 <span class="preprocessor"></span>    
<a name="l00832"></a>00832     <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00833"></a>00833 }
<a name="l00834"></a>00834 
<a name="l00835"></a>00835 
<a name="l00836"></a>00836 <span class="keywordtype">bool</span>
<a name="l00837"></a><a class="code" href="classInOrderCPU.html#a213481aa646369e2fae1c3be2e2e5c69">00837</a> <a class="code" href="classInOrderCPU.html#a213481aa646369e2fae1c3be2e2e5c69">InOrderCPU::simPalCheck</a>(<span class="keywordtype">int</span> palFunc, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l00838"></a>00838 {
<a name="l00839"></a>00839 <span class="preprocessor">#if THE_ISA == ALPHA_ISA</span>
<a name="l00840"></a>00840 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;kernelStats)
<a name="l00841"></a>00841         this-&gt;<a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;kernelStats-&gt;callpal(palFunc,
<a name="l00842"></a>00842                                                 this-&gt;<a class="code" href="classBaseCPU.html#a22178d56f16f4d27c17453771f334a88">threadContexts</a>[tid]);
<a name="l00843"></a>00843 
<a name="l00844"></a>00844     <span class="keywordflow">switch</span> (palFunc) {
<a name="l00845"></a>00845       <span class="keywordflow">case</span> <a class="code" href="structPAL.html#a75c7804969c9d1fc78d7c6aacba69229a4d896272332993371821963de39f0ace">PAL::halt</a>:
<a name="l00846"></a>00846         <a class="code" href="classInOrderCPU.html#ae74ac4610fd76bb4ce3cabc010a7dc04" title="Halts the CPU.">halt</a>();
<a name="l00847"></a>00847         <span class="keywordflow">if</span> (--<a class="code" href="classSystem.html#a0d814a857f76583f73a674d04845cc8c">System::numSystemsRunning</a> == 0)
<a name="l00848"></a>00848             <a class="code" href="sim__events_8cc.html#a2330e58468e17d2e9fa855206aaa27fc" title="Schedule an event to exit the simulation loop (returning to Python) at the end of the current cycle (...">exitSimLoop</a>(<span class="stringliteral">&quot;all cpus halted&quot;</span>);
<a name="l00849"></a>00849         <span class="keywordflow">break</span>;
<a name="l00850"></a>00850 
<a name="l00851"></a>00851       <span class="keywordflow">case</span> <a class="code" href="structPAL.html#a75c7804969c9d1fc78d7c6aacba69229a3144aed144246c202c2f16d9d8455e1e">PAL::bpt</a>:
<a name="l00852"></a>00852       <span class="keywordflow">case</span> <a class="code" href="structPAL.html#a75c7804969c9d1fc78d7c6aacba69229a3db3627b952725c211dfcd4222ac753b">PAL::bugchk</a>:
<a name="l00853"></a>00853         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classInOrderCPU.html#ad7994af60a87b663866f1b48ed8b7744" title="Pointer to the system.">system</a>-&gt;<a class="code" href="classSystem.html#afff94daf64caf114b7b43707ff80843a">breakpoint</a>())
<a name="l00854"></a>00854             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00855"></a>00855         <span class="keywordflow">break</span>;
<a name="l00856"></a>00856     }
<a name="l00857"></a>00857 <span class="preprocessor">#endif</span>
<a name="l00858"></a>00858 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00859"></a>00859 }
<a name="l00860"></a>00860 
<a name="l00861"></a>00861 <span class="keywordtype">void</span>
<a name="l00862"></a><a class="code" href="classInOrderCPU.html#aac31413a1ed94b1a31afa4dd75307a0b">00862</a> <a class="code" href="classInOrderCPU.html#aac31413a1ed94b1a31afa4dd75307a0b">InOrderCPU::checkForInterrupts</a>()
<a name="l00863"></a>00863 {
<a name="l00864"></a>00864     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="classInOrderCPU.html#a4d58008c24b336fffd3837b7bdc2cd1c">i</a> = 0; <a class="code" href="classInOrderCPU.html#a4d58008c24b336fffd3837b7bdc2cd1c">i</a> &lt; <a class="code" href="classBaseCPU.html#a22178d56f16f4d27c17453771f334a88">threadContexts</a>.size(); <a class="code" href="classInOrderCPU.html#a4d58008c24b336fffd3837b7bdc2cd1c">i</a>++) {
<a name="l00865"></a>00865         <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc = <a class="code" href="classBaseCPU.html#a22178d56f16f4d27c17453771f334a88">threadContexts</a>[<a class="code" href="classInOrderCPU.html#a4d58008c24b336fffd3837b7bdc2cd1c">i</a>];
<a name="l00866"></a>00866 
<a name="l00867"></a>00867         <span class="keywordflow">if</span> (<a class="code" href="classBaseCPU.html#a28c30d48c15c3096813e4941f90226d7">interrupts</a>-&gt;checkInterrupts(tc)) {
<a name="l00868"></a>00868             <a class="code" href="classRefCountingPtr.html">Fault</a> interrupt = <a class="code" href="classBaseCPU.html#a28c30d48c15c3096813e4941f90226d7">interrupts</a>-&gt;getInterrupt(tc);
<a name="l00869"></a>00869 
<a name="l00870"></a>00870             <span class="keywordflow">if</span> (interrupt != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l00871"></a>00871                 <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Interrupt, <span class="stringliteral">&quot;Processing Intterupt for [tid:%i].\n&quot;</span>,
<a name="l00872"></a>00872                         tc-&gt;<a class="code" href="classThreadContext.html#a8e594e2269df0830027d05db0d322c6d">threadId</a>());
<a name="l00873"></a>00873 
<a name="l00874"></a>00874                 <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid = tc-&gt;<a class="code" href="classThreadContext.html#a8e594e2269df0830027d05db0d322c6d">threadId</a>();
<a name="l00875"></a>00875                 <a class="code" href="classBaseCPU.html#a28c30d48c15c3096813e4941f90226d7">interrupts</a>-&gt;updateIntrInfo(tc);
<a name="l00876"></a>00876 
<a name="l00877"></a>00877                 <span class="comment">// Squash from Last Stage in Pipeline</span>
<a name="l00878"></a>00878                 <span class="keywordtype">unsigned</span> last_stage = NumStages - 1;
<a name="l00879"></a>00879                 <a class="code" href="classInOrderCPU.html#ab409072422b2ed614b0411ec36b409e2">dummyTrapInst</a>[tid]-&gt;squashingStage = last_stage;
<a name="l00880"></a>00880                 <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[last_stage]-&gt;<a class="code" href="classPipelineStage.html#adece917894bcf753e9228630e3edbdac" title="Setup Squashing Information to be passed back thru the pipeline.">setupSquash</a>(<a class="code" href="classInOrderCPU.html#ab409072422b2ed614b0411ec36b409e2">dummyTrapInst</a>[tid],
<a name="l00881"></a>00881                                                        tid);
<a name="l00882"></a>00882 
<a name="l00883"></a>00883                 <span class="comment">// By default, setupSquash will always squash from stage + 1</span>
<a name="l00884"></a>00884                 <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[<a class="code" href="namespaceThePipeline.html#ae1f7d925b86908d6ba944281b205a63b">BackEndStartStage</a> - 1]-&gt;<a class="code" href="classPipelineStage.html#adece917894bcf753e9228630e3edbdac" title="Setup Squashing Information to be passed back thru the pipeline.">setupSquash</a>(<a class="code" href="classInOrderCPU.html#ab409072422b2ed614b0411ec36b409e2">dummyTrapInst</a>[tid],
<a name="l00885"></a>00885                                                                   tid);
<a name="l00886"></a>00886 
<a name="l00887"></a>00887                 <span class="comment">// Schedule Squash Through-out Resource Pool</span>
<a name="l00888"></a>00888                 <a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#ab0672dc7bdf60067ba56beac051b4220" title="Schedule resource event, regardless of its current state.">scheduleEvent</a>(
<a name="l00889"></a>00889                     (<a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76">InOrderCPU::CPUEventType</a>)<a class="code" href="classResourcePool.html#a5fa07daaf9d44a85a42900fb05620c57a864047727a8999a9baeb7f5a9182242e">ResourcePool::SquashAll</a>,
<a name="l00890"></a>00890                     <a class="code" href="classInOrderCPU.html#ab409072422b2ed614b0411ec36b409e2">dummyTrapInst</a>[tid], <a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a>(0));
<a name="l00891"></a>00891 
<a name="l00892"></a>00892                 <span class="comment">// Finally, Setup Trap to happen at end of cycle</span>
<a name="l00893"></a>00893                 <a class="code" href="classInOrderCPU.html#a05f979f036b4dbbb564f3045f46650f4" title="Schedule a trap on the CPU.">trapContext</a>(interrupt, tid, <a class="code" href="classInOrderCPU.html#ab409072422b2ed614b0411ec36b409e2">dummyTrapInst</a>[tid]);
<a name="l00894"></a>00894             }
<a name="l00895"></a>00895         }
<a name="l00896"></a>00896     }
<a name="l00897"></a>00897 }
<a name="l00898"></a>00898 
<a name="l00899"></a>00899 <a class="code" href="classRefCountingPtr.html">Fault</a>
<a name="l00900"></a><a class="code" href="classInOrderCPU.html#a3c5c41a4df410c884c0d4b5e72a75b49">00900</a> <a class="code" href="classInOrderCPU.html#a3c5c41a4df410c884c0d4b5e72a75b49" title="Returns the Fault for any valid interrupt.">InOrderCPU::getInterrupts</a>()
<a name="l00901"></a>00901 {
<a name="l00902"></a>00902     <span class="comment">// Check if there are any outstanding interrupts</span>
<a name="l00903"></a>00903     <span class="keywordflow">return</span> <a class="code" href="classBaseCPU.html#a28c30d48c15c3096813e4941f90226d7">interrupts</a>-&gt;getInterrupt(<a class="code" href="classBaseCPU.html#a22178d56f16f4d27c17453771f334a88">threadContexts</a>[0]);
<a name="l00904"></a>00904 }
<a name="l00905"></a>00905 
<a name="l00906"></a>00906 <span class="keywordtype">void</span>
<a name="l00907"></a><a class="code" href="classInOrderCPU.html#ac0cd080face33f8b4bad39260f909267">00907</a> <a class="code" href="classInOrderCPU.html#ac0cd080face33f8b4bad39260f909267" title="Processes any an interrupt fault.">InOrderCPU::processInterrupts</a>(<a class="code" href="classRefCountingPtr.html">Fault</a> interrupt)
<a name="l00908"></a>00908 {
<a name="l00909"></a>00909     <span class="comment">// Check for interrupts here.  For now can copy the code that</span>
<a name="l00910"></a>00910     <span class="comment">// exists within isa_fullsys_traits.hh.  Also assume that thread 0</span>
<a name="l00911"></a>00911     <span class="comment">// is the one that handles the interrupts.</span>
<a name="l00912"></a>00912     <span class="comment">// @todo: Possibly consolidate the interrupt checking code.</span>
<a name="l00913"></a>00913     <span class="comment">// @todo: Allow other threads to handle interrupts.</span>
<a name="l00914"></a>00914 
<a name="l00915"></a>00915     assert(interrupt != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>);
<a name="l00916"></a>00916     <a class="code" href="classBaseCPU.html#a28c30d48c15c3096813e4941f90226d7">interrupts</a>-&gt;updateIntrInfo(<a class="code" href="classBaseCPU.html#a22178d56f16f4d27c17453771f334a88">threadContexts</a>[0]);
<a name="l00917"></a>00917 
<a name="l00918"></a>00918     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Interrupt %s being handled\n&quot;</span>, interrupt-&gt;name());
<a name="l00919"></a>00919 
<a name="l00920"></a>00920     <span class="comment">// Note: Context ID ok here? Impl. of FS mode needs to revisit this</span>
<a name="l00921"></a>00921     <a class="code" href="classInOrderCPU.html#a501137b42b356a6a5edeb46e9b754f1b" title="Perform trap to Handle Given Fault.">trap</a>(interrupt, <a class="code" href="classBaseCPU.html#a22178d56f16f4d27c17453771f334a88">threadContexts</a>[0]-&gt;<a class="code" href="classInOrderCPU.html#a09442af01a4d3ec95ff4c2c981f6726d">contextId</a>(), <a class="code" href="classInOrderCPU.html#a020560f1463e2bb474adca563911beca">dummyBufferInst</a>);
<a name="l00922"></a>00922 }
<a name="l00923"></a>00923 
<a name="l00924"></a>00924 <span class="keywordtype">void</span>
<a name="l00925"></a><a class="code" href="classInOrderCPU.html#a05f979f036b4dbbb564f3045f46650f4">00925</a> <a class="code" href="classInOrderCPU.html#a05f979f036b4dbbb564f3045f46650f4" title="Schedule a trap on the CPU.">InOrderCPU::trapContext</a>(<a class="code" href="classRefCountingPtr.html">Fault</a> fault, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid, <a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst,
<a name="l00926"></a>00926                         <a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a> delay)
<a name="l00927"></a>00927 {
<a name="l00928"></a>00928     <a class="code" href="classInOrderCPU.html#a206bf529521880857c2c1d5ae6e4db3c" title="Schedule a CPU Event.">scheduleCpuEvent</a>(<a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76a3cb6c7f8efe02671d483234610ec3740">Trap</a>, fault, tid, inst, delay);
<a name="l00929"></a>00929     <a class="code" href="classInOrderCPU.html#aed7228e307be5a47640e6ce25dc2f649">trapPending</a>[tid] = <span class="keyword">true</span>;
<a name="l00930"></a>00930 }
<a name="l00931"></a>00931 
<a name="l00932"></a>00932 <span class="keywordtype">void</span>
<a name="l00933"></a><a class="code" href="classInOrderCPU.html#a501137b42b356a6a5edeb46e9b754f1b">00933</a> <a class="code" href="classInOrderCPU.html#a501137b42b356a6a5edeb46e9b754f1b" title="Perform trap to Handle Given Fault.">InOrderCPU::trap</a>(<a class="code" href="classRefCountingPtr.html">Fault</a> fault, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid, <a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst)
<a name="l00934"></a>00934 {
<a name="l00935"></a>00935     fault-&gt;invoke(<a class="code" href="classInOrderCPU.html#ac749a703dd78256850e871e628b07075" title="Returns a pointer to a thread context.">tcBase</a>(tid), inst-&gt;staticInst);
<a name="l00936"></a>00936     <a class="code" href="classInOrderCPU.html#ad36c1f222724450235050cf04760ae01">removePipelineStalls</a>(tid);
<a name="l00937"></a>00937 }
<a name="l00938"></a>00938 
<a name="l00939"></a>00939 <span class="keywordtype">void</span> 
<a name="l00940"></a><a class="code" href="classInOrderCPU.html#a16879814c03ec009ab7b836e61b3bd80">00940</a> <a class="code" href="classInOrderCPU.html#a16879814c03ec009ab7b836e61b3bd80" title="squashFromMemStall() - sets up a squash event squashDueToMemStall() - squashes pipeline">InOrderCPU::squashFromMemStall</a>(<a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid,
<a name="l00941"></a>00941                                <a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a> delay)
<a name="l00942"></a>00942 {
<a name="l00943"></a>00943     <a class="code" href="classInOrderCPU.html#a206bf529521880857c2c1d5ae6e4db3c" title="Schedule a CPU Event.">scheduleCpuEvent</a>(<a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76a61515977f8181df20244d22a7335deee">SquashFromMemStall</a>, <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>, tid, inst, delay);
<a name="l00944"></a>00944 }
<a name="l00945"></a>00945 
<a name="l00946"></a>00946 
<a name="l00947"></a>00947 <span class="keywordtype">void</span>
<a name="l00948"></a><a class="code" href="classInOrderCPU.html#a6d3d05ec06949189533ebc55081ffb92">00948</a> <a class="code" href="classInOrderCPU.html#a6d3d05ec06949189533ebc55081ffb92">InOrderCPU::squashDueToMemStall</a>(<span class="keywordtype">int</span> stage_num, <a class="code" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> seq_num,
<a name="l00949"></a>00949                                 <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l00950"></a>00950 {
<a name="l00951"></a>00951     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Squashing Pipeline Stages Due to Memory Stall...\n&quot;</span>);
<a name="l00952"></a>00952         
<a name="l00953"></a>00953     <span class="comment">// Squash all instructions in each stage including </span>
<a name="l00954"></a>00954     <span class="comment">// instruction that caused the squash (seq_num - 1)</span>
<a name="l00955"></a>00955     <span class="comment">// NOTE: The stage bandwidth needs to be cleared so thats why</span>
<a name="l00956"></a>00956     <span class="comment">//       the stalling instruction is squashed as well. The stalled</span>
<a name="l00957"></a>00957     <span class="comment">//       instruction is previously placed in another intermediate buffer</span>
<a name="l00958"></a>00958     <span class="comment">//       while it&#39;s stall is being handled.</span>
<a name="l00959"></a>00959     <a class="code" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> squash_seq_num = seq_num - 1;
<a name="l00960"></a>00960     
<a name="l00961"></a>00961     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stNum=stage_num; stNum &gt;= 0 ; stNum--) {
<a name="l00962"></a>00962         <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stNum]-&gt;<a class="code" href="classPipelineStage.html#abf4ea44a82d942921d3d9ceaed2a00e5">squashDueToMemStall</a>(squash_seq_num, tid);
<a name="l00963"></a>00963     }
<a name="l00964"></a>00964 }
<a name="l00965"></a>00965 
<a name="l00966"></a>00966 <span class="keywordtype">void</span>
<a name="l00967"></a><a class="code" href="classInOrderCPU.html#a206bf529521880857c2c1d5ae6e4db3c">00967</a> <a class="code" href="classInOrderCPU.html#a206bf529521880857c2c1d5ae6e4db3c" title="Schedule a CPU Event.">InOrderCPU::scheduleCpuEvent</a>(<a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76">CPUEventType</a> c_event, <a class="code" href="classRefCountingPtr.html">Fault</a> fault,
<a name="l00968"></a>00968                              <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid, <a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst, 
<a name="l00969"></a>00969                              <a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a> delay, <a class="code" href="classInOrderCPU.html#af38ac311cde1a68889c87d9067f5b06f">CPUEventPri</a> event_pri)
<a name="l00970"></a>00970 {
<a name="l00971"></a>00971     <a class="code" href="classInOrderCPU_1_1CPUEvent.html" title="Define CPU Event.">CPUEvent</a> *cpu_event = <span class="keyword">new</span> <a class="code" href="classInOrderCPU_1_1CPUEvent.html" title="Define CPU Event.">CPUEvent</a>(<span class="keyword">this</span>, c_event, fault, tid, inst,
<a name="l00972"></a>00972                                        event_pri);
<a name="l00973"></a>00973 
<a name="l00974"></a>00974     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> sked_tick = <a class="code" href="classClockedObject.html#a7c1f64c925f158530be84323a503dbb7" title="Determine the tick when a cycle begins, by default the current one, but the argument also enables the...">clockEdge</a>(delay);
<a name="l00975"></a>00975     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Scheduling CPU Event (%s) for cycle %i, [tid:%i].\n&quot;</span>,
<a name="l00976"></a>00976             <a class="code" href="classInOrderCPU.html#a3fbe4650c953138164078b58652676e1">eventNames</a>[c_event], <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The current simulated tick.">curTick</a>() + delay, tid);
<a name="l00977"></a>00977     <a class="code" href="classEventManager.html#a749a10828b2dd5017a2582960d04e400">schedule</a>(cpu_event, sked_tick);
<a name="l00978"></a>00978 
<a name="l00979"></a>00979     <span class="comment">// Broadcast event to the Resource Pool</span>
<a name="l00980"></a>00980     <span class="comment">// Need to reset tid just in case this is a dummy instruction</span>
<a name="l00981"></a>00981     inst-&gt;setTid(tid);        
<a name="l00982"></a>00982     <span class="comment">// @todo: Is this really right? Should the delay not be passed on?</span>
<a name="l00983"></a>00983     <a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#ab0672dc7bdf60067ba56beac051b4220" title="Schedule resource event, regardless of its current state.">scheduleEvent</a>(c_event, inst, <a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a>(0), 0, tid);
<a name="l00984"></a>00984 }
<a name="l00985"></a>00985 
<a name="l00986"></a>00986 <span class="keywordtype">bool</span>
<a name="l00987"></a><a class="code" href="classInOrderCPU.html#a30101ed1d25c11c1fc2e4bfe1d4bee9e">00987</a> <a class="code" href="classInOrderCPU.html#a30101ed1d25c11c1fc2e4bfe1d4bee9e" title="Thread Status Functions.">InOrderCPU::isThreadActive</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l00988"></a>00988 {
<a name="l00989"></a>00989   <a class="code" href="classstd_1_1list.html" title="STL list class.">list&lt;ThreadID&gt;::iterator</a> isActive =
<a name="l00990"></a>00990       <a class="code" href="classSimObject.html#a2d22556f4a5c932a267783fd33f4db79" title="Find the SimObject with the given name and return a pointer to it.">std::find</a>(<a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.begin(), <a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.end(), tid);
<a name="l00991"></a>00991 
<a name="l00992"></a>00992     <span class="keywordflow">return</span> (isActive != <a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.end());
<a name="l00993"></a>00993 }
<a name="l00994"></a>00994 
<a name="l00995"></a>00995 <span class="keywordtype">bool</span>
<a name="l00996"></a><a class="code" href="classInOrderCPU.html#a663e94a083ca1a13e4dba01cbab7258c">00996</a> <a class="code" href="classInOrderCPU.html#a663e94a083ca1a13e4dba01cbab7258c">InOrderCPU::isThreadReady</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l00997"></a>00997 {
<a name="l00998"></a>00998   <a class="code" href="classstd_1_1list.html" title="STL list class.">list&lt;ThreadID&gt;::iterator</a> isReady =
<a name="l00999"></a>00999       <a class="code" href="classSimObject.html#a2d22556f4a5c932a267783fd33f4db79" title="Find the SimObject with the given name and return a pointer to it.">std::find</a>(<a class="code" href="classInOrderCPU.html#a968f1e16ff463845cd6da2a0d200738c" title="Ready Threads List.">readyThreads</a>.begin(), <a class="code" href="classInOrderCPU.html#a968f1e16ff463845cd6da2a0d200738c" title="Ready Threads List.">readyThreads</a>.end(), tid);
<a name="l01000"></a>01000 
<a name="l01001"></a>01001     <span class="keywordflow">return</span> (isReady != <a class="code" href="classInOrderCPU.html#a968f1e16ff463845cd6da2a0d200738c" title="Ready Threads List.">readyThreads</a>.end());
<a name="l01002"></a>01002 }
<a name="l01003"></a>01003 
<a name="l01004"></a>01004 <span class="keywordtype">bool</span>
<a name="l01005"></a><a class="code" href="classInOrderCPU.html#a1d38c0afd7ad7b7a56322a33117aea27">01005</a> <a class="code" href="classInOrderCPU.html#a1d38c0afd7ad7b7a56322a33117aea27">InOrderCPU::isThreadSuspended</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01006"></a>01006 {
<a name="l01007"></a>01007   <a class="code" href="classstd_1_1list.html" title="STL list class.">list&lt;ThreadID&gt;::iterator</a> isSuspended =
<a name="l01008"></a>01008       <a class="code" href="classSimObject.html#a2d22556f4a5c932a267783fd33f4db79" title="Find the SimObject with the given name and return a pointer to it.">std::find</a>(<a class="code" href="classInOrderCPU.html#a57e535a592aa44dac44247c523016b67" title="Suspended Threads List.">suspendedThreads</a>.begin(), <a class="code" href="classInOrderCPU.html#a57e535a592aa44dac44247c523016b67" title="Suspended Threads List.">suspendedThreads</a>.end(), tid);
<a name="l01009"></a>01009 
<a name="l01010"></a>01010     <span class="keywordflow">return</span> (isSuspended != <a class="code" href="classInOrderCPU.html#a57e535a592aa44dac44247c523016b67" title="Suspended Threads List.">suspendedThreads</a>.end());
<a name="l01011"></a>01011 }
<a name="l01012"></a>01012 
<a name="l01013"></a>01013 <span class="keywordtype">void</span>
<a name="l01014"></a><a class="code" href="classInOrderCPU.html#ab729240ce56c85f0c14020c44bc2de87">01014</a> <a class="code" href="classInOrderCPU.html#ab729240ce56c85f0c14020c44bc2de87" title="Add Thread From Ready List to Active Threads List.">InOrderCPU::activateNextReadyThread</a>()
<a name="l01015"></a>01015 {
<a name="l01016"></a>01016     <span class="keywordflow">if</span> (<a class="code" href="classInOrderCPU.html#a968f1e16ff463845cd6da2a0d200738c" title="Ready Threads List.">readyThreads</a>.size() &gt;= 1) {          
<a name="l01017"></a>01017         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> ready_tid = <a class="code" href="classInOrderCPU.html#a968f1e16ff463845cd6da2a0d200738c" title="Ready Threads List.">readyThreads</a>.front();
<a name="l01018"></a>01018         
<a name="l01019"></a>01019         <span class="comment">// Activate in Pipeline</span>
<a name="l01020"></a>01020         <a class="code" href="classInOrderCPU.html#ac207259de125dc941432f4eb1c9b18c2" title="Add Thread to Active Threads List.">activateThread</a>(ready_tid);                        
<a name="l01021"></a>01021         
<a name="l01022"></a>01022         <span class="comment">// Activate in Resource Pool</span>
<a name="l01023"></a>01023         <a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#a61d94c1e40bf65f8c3c2b35a11e56df1" title="Activate Thread in all resources.">activateThread</a>(ready_tid);
<a name="l01024"></a>01024         
<a name="l01025"></a>01025         <a class="code" href="classstd_1_1list.html" title="STL list class.">list&lt;ThreadID&gt;::iterator</a> ready_it =
<a name="l01026"></a>01026             <a class="code" href="classSimObject.html#a2d22556f4a5c932a267783fd33f4db79" title="Find the SimObject with the given name and return a pointer to it.">std::find</a>(<a class="code" href="classInOrderCPU.html#a968f1e16ff463845cd6da2a0d200738c" title="Ready Threads List.">readyThreads</a>.begin(), <a class="code" href="classInOrderCPU.html#a968f1e16ff463845cd6da2a0d200738c" title="Ready Threads List.">readyThreads</a>.end(), ready_tid);
<a name="l01027"></a>01027         <a class="code" href="classInOrderCPU.html#a968f1e16ff463845cd6da2a0d200738c" title="Ready Threads List.">readyThreads</a>.erase(ready_it);                        
<a name="l01028"></a>01028     } <span class="keywordflow">else</span> {
<a name="l01029"></a>01029         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>,
<a name="l01030"></a>01030                 <span class="stringliteral">&quot;Attempting to activate new thread, but No Ready Threads to&quot;</span>
<a name="l01031"></a>01031                 <span class="stringliteral">&quot;activate.\n&quot;</span>);
<a name="l01032"></a>01032         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>,
<a name="l01033"></a>01033                 <span class="stringliteral">&quot;Unable to switch to next active thread.\n&quot;</span>);
<a name="l01034"></a>01034     }        
<a name="l01035"></a>01035 }
<a name="l01036"></a>01036 
<a name="l01037"></a>01037 <span class="keywordtype">void</span>
<a name="l01038"></a><a class="code" href="classInOrderCPU.html#ac207259de125dc941432f4eb1c9b18c2">01038</a> <a class="code" href="classInOrderCPU.html#ac207259de125dc941432f4eb1c9b18c2" title="Add Thread to Active Threads List.">InOrderCPU::activateThread</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01039"></a>01039 {
<a name="l01040"></a>01040     <span class="keywordflow">if</span> (<a class="code" href="classInOrderCPU.html#a1d38c0afd7ad7b7a56322a33117aea27">isThreadSuspended</a>(tid)) {
<a name="l01041"></a>01041         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>,
<a name="l01042"></a>01042                 <span class="stringliteral">&quot;Removing [tid:%i] from suspended threads list.\n&quot;</span>, tid);
<a name="l01043"></a>01043 
<a name="l01044"></a>01044         <a class="code" href="classstd_1_1list.html" title="STL list class.">list&lt;ThreadID&gt;::iterator</a> susp_it =
<a name="l01045"></a>01045             <a class="code" href="classSimObject.html#a2d22556f4a5c932a267783fd33f4db79" title="Find the SimObject with the given name and return a pointer to it.">std::find</a>(<a class="code" href="classInOrderCPU.html#a57e535a592aa44dac44247c523016b67" title="Suspended Threads List.">suspendedThreads</a>.begin(), <a class="code" href="classInOrderCPU.html#a57e535a592aa44dac44247c523016b67" title="Suspended Threads List.">suspendedThreads</a>.end(), 
<a name="l01046"></a>01046                       tid);
<a name="l01047"></a>01047         <a class="code" href="classInOrderCPU.html#a57e535a592aa44dac44247c523016b67" title="Suspended Threads List.">suspendedThreads</a>.erase(susp_it);                        
<a name="l01048"></a>01048     }
<a name="l01049"></a>01049 
<a name="l01050"></a>01050     <span class="keywordflow">if</span> (<a class="code" href="classInOrderCPU.html#ad3dc1ef578d975494a1096f61753c19a">threadModel</a> == <a class="code" href="classInOrderCPU.html#ab1d289a2e829b22be393397bad515918ae1a6f0ecf00fbeeb96de3da59293b5c4">SwitchOnCacheMiss</a> &amp;&amp;
<a name="l01051"></a>01051         <a class="code" href="classInOrderCPU.html#ad12aed9638a409a9ddec579827993f13" title="Number of Active Threads in the CPU.">numActiveThreads</a>() == 1) {
<a name="l01052"></a>01052         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>,
<a name="l01053"></a>01053                 <span class="stringliteral">&quot;Ignoring activation of [tid:%i], since [tid:%i] is &quot;</span>
<a name="l01054"></a>01054                 <span class="stringliteral">&quot;already running.\n&quot;</span>, tid, <a class="code" href="classInOrderCPU.html#a125907a501d7413323291c807a2686a5" title="Thread id of active thread Only used for SwitchOnCacheMiss model.">activeThreadId</a>());
<a name="l01055"></a>01055         
<a name="l01056"></a>01056         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>,<span class="stringliteral">&quot;Placing [tid:%i] on ready threads list\n&quot;</span>, 
<a name="l01057"></a>01057                 tid);        
<a name="l01058"></a>01058 
<a name="l01059"></a>01059         <a class="code" href="classInOrderCPU.html#a968f1e16ff463845cd6da2a0d200738c" title="Ready Threads List.">readyThreads</a>.push_back(tid);
<a name="l01060"></a>01060         
<a name="l01061"></a>01061     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classInOrderCPU.html#a30101ed1d25c11c1fc2e4bfe1d4bee9e" title="Thread Status Functions.">isThreadActive</a>(tid)) {                
<a name="l01062"></a>01062         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>,
<a name="l01063"></a>01063                 <span class="stringliteral">&quot;Adding [tid:%i] to active threads list.\n&quot;</span>, tid);
<a name="l01064"></a>01064         <a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.push_back(tid);
<a name="l01065"></a>01065         
<a name="l01066"></a>01066         <a class="code" href="classInOrderCPU.html#a23cb1bfdbd2cbc3330f834a86443ddab" title="Activate Thread In Each Pipeline Stage.">activateThreadInPipeline</a>(tid);
<a name="l01067"></a>01067 
<a name="l01068"></a>01068         <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;lastActivate = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The current simulated tick.">curTick</a>();            
<a name="l01069"></a>01069 
<a name="l01070"></a>01070         <a class="code" href="classInOrderCPU.html#ac749a703dd78256850e871e628b07075" title="Returns a pointer to a thread context.">tcBase</a>(tid)-&gt;<a class="code" href="classThreadContext.html#a8219da21012da41fb8e3a6b4d746d55b">setStatus</a>(<a class="code" href="classThreadContext.html#a7b7149621d48abf9c88dd7ef28c3ede7af2b2df42c993156412afb11741fec94b" title="Running.">ThreadContext::Active</a>);    
<a name="l01071"></a>01071 
<a name="l01072"></a>01072         <a class="code" href="classInOrderCPU.html#a7db2d23c4bbbceac6bf250fe9af0b6ca" title="Wakes the CPU, rescheduling the CPU if it&amp;#39;s not already active.">wakeCPU</a>();
<a name="l01073"></a>01073 
<a name="l01074"></a>01074         <a class="code" href="classInOrderCPU.html#ac8e8d6311421fc98db6bfa0dc3ebe6d8">numCtxtSwitches</a>++;        
<a name="l01075"></a>01075     }
<a name="l01076"></a>01076 }
<a name="l01077"></a>01077 
<a name="l01078"></a>01078 <span class="keywordtype">void</span>
<a name="l01079"></a><a class="code" href="classInOrderCPU.html#a23cb1bfdbd2cbc3330f834a86443ddab">01079</a> <a class="code" href="classInOrderCPU.html#a23cb1bfdbd2cbc3330f834a86443ddab" title="Activate Thread In Each Pipeline Stage.">InOrderCPU::activateThreadInPipeline</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01080"></a>01080 {
<a name="l01081"></a>01081     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stNum=0; stNum &lt; NumStages; stNum++) {
<a name="l01082"></a>01082         <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stNum]-&gt;<a class="code" href="classPipelineStage.html#a11a1a23a2871e90b48cee6cad44ff3ab">activateThread</a>(tid);
<a name="l01083"></a>01083     }    
<a name="l01084"></a>01084 }
<a name="l01085"></a>01085 
<a name="l01086"></a>01086 <span class="keywordtype">void</span>
<a name="l01087"></a><a class="code" href="classInOrderCPU.html#a48709764f089572b49dc416e5d54ca85">01087</a> <a class="code" href="classInOrderCPU.html#a48709764f089572b49dc416e5d54ca85" title="Schedule a thread deactivation on the CPU.">InOrderCPU::deactivateContext</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid, <a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a> delay)
<a name="l01088"></a>01088 {
<a name="l01089"></a>01089     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>,<span class="stringliteral">&quot;[tid:%i]: Deactivating ...\n&quot;</span>, tid);
<a name="l01090"></a>01090 
<a name="l01091"></a>01091     <a class="code" href="classInOrderCPU.html#a206bf529521880857c2c1d5ae6e4db3c" title="Schedule a CPU Event.">scheduleCpuEvent</a>(<a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76ad8db38e0539305f7d681658891b55f1a">DeactivateThread</a>, <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>, tid, <a class="code" href="classInOrderCPU.html#a7d8fa4094cc4ac8dbb1e57ab9a958740" title="Instruction used to signify that there is no *real* instruction in buffer slot.">dummyInst</a>[tid], delay);
<a name="l01092"></a>01092 
<a name="l01093"></a>01093     <span class="comment">// Be sure to signal that there&#39;s some activity so the CPU doesn&#39;t</span>
<a name="l01094"></a>01094     <span class="comment">// deschedule itself.</span>
<a name="l01095"></a>01095     <a class="code" href="classInOrderCPU.html#a73f78983745b757743951ab2ffe945b5" title="The activity recorder; used to tell if the CPU has any activity remaining or if it can go to idle and...">activityRec</a>.<a class="code" href="classActivityRecorder.html#a020dc37917baa7ac21ed5d9d35e73071" title="Records that there is activity this cycle.">activity</a>();
<a name="l01096"></a>01096 
<a name="l01097"></a>01097     <a class="code" href="classInOrderCPU.html#abdfe006587f18258188c043d20190cce" title="Overall CPU status.">_status</a> = Running;
<a name="l01098"></a>01098 }
<a name="l01099"></a>01099 
<a name="l01100"></a>01100 <span class="keywordtype">void</span>
<a name="l01101"></a><a class="code" href="classInOrderCPU.html#a7aca82c82b31b401a4d5b80eca6b211d">01101</a> <a class="code" href="classInOrderCPU.html#a7aca82c82b31b401a4d5b80eca6b211d" title="Remove from Active Thread List.">InOrderCPU::deactivateThread</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01102"></a>01102 {
<a name="l01103"></a>01103     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;[tid:%i]: Calling deactivate thread.\n&quot;</span>, tid);
<a name="l01104"></a>01104 
<a name="l01105"></a>01105     <span class="keywordflow">if</span> (<a class="code" href="classInOrderCPU.html#a30101ed1d25c11c1fc2e4bfe1d4bee9e" title="Thread Status Functions.">isThreadActive</a>(tid)) {
<a name="l01106"></a>01106         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>,<span class="stringliteral">&quot;[tid:%i]: Removing from active threads list\n&quot;</span>,
<a name="l01107"></a>01107                 tid);
<a name="l01108"></a>01108         <a class="code" href="classstd_1_1list.html" title="STL list class.">list&lt;ThreadID&gt;::iterator</a> thread_it =
<a name="l01109"></a>01109             <a class="code" href="classSimObject.html#a2d22556f4a5c932a267783fd33f4db79" title="Find the SimObject with the given name and return a pointer to it.">std::find</a>(<a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.begin(), <a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.end(), tid);
<a name="l01110"></a>01110 
<a name="l01111"></a>01111         <a class="code" href="classInOrderCPU.html#ad36c1f222724450235050cf04760ae01">removePipelineStalls</a>(*thread_it);
<a name="l01112"></a>01112 
<a name="l01113"></a>01113         <a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.erase(thread_it);
<a name="l01114"></a>01114 
<a name="l01115"></a>01115         <span class="comment">// Ideally, this should be triggered from the</span>
<a name="l01116"></a>01116         <span class="comment">// suspendContext/Thread functions</span>
<a name="l01117"></a>01117         <a class="code" href="classInOrderCPU.html#ac749a703dd78256850e871e628b07075" title="Returns a pointer to a thread context.">tcBase</a>(tid)-&gt;<a class="code" href="classThreadContext.html#a8219da21012da41fb8e3a6b4d746d55b">setStatus</a>(<a class="code" href="classThreadContext.html#a7b7149621d48abf9c88dd7ef28c3ede7a22e910bf968e46f119def273b5875dfe" title="Temporarily inactive.">ThreadContext::Suspended</a>);    
<a name="l01118"></a>01118     }
<a name="l01119"></a>01119 
<a name="l01120"></a>01120     assert(!<a class="code" href="classInOrderCPU.html#a30101ed1d25c11c1fc2e4bfe1d4bee9e" title="Thread Status Functions.">isThreadActive</a>(tid));    
<a name="l01121"></a>01121 }
<a name="l01122"></a>01122 
<a name="l01123"></a>01123 <span class="keywordtype">void</span>
<a name="l01124"></a><a class="code" href="classInOrderCPU.html#ad36c1f222724450235050cf04760ae01">01124</a> <a class="code" href="classInOrderCPU.html#ad36c1f222724450235050cf04760ae01">InOrderCPU::removePipelineStalls</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01125"></a>01125 {
<a name="l01126"></a>01126     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>,<span class="stringliteral">&quot;[tid:%i]: Removing all pipeline stalls\n&quot;</span>,
<a name="l01127"></a>01127             tid);
<a name="l01128"></a>01128 
<a name="l01129"></a>01129     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stNum = 0; stNum &lt; NumStages ; stNum++) {
<a name="l01130"></a>01130         <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stNum]-&gt;<a class="code" href="classPipelineStage.html#aa40223c92630b131abc703bde55a9636" title="Remove all stall signals for a particular thread;.">removeStalls</a>(tid);
<a name="l01131"></a>01131     }
<a name="l01132"></a>01132 
<a name="l01133"></a>01133 }
<a name="l01134"></a>01134 
<a name="l01135"></a>01135 <span class="keywordtype">void</span>
<a name="l01136"></a><a class="code" href="classInOrderCPU.html#a0c40696bb7905268a2377f4c5b1fba4f">01136</a> <a class="code" href="classInOrderCPU.html#a0c40696bb7905268a2377f4c5b1fba4f" title="Update The Order In Which We Process Threads.">InOrderCPU::updateThreadPriority</a>()
<a name="l01137"></a>01137 {
<a name="l01138"></a>01138     <span class="keywordflow">if</span> (<a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.size() &gt; 1)
<a name="l01139"></a>01139     {
<a name="l01140"></a>01140         <span class="comment">//DEFAULT TO ROUND ROBIN SCHEME</span>
<a name="l01141"></a>01141         <span class="comment">//e.g. Move highest priority to end of thread list</span>
<a name="l01142"></a>01142         <a class="code" href="classstd_1_1list.html" title="STL list class.">list&lt;ThreadID&gt;::iterator</a> list_begin = <a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.begin();
<a name="l01143"></a>01143 
<a name="l01144"></a>01144         <span class="keywordtype">unsigned</span> high_thread = *list_begin;
<a name="l01145"></a>01145 
<a name="l01146"></a>01146         <a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.erase(list_begin);
<a name="l01147"></a>01147 
<a name="l01148"></a>01148         <a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.push_back(high_thread);
<a name="l01149"></a>01149     }
<a name="l01150"></a>01150 }
<a name="l01151"></a>01151 
<a name="l01152"></a>01152 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l01153"></a><a class="code" href="classInOrderCPU.html#aadea303cd5f0cee39ed1fff40c271238">01153</a> <a class="code" href="classInOrderCPU.html#aadea303cd5f0cee39ed1fff40c271238" title="Update Thread , used for statistic purposes.">InOrderCPU::tickThreadStats</a>()
<a name="l01154"></a>01154 {
<a name="l01156"></a>01156     <a class="code" href="classstd_1_1list.html" title="STL list class.">list&lt;ThreadID&gt;::iterator</a> thread_it = <a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.begin();
<a name="l01157"></a>01157     <span class="keywordflow">while</span> (thread_it != <a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.end()) {
<a name="l01158"></a>01158         <a class="code" href="classInOrderCPU.html#a666c920f85b1e0ea517f4e0f52f18d86" title="Per-Thread Tick.">threadCycles</a>[*thread_it]++;
<a name="l01159"></a>01159         thread_it++;
<a name="l01160"></a>01160     }
<a name="l01161"></a>01161 
<a name="l01162"></a>01162     <span class="comment">// Keep track of cycles where SMT is active</span>
<a name="l01163"></a>01163     <span class="keywordflow">if</span> (<a class="code" href="classInOrderCPU.html#aadab0b51a706aa1acdde30645402d171" title="Active Threads List.">activeThreads</a>.size() &gt; 1) {
<a name="l01164"></a>01164         <a class="code" href="classInOrderCPU.html#a9f4ccb48e35b7b91a173e2baabd54c3b" title="Tick for SMT.">smtCycles</a>++;
<a name="l01165"></a>01165     }
<a name="l01166"></a>01166 }
<a name="l01167"></a>01167 
<a name="l01168"></a>01168 <span class="keywordtype">void</span>
<a name="l01169"></a><a class="code" href="classInOrderCPU.html#a129aef45060ae7358c434b0a555ce2bd">01169</a> <a class="code" href="classInOrderCPU.html#a129aef45060ae7358c434b0a555ce2bd" title="Schedule thread activation on the CPU.">InOrderCPU::activateContext</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid, <a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a> delay)
<a name="l01170"></a>01170 {
<a name="l01171"></a>01171     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>,<span class="stringliteral">&quot;[tid:%i]: Activating ...\n&quot;</span>, tid);
<a name="l01172"></a>01172 
<a name="l01173"></a>01173     
<a name="l01174"></a>01174     <a class="code" href="classInOrderCPU.html#a206bf529521880857c2c1d5ae6e4db3c" title="Schedule a CPU Event.">scheduleCpuEvent</a>(<a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76a6267e868cd6e742200feaf13a1978a3b">ActivateThread</a>, <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>, tid, <a class="code" href="classInOrderCPU.html#a7d8fa4094cc4ac8dbb1e57ab9a958740" title="Instruction used to signify that there is no *real* instruction in buffer slot.">dummyInst</a>[tid], delay);
<a name="l01175"></a>01175 
<a name="l01176"></a>01176     <span class="comment">// Be sure to signal that there&#39;s some activity so the CPU doesn&#39;t</span>
<a name="l01177"></a>01177     <span class="comment">// deschedule itself.</span>
<a name="l01178"></a>01178     <a class="code" href="classInOrderCPU.html#a73f78983745b757743951ab2ffe945b5" title="The activity recorder; used to tell if the CPU has any activity remaining or if it can go to idle and...">activityRec</a>.<a class="code" href="classActivityRecorder.html#a020dc37917baa7ac21ed5d9d35e73071" title="Records that there is activity this cycle.">activity</a>();
<a name="l01179"></a>01179 
<a name="l01180"></a>01180     <a class="code" href="classInOrderCPU.html#abdfe006587f18258188c043d20190cce" title="Overall CPU status.">_status</a> = Running;
<a name="l01181"></a>01181 }
<a name="l01182"></a>01182 
<a name="l01183"></a>01183 <span class="keywordtype">void</span>
<a name="l01184"></a><a class="code" href="classInOrderCPU.html#a36ea5837ee7325421be04bb8cb215269">01184</a> <a class="code" href="classInOrderCPU.html#a36ea5837ee7325421be04bb8cb215269" title="Schedule Thread Activation from Ready List.">InOrderCPU::activateNextReadyContext</a>(<a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a> delay)
<a name="l01185"></a>01185 {
<a name="l01186"></a>01186     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>,<span class="stringliteral">&quot;Activating next ready thread\n&quot;</span>);
<a name="l01187"></a>01187 
<a name="l01188"></a>01188     <a class="code" href="classInOrderCPU.html#a206bf529521880857c2c1d5ae6e4db3c" title="Schedule a CPU Event.">scheduleCpuEvent</a>(<a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76a7ed2dff125186d914080dc2327cfe780">ActivateNextReadyThread</a>, <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>, 0<span class="comment">/*tid*/</span>, <a class="code" href="classInOrderCPU.html#a7d8fa4094cc4ac8dbb1e57ab9a958740" title="Instruction used to signify that there is no *real* instruction in buffer slot.">dummyInst</a>[0], 
<a name="l01189"></a>01189                      delay, <a class="code" href="classInOrderCPU.html#af38ac311cde1a68889c87d9067f5b06fad4b8bb20324769507aea8f27e49cbf8e">ActivateNextReadyThread_Pri</a>);
<a name="l01190"></a>01190 
<a name="l01191"></a>01191     <span class="comment">// Be sure to signal that there&#39;s some activity so the CPU doesn&#39;t</span>
<a name="l01192"></a>01192     <span class="comment">// deschedule itself.</span>
<a name="l01193"></a>01193     <a class="code" href="classInOrderCPU.html#a73f78983745b757743951ab2ffe945b5" title="The activity recorder; used to tell if the CPU has any activity remaining or if it can go to idle and...">activityRec</a>.<a class="code" href="classActivityRecorder.html#a020dc37917baa7ac21ed5d9d35e73071" title="Records that there is activity this cycle.">activity</a>();
<a name="l01194"></a>01194 
<a name="l01195"></a>01195     <a class="code" href="classInOrderCPU.html#abdfe006587f18258188c043d20190cce" title="Overall CPU status.">_status</a> = Running;
<a name="l01196"></a>01196 }
<a name="l01197"></a>01197 
<a name="l01198"></a>01198 <span class="keywordtype">void</span>
<a name="l01199"></a><a class="code" href="classInOrderCPU.html#a03f3559507ee17259595f879ec2f6249">01199</a> <a class="code" href="classInOrderCPU.html#a03f3559507ee17259595f879ec2f6249" title="Schedule a thread halt on the CPU.">InOrderCPU::haltContext</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01200"></a>01200 {
<a name="l01201"></a>01201     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;[tid:%i]: Calling Halt Context...\n&quot;</span>, tid);
<a name="l01202"></a>01202 
<a name="l01203"></a>01203     <a class="code" href="classInOrderCPU.html#a206bf529521880857c2c1d5ae6e4db3c" title="Schedule a CPU Event.">scheduleCpuEvent</a>(<a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76a5faf0ed149785d9b2b75ea6c72607096">HaltThread</a>, <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>, tid, <a class="code" href="classInOrderCPU.html#a7d8fa4094cc4ac8dbb1e57ab9a958740" title="Instruction used to signify that there is no *real* instruction in buffer slot.">dummyInst</a>[tid]);
<a name="l01204"></a>01204 
<a name="l01205"></a>01205     <a class="code" href="classInOrderCPU.html#a73f78983745b757743951ab2ffe945b5" title="The activity recorder; used to tell if the CPU has any activity remaining or if it can go to idle and...">activityRec</a>.<a class="code" href="classActivityRecorder.html#a020dc37917baa7ac21ed5d9d35e73071" title="Records that there is activity this cycle.">activity</a>();
<a name="l01206"></a>01206 }
<a name="l01207"></a>01207 
<a name="l01208"></a>01208 <span class="keywordtype">void</span>
<a name="l01209"></a><a class="code" href="classInOrderCPU.html#a056f52e5931b938d79f1f0e66b832ece">01209</a> <a class="code" href="classInOrderCPU.html#a056f52e5931b938d79f1f0e66b832ece" title="Halt Thread, Remove from Active Thread List, Place Thread on Halted Threads List.">InOrderCPU::haltThread</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01210"></a>01210 {
<a name="l01211"></a>01211     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;[tid:%i]: Placing on Halted Threads List...\n&quot;</span>, tid);
<a name="l01212"></a>01212     <a class="code" href="classInOrderCPU.html#a7aca82c82b31b401a4d5b80eca6b211d" title="Remove from Active Thread List.">deactivateThread</a>(tid);
<a name="l01213"></a>01213     <a class="code" href="classInOrderCPU.html#ad677ef664c56e1f4a689c486783b1b28">squashThreadInPipeline</a>(tid);   
<a name="l01214"></a>01214     <a class="code" href="classInOrderCPU.html#aa200c21e75cf907f81404b1095d6030b" title="Halted Threads List.">haltedThreads</a>.push_back(tid);    
<a name="l01215"></a>01215 
<a name="l01216"></a>01216     <a class="code" href="classInOrderCPU.html#ac749a703dd78256850e871e628b07075" title="Returns a pointer to a thread context.">tcBase</a>(tid)-&gt;<a class="code" href="classThreadContext.html#a8219da21012da41fb8e3a6b4d746d55b">setStatus</a>(<a class="code" href="classThreadContext.html#a7b7149621d48abf9c88dd7ef28c3ede7a48c84e327dc1e92883d25b768ae191e9" title="Permanently shut down.">ThreadContext::Halted</a>);    
<a name="l01217"></a>01217 
<a name="l01218"></a>01218     <span class="keywordflow">if</span> (<a class="code" href="classInOrderCPU.html#ad3dc1ef578d975494a1096f61753c19a">threadModel</a> == <a class="code" href="classInOrderCPU.html#ab1d289a2e829b22be393397bad515918ae1a6f0ecf00fbeeb96de3da59293b5c4">SwitchOnCacheMiss</a>) {        
<a name="l01219"></a>01219         <a class="code" href="classInOrderCPU.html#a36ea5837ee7325421be04bb8cb215269" title="Schedule Thread Activation from Ready List.">activateNextReadyContext</a>();    
<a name="l01220"></a>01220     }
<a name="l01221"></a>01221 }
<a name="l01222"></a>01222 
<a name="l01223"></a>01223 <span class="keywordtype">void</span>
<a name="l01224"></a><a class="code" href="classInOrderCPU.html#a50ef3ebc4bfc7df6609411b974f11e2d">01224</a> <a class="code" href="classInOrderCPU.html#a50ef3ebc4bfc7df6609411b974f11e2d" title="Schedule a thread suspension on the CPU.">InOrderCPU::suspendContext</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01225"></a>01225 {
<a name="l01226"></a>01226     <a class="code" href="classInOrderCPU.html#a206bf529521880857c2c1d5ae6e4db3c" title="Schedule a CPU Event.">scheduleCpuEvent</a>(<a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76a345beeab727c00cb1f182047366e239a">SuspendThread</a>, <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>, tid, <a class="code" href="classInOrderCPU.html#a7d8fa4094cc4ac8dbb1e57ab9a958740" title="Instruction used to signify that there is no *real* instruction in buffer slot.">dummyInst</a>[tid]);
<a name="l01227"></a>01227 }
<a name="l01228"></a>01228 
<a name="l01229"></a>01229 <span class="keywordtype">void</span>
<a name="l01230"></a><a class="code" href="classInOrderCPU.html#a3bfdf2d7e5e26edc8ee9d9f225c0d031">01230</a> <a class="code" href="classInOrderCPU.html#a3bfdf2d7e5e26edc8ee9d9f225c0d031" title="Suspend Thread, Remove from Active Threads List, Add to Suspend List.">InOrderCPU::suspendThread</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01231"></a>01231 {
<a name="l01232"></a>01232     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;[tid:%i]: Placing on Suspended Threads List...\n&quot;</span>,
<a name="l01233"></a>01233             tid);
<a name="l01234"></a>01234     <a class="code" href="classInOrderCPU.html#a7aca82c82b31b401a4d5b80eca6b211d" title="Remove from Active Thread List.">deactivateThread</a>(tid);
<a name="l01235"></a>01235     <a class="code" href="classInOrderCPU.html#a57e535a592aa44dac44247c523016b67" title="Suspended Threads List.">suspendedThreads</a>.push_back(tid);    
<a name="l01236"></a>01236     <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;lastSuspend = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The current simulated tick.">curTick</a>();    
<a name="l01237"></a>01237 
<a name="l01238"></a>01238     <a class="code" href="classInOrderCPU.html#ac749a703dd78256850e871e628b07075" title="Returns a pointer to a thread context.">tcBase</a>(tid)-&gt;<a class="code" href="classThreadContext.html#a8219da21012da41fb8e3a6b4d746d55b">setStatus</a>(<a class="code" href="classThreadContext.html#a7b7149621d48abf9c88dd7ef28c3ede7a22e910bf968e46f119def273b5875dfe" title="Temporarily inactive.">ThreadContext::Suspended</a>);    
<a name="l01239"></a>01239 }
<a name="l01240"></a>01240 
<a name="l01241"></a>01241 <span class="keywordtype">void</span>
<a name="l01242"></a><a class="code" href="classInOrderCPU.html#ad677ef664c56e1f4a689c486783b1b28">01242</a> <a class="code" href="classInOrderCPU.html#ad677ef664c56e1f4a689c486783b1b28">InOrderCPU::squashThreadInPipeline</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01243"></a>01243 {
<a name="l01244"></a>01244     <span class="comment">//Squash all instructions in each stage</span>
<a name="l01245"></a>01245     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stNum=NumStages - 1; stNum &gt;= 0 ; stNum--) {
<a name="l01246"></a>01246         <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stNum]-&gt;<a class="code" href="classPipelineStage.html#aab06e660b6d3153590bc6aa2f7a8ac8e" title="Perform squash of instructions above seq_num.">squash</a>(0 <span class="comment">/*seq_num*/</span>, tid);
<a name="l01247"></a>01247     }
<a name="l01248"></a>01248 }
<a name="l01249"></a>01249 
<a name="l01250"></a>01250 <a class="code" href="classPipelineStage.html">PipelineStage</a>*
<a name="l01251"></a><a class="code" href="classInOrderCPU.html#a8d7a8586203f83ecb86e3891799cf33a">01251</a> <a class="code" href="classInOrderCPU.html#a8d7a8586203f83ecb86e3891799cf33a">InOrderCPU::getPipeStage</a>(<span class="keywordtype">int</span> stage_num)
<a name="l01252"></a>01252 {
<a name="l01253"></a>01253     <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stage_num];
<a name="l01254"></a>01254 }
<a name="l01255"></a>01255 
<a name="l01256"></a>01256 
<a name="l01257"></a>01257 <a class="code" href="namespaceAlphaISA.html#a4d6d3e0a061a9ba98ec23b90e198abaa">RegIndex</a>
<a name="l01258"></a><a class="code" href="classInOrderCPU.html#a9f4c3c04f9b9211324777ea0c8478d79">01258</a> <a class="code" href="classInOrderCPU.html#a9f4c3c04f9b9211324777ea0c8478d79">InOrderCPU::flattenRegIdx</a>(<a class="code" href="classInOrderCPU.html#ab84b034bcfe0c0c2fbd5d5e4a7bca71b">RegIndex</a> reg_idx, <a class="code" href="classInOrderCPU.html#a95629ade6ae85dcd8d33ded21b571067" title="Register Types Used in Dependency Tracking.">RegType</a> &amp;reg_type, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01259"></a>01259 {
<a name="l01260"></a>01260     <span class="keywordflow">if</span> (reg_idx &lt; <a class="code" href="namespaceAlphaISA.html#a942a03a0f7360391b1b6cf838c74b01ca675319a87996ecc87e14daadaafe7424">FP_Base_DepTag</a>) {
<a name="l01261"></a>01261         reg_type = IntType;
<a name="l01262"></a>01262         <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#a980b838613b45c5d8dd40bae319652d3" title="ISA state.">isa</a>[tid]-&gt;flattenIntIndex(reg_idx);
<a name="l01263"></a>01263     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (reg_idx &lt; <a class="code" href="namespaceAlphaISA.html#a942a03a0f7360391b1b6cf838c74b01ca34e953853d6e63b34f9febd0e691da0c">Ctrl_Base_DepTag</a>) {
<a name="l01264"></a>01264         reg_type = FloatType;
<a name="l01265"></a>01265         reg_idx -= FP_Base_DepTag;
<a name="l01266"></a>01266         <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#a980b838613b45c5d8dd40bae319652d3" title="ISA state.">isa</a>[tid]-&gt;flattenFloatIndex(reg_idx);
<a name="l01267"></a>01267     } <span class="keywordflow">else</span> {
<a name="l01268"></a>01268         reg_type = MiscType;
<a name="l01269"></a>01269         <span class="keywordflow">return</span> reg_idx - TheISA::Ctrl_Base_DepTag;
<a name="l01270"></a>01270     }
<a name="l01271"></a>01271 }
<a name="l01272"></a>01272 
<a name="l01273"></a>01273 uint64_t
<a name="l01274"></a><a class="code" href="classInOrderCPU.html#a79d73d94acf7619a4715ef2f90bcdff8">01274</a> <a class="code" href="classInOrderCPU.html#a79d73d94acf7619a4715ef2f90bcdff8" title="Register file accessors.">InOrderCPU::readIntReg</a>(<a class="code" href="classInOrderCPU.html#ab84b034bcfe0c0c2fbd5d5e4a7bca71b">RegIndex</a> reg_idx, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01275"></a>01275 {
<a name="l01276"></a>01276     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IntRegs, <span class="stringliteral">&quot;[tid:%i]: Reading Int. Reg %i as %x\n&quot;</span>,
<a name="l01277"></a>01277             tid, reg_idx, <a class="code" href="classInOrderCPU.html#a4e34eadc97cb2d21868951a747f892ca">intRegs</a>[tid][reg_idx]);
<a name="l01278"></a>01278 
<a name="l01279"></a>01279     <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#a4e34eadc97cb2d21868951a747f892ca">intRegs</a>[tid][reg_idx];
<a name="l01280"></a>01280 }
<a name="l01281"></a>01281 
<a name="l01282"></a>01282 <a class="code" href="namespaceAlphaISA.html#a9dc38d5e1803de53d6bf5d15e22bad7f">FloatReg</a>
<a name="l01283"></a><a class="code" href="classInOrderCPU.html#a7cf49f64baae3ecb880d2e8b711e76b9">01283</a> <a class="code" href="classInOrderCPU.html#a7cf49f64baae3ecb880d2e8b711e76b9">InOrderCPU::readFloatReg</a>(<a class="code" href="classInOrderCPU.html#ab84b034bcfe0c0c2fbd5d5e4a7bca71b">RegIndex</a> reg_idx, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01284"></a>01284 {
<a name="l01285"></a>01285     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(FloatRegs, <span class="stringliteral">&quot;[tid:%i]: Reading Float Reg %i as %x, %08f\n&quot;</span>,
<a name="l01286"></a>01286             tid, reg_idx, <a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.i[tid][reg_idx], <a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.f[tid][reg_idx]);
<a name="l01287"></a>01287 
<a name="l01288"></a>01288     <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.f[tid][reg_idx];
<a name="l01289"></a>01289 }
<a name="l01290"></a>01290 
<a name="l01291"></a>01291 <a class="code" href="namespaceAlphaISA.html#a320a4070bf0f71a598dac381b6afe14e">FloatRegBits</a>
<a name="l01292"></a><a class="code" href="classInOrderCPU.html#a1c3b4575a1c31986340477eb848ef495">01292</a> <a class="code" href="classInOrderCPU.html#a1c3b4575a1c31986340477eb848ef495">InOrderCPU::readFloatRegBits</a>(<a class="code" href="classInOrderCPU.html#ab84b034bcfe0c0c2fbd5d5e4a7bca71b">RegIndex</a> reg_idx, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01293"></a>01293 {
<a name="l01294"></a>01294     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(FloatRegs, <span class="stringliteral">&quot;[tid:%i]: Reading Float Reg %i as %x, %08f\n&quot;</span>,
<a name="l01295"></a>01295             tid, reg_idx, <a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.i[tid][reg_idx], <a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.f[tid][reg_idx]);
<a name="l01296"></a>01296 
<a name="l01297"></a>01297     <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.i[tid][reg_idx];
<a name="l01298"></a>01298 }
<a name="l01299"></a>01299 
<a name="l01300"></a>01300 <span class="keywordtype">void</span>
<a name="l01301"></a><a class="code" href="classInOrderCPU.html#aa8de314eb1ca92ea7f9928c685507a55">01301</a> <a class="code" href="classInOrderCPU.html#aa8de314eb1ca92ea7f9928c685507a55">InOrderCPU::setIntReg</a>(<a class="code" href="classInOrderCPU.html#ab84b034bcfe0c0c2fbd5d5e4a7bca71b">RegIndex</a> reg_idx, uint64_t <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01302"></a>01302 {
<a name="l01303"></a>01303     <span class="keywordflow">if</span> (reg_idx == <a class="code" href="namespaceAlphaISA.html#a7f37f910d53f6a7535037c4d47366260">TheISA::ZeroReg</a>) {
<a name="l01304"></a>01304         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IntRegs, <span class="stringliteral">&quot;[tid:%i]: Ignoring Setting of ISA-ZeroReg &quot;</span>
<a name="l01305"></a>01305                 <span class="stringliteral">&quot;(Int. Reg %i) to %x\n&quot;</span>, tid, reg_idx, val);
<a name="l01306"></a>01306         <span class="keywordflow">return</span>;
<a name="l01307"></a>01307     } <span class="keywordflow">else</span> {
<a name="l01308"></a>01308         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(IntRegs, <span class="stringliteral">&quot;[tid:%i]: Setting Int. Reg %i to %x\n&quot;</span>,
<a name="l01309"></a>01309                 tid, reg_idx, val);
<a name="l01310"></a>01310 
<a name="l01311"></a>01311         <a class="code" href="classInOrderCPU.html#a4e34eadc97cb2d21868951a747f892ca">intRegs</a>[tid][reg_idx] = val;
<a name="l01312"></a>01312     }
<a name="l01313"></a>01313 }
<a name="l01314"></a>01314 
<a name="l01315"></a>01315 
<a name="l01316"></a>01316 <span class="keywordtype">void</span>
<a name="l01317"></a><a class="code" href="classInOrderCPU.html#ab74849ba817edcccfd37af8df476894a">01317</a> <a class="code" href="classInOrderCPU.html#ab74849ba817edcccfd37af8df476894a">InOrderCPU::setFloatReg</a>(<a class="code" href="classInOrderCPU.html#ab84b034bcfe0c0c2fbd5d5e4a7bca71b">RegIndex</a> reg_idx, <a class="code" href="classInOrderCPU.html#aba9bbf58c9da60ce96839bf4aec103a9">FloatReg</a> <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01318"></a>01318 {
<a name="l01319"></a>01319     <a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.f[tid][reg_idx] = val;
<a name="l01320"></a>01320     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(FloatRegs, <span class="stringliteral">&quot;[tid:%i]: Setting Float. Reg %i bits to &quot;</span>
<a name="l01321"></a>01321             <span class="stringliteral">&quot;%x, %08f\n&quot;</span>,
<a name="l01322"></a>01322             tid, reg_idx,
<a name="l01323"></a>01323             <a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.i[tid][reg_idx],
<a name="l01324"></a>01324             <a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.f[tid][reg_idx]);
<a name="l01325"></a>01325 }
<a name="l01326"></a>01326 
<a name="l01327"></a>01327 
<a name="l01328"></a>01328 <span class="keywordtype">void</span>
<a name="l01329"></a><a class="code" href="classInOrderCPU.html#a94b61cd8beca8df53579731d5666b35f">01329</a> <a class="code" href="classInOrderCPU.html#a94b61cd8beca8df53579731d5666b35f">InOrderCPU::setFloatRegBits</a>(<a class="code" href="classInOrderCPU.html#ab84b034bcfe0c0c2fbd5d5e4a7bca71b">RegIndex</a> reg_idx, <a class="code" href="classInOrderCPU.html#ac3782b4ecce1fdf0d76f1d0e43648aee">FloatRegBits</a> <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01330"></a>01330 {
<a name="l01331"></a>01331     <a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.i[tid][reg_idx] = val;
<a name="l01332"></a>01332     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(FloatRegs, <span class="stringliteral">&quot;[tid:%i]: Setting Float. Reg %i bits to &quot;</span>
<a name="l01333"></a>01333             <span class="stringliteral">&quot;%x, %08f\n&quot;</span>,
<a name="l01334"></a>01334             tid, reg_idx,
<a name="l01335"></a>01335             <a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.i[tid][reg_idx],
<a name="l01336"></a>01336             <a class="code" href="classInOrderCPU.html#ad2bb8f77cfa35f0319ef4d4fd5156c9b" title="The Register File for the CPU.">floatRegs</a>.f[tid][reg_idx]);
<a name="l01337"></a>01337 }
<a name="l01338"></a>01338 
<a name="l01339"></a>01339 uint64_t
<a name="l01340"></a><a class="code" href="classInOrderCPU.html#acbc65ff744d55b92c0764dd71e133616">01340</a> <a class="code" href="classInOrderCPU.html#acbc65ff744d55b92c0764dd71e133616" title="Reads a int/fp/misc reg.">InOrderCPU::readRegOtherThread</a>(<span class="keywordtype">unsigned</span> reg_idx, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01341"></a>01341 {
<a name="l01342"></a>01342     <span class="comment">// If Default value is set, then retrieve target thread</span>
<a name="l01343"></a>01343     <span class="keywordflow">if</span> (tid == <a class="code" href="base_2types_8hh.html#a192b210a26f038691d0f095d85dc0953">InvalidThreadID</a>) {
<a name="l01344"></a>01344         tid = <a class="code" href="namespaceAlphaISA.html#a7956606c6fe17700d24242789ae5002c">TheISA::getTargetThread</a>(<a class="code" href="classInOrderCPU.html#ac749a703dd78256850e871e628b07075" title="Returns a pointer to a thread context.">tcBase</a>(tid));
<a name="l01345"></a>01345     }
<a name="l01346"></a>01346 
<a name="l01347"></a>01347     <span class="keywordflow">if</span> (reg_idx &lt; <a class="code" href="namespaceAlphaISA.html#a942a03a0f7360391b1b6cf838c74b01ca675319a87996ecc87e14daadaafe7424">FP_Base_DepTag</a>) {                   
<a name="l01348"></a>01348         <span class="comment">// Integer Register File</span>
<a name="l01349"></a>01349         <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#a79d73d94acf7619a4715ef2f90bcdff8" title="Register file accessors.">readIntReg</a>(reg_idx, tid);
<a name="l01350"></a>01350     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (reg_idx &lt; <a class="code" href="namespaceAlphaISA.html#a942a03a0f7360391b1b6cf838c74b01ca34e953853d6e63b34f9febd0e691da0c">Ctrl_Base_DepTag</a>) {          
<a name="l01351"></a>01351         <span class="comment">// Float Register File</span>
<a name="l01352"></a>01352         reg_idx -= FP_Base_DepTag;
<a name="l01353"></a>01353         <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#a1c3b4575a1c31986340477eb848ef495">readFloatRegBits</a>(reg_idx, tid);
<a name="l01354"></a>01354     } <span class="keywordflow">else</span> {
<a name="l01355"></a>01355         reg_idx -= Ctrl_Base_DepTag;
<a name="l01356"></a>01356         <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#ab050f0ce311305dcc0396f290966bd43" title="Reads a misc.">readMiscReg</a>(reg_idx, tid);  <span class="comment">// Misc. Register File</span>
<a name="l01357"></a>01357     }
<a name="l01358"></a>01358 }
<a name="l01359"></a>01359 <span class="keywordtype">void</span>
<a name="l01360"></a><a class="code" href="classInOrderCPU.html#abb39144d55df62a334806aa025c92328">01360</a> <a class="code" href="classInOrderCPU.html#abb39144d55df62a334806aa025c92328" title="Sets a int/fp/misc reg.">InOrderCPU::setRegOtherThread</a>(<span class="keywordtype">unsigned</span> reg_idx, <span class="keyword">const</span> <a class="code" href="classInOrderCPU.html#a72160c4b810fa049fdde8454f6b96560">MiscReg</a> &amp;<a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>,
<a name="l01361"></a>01361                               <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01362"></a>01362 {
<a name="l01363"></a>01363     <span class="comment">// If Default value is set, then retrieve target thread</span>
<a name="l01364"></a>01364     <span class="keywordflow">if</span> (tid == <a class="code" href="base_2types_8hh.html#a192b210a26f038691d0f095d85dc0953">InvalidThreadID</a>) {
<a name="l01365"></a>01365         tid = <a class="code" href="namespaceAlphaISA.html#a7956606c6fe17700d24242789ae5002c">TheISA::getTargetThread</a>(<a class="code" href="classInOrderCPU.html#ac749a703dd78256850e871e628b07075" title="Returns a pointer to a thread context.">tcBase</a>(tid));
<a name="l01366"></a>01366     }
<a name="l01367"></a>01367 
<a name="l01368"></a>01368     <span class="keywordflow">if</span> (reg_idx &lt; <a class="code" href="namespaceAlphaISA.html#a942a03a0f7360391b1b6cf838c74b01ca675319a87996ecc87e14daadaafe7424">FP_Base_DepTag</a>) {            <span class="comment">// Integer Register File</span>
<a name="l01369"></a>01369         <a class="code" href="classInOrderCPU.html#aa8de314eb1ca92ea7f9928c685507a55">setIntReg</a>(reg_idx, val, tid);
<a name="l01370"></a>01370     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (reg_idx &lt; <a class="code" href="namespaceAlphaISA.html#a942a03a0f7360391b1b6cf838c74b01ca34e953853d6e63b34f9febd0e691da0c">Ctrl_Base_DepTag</a>) {   <span class="comment">// Float Register File</span>
<a name="l01371"></a>01371         reg_idx -= FP_Base_DepTag;
<a name="l01372"></a>01372         <a class="code" href="classInOrderCPU.html#a94b61cd8beca8df53579731d5666b35f">setFloatRegBits</a>(reg_idx, val, tid);
<a name="l01373"></a>01373     } <span class="keywordflow">else</span> {
<a name="l01374"></a>01374         reg_idx -= Ctrl_Base_DepTag;
<a name="l01375"></a>01375         <a class="code" href="classInOrderCPU.html#a30e01aa0c1bc60eddb1dffcca8f05665" title="Sets a misc.">setMiscReg</a>(reg_idx, val, tid); <span class="comment">// Misc. Register File</span>
<a name="l01376"></a>01376     }
<a name="l01377"></a>01377 }
<a name="l01378"></a>01378 
<a name="l01379"></a>01379 <a class="code" href="namespaceAlphaISA.html#a77bad56584821a5741ae1512cc6f524b">MiscReg</a>
<a name="l01380"></a><a class="code" href="classInOrderCPU.html#acc7b4ce6dbb3f18aa4a9eb7f79c89d7c">01380</a> <a class="code" href="classInOrderCPU.html#acc7b4ce6dbb3f18aa4a9eb7f79c89d7c" title="Reads a miscellaneous register.">InOrderCPU::readMiscRegNoEffect</a>(<span class="keywordtype">int</span> misc_reg, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01381"></a>01381 {
<a name="l01382"></a>01382     <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#a980b838613b45c5d8dd40bae319652d3" title="ISA state.">isa</a>[tid]-&gt;readMiscRegNoEffect(misc_reg);
<a name="l01383"></a>01383 }
<a name="l01384"></a>01384 
<a name="l01385"></a>01385 <a class="code" href="namespaceAlphaISA.html#a77bad56584821a5741ae1512cc6f524b">MiscReg</a>
<a name="l01386"></a><a class="code" href="classInOrderCPU.html#ab050f0ce311305dcc0396f290966bd43">01386</a> <a class="code" href="classInOrderCPU.html#ab050f0ce311305dcc0396f290966bd43" title="Reads a misc.">InOrderCPU::readMiscReg</a>(<span class="keywordtype">int</span> misc_reg, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01387"></a>01387 {
<a name="l01388"></a>01388     <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#a980b838613b45c5d8dd40bae319652d3" title="ISA state.">isa</a>[tid]-&gt;readMiscReg(misc_reg, <a class="code" href="classInOrderCPU.html#ac749a703dd78256850e871e628b07075" title="Returns a pointer to a thread context.">tcBase</a>(tid));
<a name="l01389"></a>01389 }
<a name="l01390"></a>01390 
<a name="l01391"></a>01391 <span class="keywordtype">void</span>
<a name="l01392"></a><a class="code" href="classInOrderCPU.html#a84e343c93a28505ca5a53511b98921c7">01392</a> <a class="code" href="classInOrderCPU.html#a84e343c93a28505ca5a53511b98921c7" title="Sets a miscellaneous register.">InOrderCPU::setMiscRegNoEffect</a>(<span class="keywordtype">int</span> misc_reg, <span class="keyword">const</span> <a class="code" href="classInOrderCPU.html#a72160c4b810fa049fdde8454f6b96560">MiscReg</a> &amp;<a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01393"></a>01393 {
<a name="l01394"></a>01394     <a class="code" href="classInOrderCPU.html#a980b838613b45c5d8dd40bae319652d3" title="ISA state.">isa</a>[tid]-&gt;setMiscRegNoEffect(misc_reg, val);
<a name="l01395"></a>01395 }
<a name="l01396"></a>01396 
<a name="l01397"></a>01397 <span class="keywordtype">void</span>
<a name="l01398"></a><a class="code" href="classInOrderCPU.html#a30e01aa0c1bc60eddb1dffcca8f05665">01398</a> <a class="code" href="classInOrderCPU.html#a30e01aa0c1bc60eddb1dffcca8f05665" title="Sets a misc.">InOrderCPU::setMiscReg</a>(<span class="keywordtype">int</span> misc_reg, <span class="keyword">const</span> <a class="code" href="classInOrderCPU.html#a72160c4b810fa049fdde8454f6b96560">MiscReg</a> &amp;<a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01399"></a>01399 {
<a name="l01400"></a>01400     <a class="code" href="classInOrderCPU.html#a980b838613b45c5d8dd40bae319652d3" title="ISA state.">isa</a>[tid]-&gt;setMiscReg(misc_reg, val, <a class="code" href="classInOrderCPU.html#ac749a703dd78256850e871e628b07075" title="Returns a pointer to a thread context.">tcBase</a>(tid));
<a name="l01401"></a>01401 }
<a name="l01402"></a>01402 
<a name="l01403"></a>01403 
<a name="l01404"></a>01404 <a class="code" href="classInOrderCPU.html#aff50b8f3eefc147b64442bace69720f9">InOrderCPU::ListIt</a>
<a name="l01405"></a><a class="code" href="classInOrderCPU.html#a0e9f878f4268dcd12ac899a91e7e494a">01405</a> <a class="code" href="classInOrderCPU.html#a0e9f878f4268dcd12ac899a91e7e494a" title="Function to add instruction onto the head of the list of the instructions.">InOrderCPU::addInst</a>(<a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst)
<a name="l01406"></a>01406 {
<a name="l01407"></a>01407     <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid = inst-&gt;readTid();
<a name="l01408"></a>01408 
<a name="l01409"></a>01409     <a class="code" href="classInOrderCPU.html#a6de54ce0c512c0428851176367dbe405" title="Per-Thread List of all the instructions in flight.">instList</a>[tid].push_back(inst);
<a name="l01410"></a>01410 
<a name="l01411"></a>01411     <span class="keywordflow">return</span> --(<a class="code" href="classInOrderCPU.html#a6de54ce0c512c0428851176367dbe405" title="Per-Thread List of all the instructions in flight.">instList</a>[tid].end());
<a name="l01412"></a>01412 }
<a name="l01413"></a>01413 
<a name="l01414"></a>01414 <a class="code" href="classInOrderCPU.html#aff50b8f3eefc147b64442bace69720f9">InOrderCPU::ListIt</a>
<a name="l01415"></a><a class="code" href="classInOrderCPU.html#afb61aa4f2380bbfa6d2ef0f89f7d8ea9">01415</a> <a class="code" href="classInOrderCPU.html#afb61aa4f2380bbfa6d2ef0f89f7d8ea9" title="Find instruction on instruction list.">InOrderCPU::findInst</a>(<a class="code" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> seq_num, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01416"></a>01416 {
<a name="l01417"></a>01417     <a class="code" href="classInOrderCPU.html#aff50b8f3eefc147b64442bace69720f9">ListIt</a> it = <a class="code" href="classInOrderCPU.html#a6de54ce0c512c0428851176367dbe405" title="Per-Thread List of all the instructions in flight.">instList</a>[tid].begin();
<a name="l01418"></a>01418     <a class="code" href="classInOrderCPU.html#aff50b8f3eefc147b64442bace69720f9">ListIt</a> end = <a class="code" href="classInOrderCPU.html#a6de54ce0c512c0428851176367dbe405" title="Per-Thread List of all the instructions in flight.">instList</a>[tid].end();
<a name="l01419"></a>01419 
<a name="l01420"></a>01420     <span class="keywordflow">while</span> (it != end) {
<a name="l01421"></a>01421         <span class="keywordflow">if</span> ((*it)-&gt;seqNum == seq_num)
<a name="l01422"></a>01422             <span class="keywordflow">return</span> it;
<a name="l01423"></a>01423         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*it)-&gt;seqNum &gt; seq_num)
<a name="l01424"></a>01424             <span class="keywordflow">break</span>;
<a name="l01425"></a>01425 
<a name="l01426"></a>01426         it++;
<a name="l01427"></a>01427     }
<a name="l01428"></a>01428 
<a name="l01429"></a>01429     <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#a6de54ce0c512c0428851176367dbe405" title="Per-Thread List of all the instructions in flight.">instList</a>[tid].end();
<a name="l01430"></a>01430 }
<a name="l01431"></a>01431 
<a name="l01432"></a>01432 <span class="keywordtype">void</span> 
<a name="l01433"></a><a class="code" href="classInOrderCPU.html#a72adf542c527d2335b3eaabdd01c2b71">01433</a> <a class="code" href="classInOrderCPU.html#a72adf542c527d2335b3eaabdd01c2b71">InOrderCPU::updateContextSwitchStats</a>()
<a name="l01434"></a>01434 {
<a name="l01435"></a>01435     <span class="comment">// Set Average Stat Here, then reset to 0    </span>
<a name="l01436"></a>01436     <a class="code" href="classInOrderCPU.html#abe243b2922185ff89d3cbeefe2fb1b2d">instsPerCtxtSwitch</a> = <a class="code" href="classInOrderCPU.html#ab70f0446882da3603e689c2f86ec77b3">instsPerSwitch</a>;
<a name="l01437"></a>01437     <a class="code" href="classInOrderCPU.html#ab70f0446882da3603e689c2f86ec77b3">instsPerSwitch</a> = 0;
<a name="l01438"></a>01438 }
<a name="l01439"></a>01439 
<a name="l01440"></a>01440     
<a name="l01441"></a>01441 <span class="keywordtype">void</span>
<a name="l01442"></a><a class="code" href="classInOrderCPU.html#adf1b24a57660bd9b1828fbce11ff0763">01442</a> <a class="code" href="classInOrderCPU.html#adf1b24a57660bd9b1828fbce11ff0763" title="Function to tell the CPU that an instruction has completed.">InOrderCPU::instDone</a>(<a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01443"></a>01443 {
<a name="l01444"></a>01444     <span class="comment">// Set the nextPC to be fetched if this is the last instruction</span>
<a name="l01445"></a>01445     <span class="comment">// committed</span>
<a name="l01446"></a>01446     <span class="comment">// ========</span>
<a name="l01447"></a>01447     <span class="comment">// This contributes to the precise state of the CPU</span>
<a name="l01448"></a>01448     <span class="comment">// which can be used when restoring a thread to the CPU after after any</span>
<a name="l01449"></a>01449     <span class="comment">// type of context switching activity (fork, exception, etc.)</span>
<a name="l01450"></a>01450     <a class="code" href="namespaceAlphaISA.html#a233e755911c9143f96bef37eedb1e009">TheISA::PCState</a> comm_pc = inst-&gt;pcState();
<a name="l01451"></a>01451     <a class="code" href="classInOrderCPU.html#a941894c79f3b2bb15082a46f813d2411" title="Last Committed PC.">lastCommittedPC</a>[tid] = comm_pc;
<a name="l01452"></a>01452     <a class="code" href="namespaceAlphaISA.html#add1b209af0281827d9ac0a67747a3bf7">TheISA::advancePC</a>(comm_pc, inst-&gt;staticInst);
<a name="l01453"></a>01453     <a class="code" href="classInOrderCPU.html#a8fd2345cf35e32bdc4ce2a27f91ff9b5" title="Reads the commit PC of a specific thread.">pcState</a>(comm_pc, tid);
<a name="l01454"></a>01454 
<a name="l01455"></a>01455     <span class="comment">//@todo: may be unnecessary with new-ISA-specific branch handling code</span>
<a name="l01456"></a>01456     <span class="keywordflow">if</span> (inst-&gt;isControl()) {
<a name="l01457"></a>01457         <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;lastGradIsBranch = <span class="keyword">true</span>;
<a name="l01458"></a>01458         <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;lastBranchPC = inst-&gt;pcState();
<a name="l01459"></a>01459         <a class="code" href="namespaceAlphaISA.html#add1b209af0281827d9ac0a67747a3bf7">TheISA::advancePC</a>(<a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;lastBranchPC, inst-&gt;staticInst);
<a name="l01460"></a>01460     } <span class="keywordflow">else</span> {
<a name="l01461"></a>01461         <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;lastGradIsBranch = <span class="keyword">false</span>;
<a name="l01462"></a>01462     }
<a name="l01463"></a>01463         
<a name="l01464"></a>01464 
<a name="l01465"></a>01465     <span class="comment">// Finalize Trace Data For Instruction</span>
<a name="l01466"></a>01466     <span class="keywordflow">if</span> (inst-&gt;traceData) {
<a name="l01467"></a>01467         <span class="comment">//inst-&gt;traceData-&gt;setCycle(curTick());</span>
<a name="l01468"></a>01468         inst-&gt;traceData-&gt;setFetchSeq(inst-&gt;seqNum);
<a name="l01469"></a>01469         <span class="comment">//inst-&gt;traceData-&gt;setCPSeq(cpu-&gt;tcBase(tid)-&gt;numInst);</span>
<a name="l01470"></a>01470         inst-&gt;traceData-&gt;dump();
<a name="l01471"></a>01471         <span class="keyword">delete</span> inst-&gt;traceData;
<a name="l01472"></a>01472         inst-&gt;traceData = NULL;
<a name="l01473"></a>01473     }
<a name="l01474"></a>01474 
<a name="l01475"></a>01475     <span class="comment">// Increment active thread&#39;s instruction count</span>
<a name="l01476"></a>01476     <a class="code" href="classInOrderCPU.html#ab70f0446882da3603e689c2f86ec77b3">instsPerSwitch</a>++;
<a name="l01477"></a>01477     
<a name="l01478"></a>01478     <span class="comment">// Increment thread-state&#39;s instruction count</span>
<a name="l01479"></a>01479     <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;numInst++;
<a name="l01480"></a>01480     <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;numOp++;
<a name="l01481"></a>01481 
<a name="l01482"></a>01482     <span class="comment">// Increment thread-state&#39;s instruction stats</span>
<a name="l01483"></a>01483     <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;numInsts++;
<a name="l01484"></a>01484     <a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;numOps++;
<a name="l01485"></a>01485 
<a name="l01486"></a>01486     <span class="comment">// Count committed insts per thread stats</span>
<a name="l01487"></a>01487     <span class="keywordflow">if</span> (!inst-&gt;isMicroop() || inst-&gt;isLastMicroop()) {
<a name="l01488"></a>01488         <a class="code" href="classInOrderCPU.html#ab842b054883c3e33939d5dc33dae99f6" title="Stat for the number of committed instructions per thread.">committedInsts</a>[tid]++;
<a name="l01489"></a>01489 
<a name="l01490"></a>01490         <span class="comment">// Count total insts committed stat</span>
<a name="l01491"></a>01491         <a class="code" href="classInOrderCPU.html#a17b41e39c6eb146b3126911bf78cea5c" title="Stat for the total number of committed instructions.">totalCommittedInsts</a>++;
<a name="l01492"></a>01492     }
<a name="l01493"></a>01493 
<a name="l01494"></a>01494     <a class="code" href="classInOrderCPU.html#ae1d4d4c79c9cc7d403b0068b4d61fbc8" title="Stat for the number of committed ops per thread.">committedOps</a>[tid]++;
<a name="l01495"></a>01495 
<a name="l01496"></a>01496     <span class="comment">// Count SMT-committed insts per thread stat</span>
<a name="l01497"></a>01497     <span class="keywordflow">if</span> (<a class="code" href="classInOrderCPU.html#ad12aed9638a409a9ddec579827993f13" title="Number of Active Threads in the CPU.">numActiveThreads</a>() &gt; 1) {
<a name="l01498"></a>01498         <span class="keywordflow">if</span> (!inst-&gt;isMicroop() || inst-&gt;isLastMicroop())
<a name="l01499"></a>01499             <a class="code" href="classInOrderCPU.html#af63629582266eb4a815060226c1f1ceb" title="Stat for the number of committed instructions per thread.">smtCommittedInsts</a>[tid]++;
<a name="l01500"></a>01500     }
<a name="l01501"></a>01501 
<a name="l01502"></a>01502     <span class="comment">// Instruction-Mix Stats</span>
<a name="l01503"></a>01503     <span class="keywordflow">if</span> (inst-&gt;isLoad()) {
<a name="l01504"></a>01504         <a class="code" href="classInOrderCPU.html#a6df696663b487012068a9a872ee47456" title="Instruction Mix Stats.">comLoads</a>++;
<a name="l01505"></a>01505     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inst-&gt;isStore()) {
<a name="l01506"></a>01506         <a class="code" href="classInOrderCPU.html#ab44ec4ec8c5a18c9c98fee409e76b326">comStores</a>++;
<a name="l01507"></a>01507     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inst-&gt;isControl()) {
<a name="l01508"></a>01508         <a class="code" href="classInOrderCPU.html#ae2c4152f69d007f60e9da7c8e9107e1a">comBranches</a>++;
<a name="l01509"></a>01509     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inst-&gt;isNop()) {
<a name="l01510"></a>01510         <a class="code" href="classInOrderCPU.html#ab19438e97acdc039e518eeaa3f7dd6cb">comNops</a>++;
<a name="l01511"></a>01511     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inst-&gt;isNonSpeculative()) {
<a name="l01512"></a>01512         <a class="code" href="classInOrderCPU.html#a74532fc813e9b13acbc9ed53aa343daa">comNonSpec</a>++;
<a name="l01513"></a>01513     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inst-&gt;isInteger()) {
<a name="l01514"></a>01514         <a class="code" href="classInOrderCPU.html#a917ee8d2f7f7ac04bcd6998c01662ace">comInts</a>++;
<a name="l01515"></a>01515     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inst-&gt;isFloating()) {
<a name="l01516"></a>01516         <a class="code" href="classInOrderCPU.html#a922449bc11a00c3ea7496fe24fc6e259">comFloats</a>++;
<a name="l01517"></a>01517     }
<a name="l01518"></a>01518 
<a name="l01519"></a>01519     <span class="comment">// Check for instruction-count-based events.</span>
<a name="l01520"></a>01520     <a class="code" href="classBaseCPU.html#a28a623d140582747e28b9396ebaaa328" title="Vector of per-thread instruction-based event queues.">comInstEventQueue</a>[tid]-&gt;<a class="code" href="classEventQueue.html#a74bcdad13d45b55c9d44711e89f66e68">serviceEvents</a>(<a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;numOp);
<a name="l01521"></a>01521 
<a name="l01522"></a>01522     <span class="comment">// Finally, remove instruction from CPU</span>
<a name="l01523"></a>01523     <a class="code" href="classInOrderCPU.html#a2f6ad79e88b525edc6b5304e776a2094" title="Remove an instruction from CPU.">removeInst</a>(inst);
<a name="l01524"></a>01524 }
<a name="l01525"></a>01525 
<a name="l01526"></a>01526 <span class="comment">// currently unused function, but substitute repetitive code w/this function</span>
<a name="l01527"></a>01527 <span class="comment">// call</span>
<a name="l01528"></a>01528 <span class="keywordtype">void</span>
<a name="l01529"></a><a class="code" href="classInOrderCPU.html#ad8284468444a0c4d99174a6e42e18606">01529</a> <a class="code" href="classInOrderCPU.html#ad8284468444a0c4d99174a6e42e18606" title="Add Instructions to the CPU Remove List.">InOrderCPU::addToRemoveList</a>(<a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst)
<a name="l01530"></a>01530 {
<a name="l01531"></a>01531     <a class="code" href="classInOrderCPU.html#a576be973b6f9802f822e0b0549de79eb" title="Records if instructions need to be removed this cycle due to being retired or squashed.">removeInstsThisCycle</a> = <span class="keyword">true</span>;
<a name="l01532"></a>01532     <span class="keywordflow">if</span> (!inst-&gt;isRemoveList()) {            
<a name="l01533"></a>01533         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Pushing instruction [tid:%i] PC %s &quot;</span>
<a name="l01534"></a>01534                 <span class="stringliteral">&quot;[sn:%lli] to remove list\n&quot;</span>,
<a name="l01535"></a>01535                 inst-&gt;threadNumber, inst-&gt;pcState(), inst-&gt;seqNum);
<a name="l01536"></a>01536         inst-&gt;setRemoveList();        
<a name="l01537"></a>01537         <a class="code" href="classInOrderCPU.html#a02a519a963914301386824560dbe3548" title="List of all the instructions that will be removed at the end of this cycle.">removeList</a>.push(inst-&gt;getInstListIt());
<a name="l01538"></a>01538     }  <span class="keywordflow">else</span> {
<a name="l01539"></a>01539         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Ignoring instruction removal for [tid:%i] PC %s &quot;</span>
<a name="l01540"></a>01540                 <span class="stringliteral">&quot;[sn:%lli], already remove list\n&quot;</span>,
<a name="l01541"></a>01541                 inst-&gt;threadNumber, inst-&gt;pcState(), inst-&gt;seqNum);
<a name="l01542"></a>01542     }
<a name="l01543"></a>01543     
<a name="l01544"></a>01544 }
<a name="l01545"></a>01545 
<a name="l01546"></a>01546 <span class="keywordtype">void</span>
<a name="l01547"></a><a class="code" href="classInOrderCPU.html#a2f6ad79e88b525edc6b5304e776a2094">01547</a> <a class="code" href="classInOrderCPU.html#a2f6ad79e88b525edc6b5304e776a2094" title="Remove an instruction from CPU.">InOrderCPU::removeInst</a>(<a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst)
<a name="l01548"></a>01548 {
<a name="l01549"></a>01549     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Removing graduated instruction [tid:%i] PC %s &quot;</span>
<a name="l01550"></a>01550             <span class="stringliteral">&quot;[sn:%lli]\n&quot;</span>,
<a name="l01551"></a>01551             inst-&gt;threadNumber, inst-&gt;pcState(), inst-&gt;seqNum);
<a name="l01552"></a>01552 
<a name="l01553"></a>01553     <a class="code" href="classInOrderCPU.html#a576be973b6f9802f822e0b0549de79eb" title="Records if instructions need to be removed this cycle due to being retired or squashed.">removeInstsThisCycle</a> = <span class="keyword">true</span>;
<a name="l01554"></a>01554 
<a name="l01555"></a>01555     <span class="comment">// Remove the instruction.</span>
<a name="l01556"></a>01556     <span class="keywordflow">if</span> (!inst-&gt;isRemoveList()) {            
<a name="l01557"></a>01557         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Pushing instruction [tid:%i] PC %s &quot;</span>
<a name="l01558"></a>01558                 <span class="stringliteral">&quot;[sn:%lli] to remove list\n&quot;</span>,
<a name="l01559"></a>01559                 inst-&gt;threadNumber, inst-&gt;pcState(), inst-&gt;seqNum);
<a name="l01560"></a>01560         inst-&gt;setRemoveList();        
<a name="l01561"></a>01561         <a class="code" href="classInOrderCPU.html#a02a519a963914301386824560dbe3548" title="List of all the instructions that will be removed at the end of this cycle.">removeList</a>.push(inst-&gt;getInstListIt());
<a name="l01562"></a>01562     } <span class="keywordflow">else</span> {
<a name="l01563"></a>01563         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Ignoring instruction removal for [tid:%i] PC %s &quot;</span>
<a name="l01564"></a>01564                 <span class="stringliteral">&quot;[sn:%lli], already on remove list\n&quot;</span>,
<a name="l01565"></a>01565                 inst-&gt;threadNumber, inst-&gt;pcState(), inst-&gt;seqNum);
<a name="l01566"></a>01566     }
<a name="l01567"></a>01567 
<a name="l01568"></a>01568 }
<a name="l01569"></a>01569 
<a name="l01570"></a>01570 <span class="keywordtype">void</span>
<a name="l01571"></a><a class="code" href="classInOrderCPU.html#a3ad1b676afbf2558d5fe6c26995720d5">01571</a> <a class="code" href="classInOrderCPU.html#a3ad1b676afbf2558d5fe6c26995720d5" title="Remove all instructions younger than the given sequence number.">InOrderCPU::removeInstsUntil</a>(<span class="keyword">const</span> <a class="code" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> &amp;seq_num, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01572"></a>01572 {
<a name="l01573"></a>01573     <span class="comment">//assert(!instList[tid].empty());</span>
<a name="l01574"></a>01574 
<a name="l01575"></a>01575     <a class="code" href="classInOrderCPU.html#a576be973b6f9802f822e0b0549de79eb" title="Records if instructions need to be removed this cycle due to being retired or squashed.">removeInstsThisCycle</a> = <span class="keyword">true</span>;
<a name="l01576"></a>01576 
<a name="l01577"></a>01577     <a class="code" href="classInOrderCPU.html#aff50b8f3eefc147b64442bace69720f9">ListIt</a> inst_iter = <a class="code" href="classInOrderCPU.html#a6de54ce0c512c0428851176367dbe405" title="Per-Thread List of all the instructions in flight.">instList</a>[tid].end();
<a name="l01578"></a>01578 
<a name="l01579"></a>01579     inst_iter--;
<a name="l01580"></a>01580 
<a name="l01581"></a>01581     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Squashing instructions from CPU instruction &quot;</span>
<a name="l01582"></a>01582             <span class="stringliteral">&quot;list that are from [tid:%i] and above [sn:%lli] (end=%lli).\n&quot;</span>,
<a name="l01583"></a>01583             tid, seq_num, (*inst_iter)-&gt;seqNum);
<a name="l01584"></a>01584 
<a name="l01585"></a>01585     <span class="keywordflow">while</span> ((*inst_iter)-&gt;seqNum &gt; seq_num) {
<a name="l01586"></a>01586 
<a name="l01587"></a>01587         <span class="keywordtype">bool</span> break_loop = (inst_iter == <a class="code" href="classInOrderCPU.html#a6de54ce0c512c0428851176367dbe405" title="Per-Thread List of all the instructions in flight.">instList</a>[tid].begin());
<a name="l01588"></a>01588 
<a name="l01589"></a>01589         <a class="code" href="classInOrderCPU.html#a3e7d6499f5abd13cc368397ce8c71ac7" title="Removes the instruction pointed to by the iterator.">squashInstIt</a>(inst_iter, tid);
<a name="l01590"></a>01590 
<a name="l01591"></a>01591         inst_iter--;
<a name="l01592"></a>01592 
<a name="l01593"></a>01593         <span class="keywordflow">if</span> (break_loop)
<a name="l01594"></a>01594             <span class="keywordflow">break</span>;
<a name="l01595"></a>01595     }
<a name="l01596"></a>01596 }
<a name="l01597"></a>01597 
<a name="l01598"></a>01598 
<a name="l01599"></a>01599 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l01600"></a><a class="code" href="classInOrderCPU.html#a3e7d6499f5abd13cc368397ce8c71ac7">01600</a> <a class="code" href="classInOrderCPU.html#a3e7d6499f5abd13cc368397ce8c71ac7" title="Removes the instruction pointed to by the iterator.">InOrderCPU::squashInstIt</a>(<span class="keyword">const</span> <a class="code" href="classInOrderCPU.html#aff50b8f3eefc147b64442bace69720f9">ListIt</a> inst_it, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01601"></a>01601 {
<a name="l01602"></a>01602     <a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst = (*inst_it);
<a name="l01603"></a>01603     <span class="keywordflow">if</span> (inst-&gt;threadNumber == tid) {
<a name="l01604"></a>01604         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Squashing instruction, &quot;</span>
<a name="l01605"></a>01605                 <span class="stringliteral">&quot;[tid:%i] [sn:%lli] PC %s\n&quot;</span>,
<a name="l01606"></a>01606                 inst-&gt;threadNumber,
<a name="l01607"></a>01607                 inst-&gt;seqNum,
<a name="l01608"></a>01608                 inst-&gt;pcState());
<a name="l01609"></a>01609 
<a name="l01610"></a>01610         inst-&gt;setSquashed();
<a name="l01611"></a>01611         <a class="code" href="classInOrderCPU.html#a531943d53b1a13aabceb5c1973d698d1" title="Dependency Tracker for Integer &amp;amp; Floating Point Regs.">archRegDepMap</a>[tid].<a class="code" href="classRegDepMap.html#a3f946b7a7c5b37dd5d5281a72db5b64e" title="Remove all of a instruction&amp;#39;s destination registers into map.">remove</a>(inst);
<a name="l01612"></a>01612 
<a name="l01613"></a>01613         <span class="keywordflow">if</span> (!inst-&gt;isRemoveList()) {
<a name="l01614"></a>01614             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Pushing instruction [tid:%i] PC %s &quot;</span>
<a name="l01615"></a>01615                     <span class="stringliteral">&quot;[sn:%lli] to remove list\n&quot;</span>,
<a name="l01616"></a>01616                     inst-&gt;threadNumber, inst-&gt;pcState(),
<a name="l01617"></a>01617                     inst-&gt;seqNum);
<a name="l01618"></a>01618             inst-&gt;setRemoveList();
<a name="l01619"></a>01619             <a class="code" href="classInOrderCPU.html#a02a519a963914301386824560dbe3548" title="List of all the instructions that will be removed at the end of this cycle.">removeList</a>.push(inst_it);
<a name="l01620"></a>01620         } <span class="keywordflow">else</span> {
<a name="l01621"></a>01621             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Ignoring instruction removal for [tid:%i]&quot;</span>
<a name="l01622"></a>01622                     <span class="stringliteral">&quot; PC %s [sn:%lli], already on remove list\n&quot;</span>,
<a name="l01623"></a>01623                     inst-&gt;threadNumber, inst-&gt;pcState(),
<a name="l01624"></a>01624                     inst-&gt;seqNum);
<a name="l01625"></a>01625         }
<a name="l01626"></a>01626     
<a name="l01627"></a>01627     }
<a name="l01628"></a>01628     
<a name="l01629"></a>01629 }
<a name="l01630"></a>01630 
<a name="l01631"></a>01631 
<a name="l01632"></a>01632 <span class="keywordtype">void</span>
<a name="l01633"></a><a class="code" href="classInOrderCPU.html#acc457d97742eb9777cde82fb844475d9">01633</a> <a class="code" href="classInOrderCPU.html#acc457d97742eb9777cde82fb844475d9" title="Cleans up all instructions on the instruction remove list.">InOrderCPU::cleanUpRemovedInsts</a>()
<a name="l01634"></a>01634 {
<a name="l01635"></a>01635     <span class="keywordflow">while</span> (!<a class="code" href="classInOrderCPU.html#a02a519a963914301386824560dbe3548" title="List of all the instructions that will be removed at the end of this cycle.">removeList</a>.empty()) {
<a name="l01636"></a>01636         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;Removing instruction, &quot;</span>
<a name="l01637"></a>01637                 <span class="stringliteral">&quot;[tid:%i] [sn:%lli] PC %s\n&quot;</span>,
<a name="l01638"></a>01638                 (*<a class="code" href="classInOrderCPU.html#a02a519a963914301386824560dbe3548" title="List of all the instructions that will be removed at the end of this cycle.">removeList</a>.front())-&gt;threadNumber,
<a name="l01639"></a>01639                 (*<a class="code" href="classInOrderCPU.html#a02a519a963914301386824560dbe3548" title="List of all the instructions that will be removed at the end of this cycle.">removeList</a>.front())-&gt;seqNum,
<a name="l01640"></a>01640                (*<a class="code" href="classInOrderCPU.html#a02a519a963914301386824560dbe3548" title="List of all the instructions that will be removed at the end of this cycle.">removeList</a>.front())-&gt;<a class="code" href="classInOrderCPU.html#a8fd2345cf35e32bdc4ce2a27f91ff9b5" title="Reads the commit PC of a specific thread.">pcState</a>());
<a name="l01641"></a>01641 
<a name="l01642"></a>01642         <a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst = *<a class="code" href="classInOrderCPU.html#a02a519a963914301386824560dbe3548" title="List of all the instructions that will be removed at the end of this cycle.">removeList</a>.front();
<a name="l01643"></a>01643         <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid = inst-&gt;threadNumber;
<a name="l01644"></a>01644 
<a name="l01645"></a>01645         <span class="comment">// Remove From Register Dependency Map, If Necessary</span>
<a name="l01646"></a>01646         <span class="comment">// archRegDepMap[tid].remove(inst);</span>
<a name="l01647"></a>01647 
<a name="l01648"></a>01648         <span class="comment">// Clear if Non-Speculative</span>
<a name="l01649"></a>01649         <span class="keywordflow">if</span> (inst-&gt;staticInst &amp;&amp;
<a name="l01650"></a>01650             inst-&gt;seqNum == <a class="code" href="classInOrderCPU.html#ae33c372448d9bce9d15a72bac5a72a19" title="Instruction Seq.">nonSpecSeqNum</a>[tid] &amp;&amp;
<a name="l01651"></a>01651             <a class="code" href="classInOrderCPU.html#a3265800212197b04257383a5d1e32346" title="True if there is non-speculative Inst Active In Pipeline.">nonSpecInstActive</a>[tid] == <span class="keyword">true</span>) {
<a name="l01652"></a>01652             <a class="code" href="classInOrderCPU.html#a3265800212197b04257383a5d1e32346" title="True if there is non-speculative Inst Active In Pipeline.">nonSpecInstActive</a>[tid] = <span class="keyword">false</span>;
<a name="l01653"></a>01653         }
<a name="l01654"></a>01654 
<a name="l01655"></a>01655         inst-&gt;onInstList = <span class="keyword">false</span>;
<a name="l01656"></a>01656 
<a name="l01657"></a>01657         <a class="code" href="classInOrderCPU.html#a6de54ce0c512c0428851176367dbe405" title="Per-Thread List of all the instructions in flight.">instList</a>[tid].erase(<a class="code" href="classInOrderCPU.html#a02a519a963914301386824560dbe3548" title="List of all the instructions that will be removed at the end of this cycle.">removeList</a>.front());
<a name="l01658"></a>01658 
<a name="l01659"></a>01659         <a class="code" href="classInOrderCPU.html#a02a519a963914301386824560dbe3548" title="List of all the instructions that will be removed at the end of this cycle.">removeList</a>.pop();
<a name="l01660"></a>01660     }
<a name="l01661"></a>01661 
<a name="l01662"></a>01662     <a class="code" href="classInOrderCPU.html#a576be973b6f9802f822e0b0549de79eb" title="Records if instructions need to be removed this cycle due to being retired or squashed.">removeInstsThisCycle</a> = <span class="keyword">false</span>;
<a name="l01663"></a>01663 }
<a name="l01664"></a>01664 
<a name="l01665"></a>01665 <span class="keywordtype">void</span>
<a name="l01666"></a><a class="code" href="classInOrderCPU.html#a35745c37d4d9d4a9fd220fb37dcd36a5">01666</a> <a class="code" href="classInOrderCPU.html#a35745c37d4d9d4a9fd220fb37dcd36a5" title="Cleans up all events on the CPU event remove list.">InOrderCPU::cleanUpRemovedEvents</a>()
<a name="l01667"></a>01667 {
<a name="l01668"></a>01668     <span class="keywordflow">while</span> (!<a class="code" href="classInOrderCPU.html#abfbb828608f829b3418949ea566657a3" title="List of all the cpu event requests that will be removed at the end of the current cycle...">cpuEventRemoveList</a>.empty()) {
<a name="l01669"></a>01669         <a class="code" href="classEvent.html">Event</a> *cpu_event = <a class="code" href="classInOrderCPU.html#abfbb828608f829b3418949ea566657a3" title="List of all the cpu event requests that will be removed at the end of the current cycle...">cpuEventRemoveList</a>.front();
<a name="l01670"></a>01670         <a class="code" href="classInOrderCPU.html#abfbb828608f829b3418949ea566657a3" title="List of all the cpu event requests that will be removed at the end of the current cycle...">cpuEventRemoveList</a>.pop();
<a name="l01671"></a>01671         <span class="keyword">delete</span> cpu_event;
<a name="l01672"></a>01672     }
<a name="l01673"></a>01673 }
<a name="l01674"></a>01674 
<a name="l01675"></a>01675 
<a name="l01676"></a>01676 <span class="keywordtype">void</span>
<a name="l01677"></a><a class="code" href="classInOrderCPU.html#a2b75810f37931e9390dfafe98beab026">01677</a> <a class="code" href="classInOrderCPU.html#a2b75810f37931e9390dfafe98beab026" title="Debug function to print all instructions on the list.">InOrderCPU::dumpInsts</a>()
<a name="l01678"></a>01678 {
<a name="l01679"></a>01679     <span class="keywordtype">int</span> num = 0;
<a name="l01680"></a>01680 
<a name="l01681"></a>01681     <a class="code" href="classInOrderCPU.html#aff50b8f3eefc147b64442bace69720f9">ListIt</a> inst_list_it = <a class="code" href="classInOrderCPU.html#a6de54ce0c512c0428851176367dbe405" title="Per-Thread List of all the instructions in flight.">instList</a>[0].begin();
<a name="l01682"></a>01682 
<a name="l01683"></a>01683     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Dumping Instruction List\n&quot;</span>);
<a name="l01684"></a>01684 
<a name="l01685"></a>01685     <span class="keywordflow">while</span> (inst_list_it != <a class="code" href="classInOrderCPU.html#a6de54ce0c512c0428851176367dbe405" title="Per-Thread List of all the instructions in flight.">instList</a>[0].end()) {
<a name="l01686"></a>01686         <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;Instruction:%i\nPC:%s\n[tid:%i]\n[sn:%lli]\nIssued:%i\n&quot;</span>
<a name="l01687"></a>01687                 <span class="stringliteral">&quot;Squashed:%i\n\n&quot;</span>,
<a name="l01688"></a>01688                 num, (*inst_list_it)-&gt;pcState(),
<a name="l01689"></a>01689                 (*inst_list_it)-&gt;threadNumber,
<a name="l01690"></a>01690                 (*inst_list_it)-&gt;seqNum, (*inst_list_it)-&gt;isIssued(),
<a name="l01691"></a>01691                 (*inst_list_it)-&gt;isSquashed());
<a name="l01692"></a>01692         inst_list_it++;
<a name="l01693"></a>01693         ++num;
<a name="l01694"></a>01694     }
<a name="l01695"></a>01695 }
<a name="l01696"></a>01696 
<a name="l01697"></a>01697 <span class="keywordtype">void</span>
<a name="l01698"></a><a class="code" href="classInOrderCPU.html#a7db2d23c4bbbceac6bf250fe9af0b6ca">01698</a> <a class="code" href="classInOrderCPU.html#a7db2d23c4bbbceac6bf250fe9af0b6ca" title="Wakes the CPU, rescheduling the CPU if it&amp;#39;s not already active.">InOrderCPU::wakeCPU</a>()
<a name="l01699"></a>01699 {
<a name="l01700"></a>01700     <span class="keywordflow">if</span> (<span class="comment">/*activityRec.active() || */</span><a class="code" href="classInOrderCPU.html#ac65e706c78081100af986b30274f6eb1" title="The tick event used for scheduling CPU ticks.">tickEvent</a>.<a class="code" href="classEvent.html#a36bdc2ee73215ed7670a7bfc0f25ab8b" title="Determine if the current event is scheduled.">scheduled</a>()) {
<a name="l01701"></a>01701         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Activity, <span class="stringliteral">&quot;CPU already running.\n&quot;</span>);
<a name="l01702"></a>01702         <span class="keywordflow">return</span>;
<a name="l01703"></a>01703     }
<a name="l01704"></a>01704 
<a name="l01705"></a>01705     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Activity, <span class="stringliteral">&quot;Waking up CPU\n&quot;</span>);
<a name="l01706"></a>01706 
<a name="l01707"></a>01707     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> extra_cycles = <a class="code" href="classClockedObject.html#a2b4a36a0ae697fe2c7c1c493146d7626" title="Determine the current cycle, corresponding to a tick aligned to a clock edge.">curCycle</a>() - <a class="code" href="classInOrderCPU.html#ae1f2ea9a1ebfb0935f4fd476acba2173" title="The cycle that the CPU was last running, used for statistics.">lastRunningCycle</a>;
<a name="l01708"></a>01708     <span class="keywordflow">if</span> (extra_cycles != 0)
<a name="l01709"></a>01709         --extra_cycles;
<a name="l01710"></a>01710 
<a name="l01711"></a>01711     <a class="code" href="classInOrderCPU.html#ae1467169175524e340a416a903e2d899" title="Stat for total number of cycles the CPU spends descheduled or no stages active.">idleCycles</a> += extra_cycles;    
<a name="l01712"></a>01712     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stage_num = 0; stage_num &lt; NumStages; stage_num++) {
<a name="l01713"></a>01713         <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[stage_num]-&gt;<a class="code" href="classPipelineStage.html#aa35ef5b450c861ad123656922a2a717b" title="Number of cycles 0 instruction(s) are processed.">idleCycles</a> += extra_cycles;
<a name="l01714"></a>01714     }    
<a name="l01715"></a>01715 
<a name="l01716"></a>01716     <a class="code" href="classBaseCPU.html#a205aff3cc2e726632f492ccd4f45d3ca">numCycles</a> += extra_cycles;
<a name="l01717"></a>01717 
<a name="l01718"></a>01718     <a class="code" href="classEventManager.html#a749a10828b2dd5017a2582960d04e400">schedule</a>(&amp;<a class="code" href="classInOrderCPU.html#ac65e706c78081100af986b30274f6eb1" title="The tick event used for scheduling CPU ticks.">tickEvent</a>, <a class="code" href="classClockedObject.html#afeec54486c377fa6d0825f9d24d64ab3" title="Based on the clock of the object, determine the tick when the next cycle begins, in other words...">nextCycle</a>());
<a name="l01719"></a>01719 }
<a name="l01720"></a>01720 
<a name="l01721"></a>01721 <span class="comment">// Lots of copied full system code...place into BaseCPU class?</span>
<a name="l01722"></a>01722 <span class="keywordtype">void</span>
<a name="l01723"></a><a class="code" href="classInOrderCPU.html#adc498a4a690006574c52b9cad8837c9d">01723</a> <a class="code" href="classInOrderCPU.html#adc498a4a690006574c52b9cad8837c9d">InOrderCPU::wakeup</a>()
<a name="l01724"></a>01724 {
<a name="l01725"></a>01725     <span class="keywordflow">if</span> (<a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[0]-&gt;status() != <a class="code" href="classThreadContext.html#a7b7149621d48abf9c88dd7ef28c3ede7a22e910bf968e46f119def273b5875dfe" title="Temporarily inactive.">ThreadContext::Suspended</a>)
<a name="l01726"></a>01726         <span class="keywordflow">return</span>;
<a name="l01727"></a>01727 
<a name="l01728"></a>01728     <a class="code" href="classInOrderCPU.html#a7db2d23c4bbbceac6bf250fe9af0b6ca" title="Wakes the CPU, rescheduling the CPU if it&amp;#39;s not already active.">wakeCPU</a>();
<a name="l01729"></a>01729 
<a name="l01730"></a>01730     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Quiesce, <span class="stringliteral">&quot;Suspended Processor woken\n&quot;</span>);
<a name="l01731"></a>01731     <a class="code" href="classBaseCPU.html#a22178d56f16f4d27c17453771f334a88">threadContexts</a>[0]-&gt;activate();
<a name="l01732"></a>01732 }
<a name="l01733"></a>01733 
<a name="l01734"></a>01734 <span class="keywordtype">void</span>
<a name="l01735"></a><a class="code" href="classInOrderCPU.html#a8e347ecdce2f68b92e7d969c8ef78968">01735</a> <a class="code" href="classInOrderCPU.html#a8e347ecdce2f68b92e7d969c8ef78968" title="Schedule a syscall on the CPU.">InOrderCPU::syscallContext</a>(<a class="code" href="classRefCountingPtr.html">Fault</a> fault, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid, <a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst,
<a name="l01736"></a>01736                            <a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a> delay)
<a name="l01737"></a>01737 {
<a name="l01738"></a>01738     <span class="comment">// Syscall must be non-speculative, so squash from last stage</span>
<a name="l01739"></a>01739     <span class="keywordtype">unsigned</span> squash_stage = NumStages - 1;
<a name="l01740"></a>01740     inst-&gt;setSquashInfo(squash_stage);
<a name="l01741"></a>01741 
<a name="l01742"></a>01742     <span class="comment">// Squash In Pipeline Stage</span>
<a name="l01743"></a>01743     <a class="code" href="classInOrderCPU.html#aced803927543477615b06ecb7f6299e9" title="The Pipeline Stages for the CPU.">pipelineStage</a>[squash_stage]-&gt;<a class="code" href="classPipelineStage.html#adece917894bcf753e9228630e3edbdac" title="Setup Squashing Information to be passed back thru the pipeline.">setupSquash</a>(inst, tid);
<a name="l01744"></a>01744 
<a name="l01745"></a>01745     <span class="comment">// Schedule Squash Through-out Resource Pool</span>
<a name="l01746"></a>01746     <a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#ab0672dc7bdf60067ba56beac051b4220" title="Schedule resource event, regardless of its current state.">scheduleEvent</a>(
<a name="l01747"></a>01747         (<a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76">InOrderCPU::CPUEventType</a>)<a class="code" href="classResourcePool.html#a5fa07daaf9d44a85a42900fb05620c57a864047727a8999a9baeb7f5a9182242e">ResourcePool::SquashAll</a>, inst,
<a name="l01748"></a>01748         <a class="code" href="classCycles.html" title="Cycles is a wrapper class for representing cycle counts, i.e.">Cycles</a>(0));
<a name="l01749"></a>01749     <a class="code" href="classInOrderCPU.html#a206bf529521880857c2c1d5ae6e4db3c" title="Schedule a CPU Event.">scheduleCpuEvent</a>(<a class="code" href="classInOrderCPU.html#afc441d08cc62c5e5512a9313fda62a76aa849f281ea5e5a6574aaa80388b72ea7">Syscall</a>, fault, tid, inst, delay, <a class="code" href="classInOrderCPU.html#af38ac311cde1a68889c87d9067f5b06faf3c498cb2a357600f0de4ef020831c9e">Syscall_Pri</a>);
<a name="l01750"></a>01750 }
<a name="l01751"></a>01751 
<a name="l01752"></a>01752 <span class="keywordtype">void</span>
<a name="l01753"></a><a class="code" href="classInOrderCPU.html#aa65977de06df6cd7579c8d790d45c686">01753</a> <a class="code" href="classInOrderCPU.html#aa65977de06df6cd7579c8d790d45c686" title="Executes a syscall.">InOrderCPU::syscall</a>(int64_t callnum, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l01754"></a>01754 {
<a name="l01755"></a>01755     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a>, <span class="stringliteral">&quot;[tid:%i] Executing syscall().\n\n&quot;</span>, tid);
<a name="l01756"></a>01756 
<a name="l01757"></a>01757     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Activity,<span class="stringliteral">&quot;Activity: syscall() called.\n&quot;</span>);
<a name="l01758"></a>01758 
<a name="l01759"></a>01759     <span class="comment">// Temporarily increase this by one to account for the syscall</span>
<a name="l01760"></a>01760     <span class="comment">// instruction.</span>
<a name="l01761"></a>01761     ++(this-&gt;<a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;funcExeInst);
<a name="l01762"></a>01762 
<a name="l01763"></a>01763     <span class="comment">// Execute the actual syscall.</span>
<a name="l01764"></a>01764     this-&gt;<a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;syscall(callnum);
<a name="l01765"></a>01765 
<a name="l01766"></a>01766     <span class="comment">// Decrease funcExeInst by one as the normal commit will handle</span>
<a name="l01767"></a>01767     <span class="comment">// incrementing it.</span>
<a name="l01768"></a>01768     --(this-&gt;<a class="code" href="classInOrderCPU.html#a6910dc05063cceb62c3d01af025f0496" title="Pointers to all of the threads in the CPU.">thread</a>[tid]-&gt;funcExeInst);
<a name="l01769"></a>01769 
<a name="l01770"></a>01770     <span class="comment">// Clear Non-Speculative Block Variable</span>
<a name="l01771"></a>01771     <a class="code" href="classInOrderCPU.html#a3265800212197b04257383a5d1e32346" title="True if there is non-speculative Inst Active In Pipeline.">nonSpecInstActive</a>[tid] = <span class="keyword">false</span>;
<a name="l01772"></a>01772 }
<a name="l01773"></a>01773 
<a name="l01774"></a>01774 TheISA::TLB*
<a name="l01775"></a><a class="code" href="classInOrderCPU.html#a1bc3f5b029a21dcaa32817b26d8bd54f">01775</a> <a class="code" href="classInOrderCPU.html#a1bc3f5b029a21dcaa32817b26d8bd54f">InOrderCPU::getITBPtr</a>()
<a name="l01776"></a>01776 {
<a name="l01777"></a>01777     <a class="code" href="classCacheUnit.html">CacheUnit</a> *itb_res = <a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#a351517f723a42f9811751b50bdb6048c" title="Get a pointer to the (always present) instruction fetch unit.">getInstUnit</a>();
<a name="l01778"></a>01778     <span class="keywordflow">return</span> itb_res-&gt;<a class="code" href="classCacheUnit.html#a8786760ecf8c49199c1be90f6cf81305">tlb</a>();
<a name="l01779"></a>01779 }
<a name="l01780"></a>01780 
<a name="l01781"></a>01781 
<a name="l01782"></a>01782 TheISA::TLB*
<a name="l01783"></a><a class="code" href="classInOrderCPU.html#ae418871e0dc01c9087e93b5138ad295b">01783</a> <a class="code" href="classInOrderCPU.html#ae418871e0dc01c9087e93b5138ad295b">InOrderCPU::getDTBPtr</a>()
<a name="l01784"></a>01784 {
<a name="l01785"></a>01785     <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#ae13ef5bf2fb400f62e4eff22f3ee29ed" title="Get a pointer to the (always present) data load/store unit.">getDataUnit</a>()-&gt;<a class="code" href="classCacheUnit.html#a8786760ecf8c49199c1be90f6cf81305">tlb</a>();
<a name="l01786"></a>01786 }
<a name="l01787"></a>01787 
<a name="l01788"></a>01788 TheISA::Decoder *
<a name="l01789"></a><a class="code" href="classInOrderCPU.html#a0b9b65f331d5d00c953e945ef6efa3c8">01789</a> <a class="code" href="classInOrderCPU.html#a0b9b65f331d5d00c953e945ef6efa3c8">InOrderCPU::getDecoderPtr</a>(<span class="keywordtype">unsigned</span> tid)
<a name="l01790"></a>01790 {
<a name="l01791"></a>01791     <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#a351517f723a42f9811751b50bdb6048c" title="Get a pointer to the (always present) instruction fetch unit.">getInstUnit</a>()-&gt;<a class="code" href="classFetchUnit.html#acbfbf614701d7f8aff0a1aac19052f86">decoder</a>[tid];
<a name="l01792"></a>01792 }
<a name="l01793"></a>01793 
<a name="l01794"></a>01794 <a class="code" href="classRefCountingPtr.html">Fault</a>
<a name="l01795"></a><a class="code" href="classInOrderCPU.html#a1adfc5dd5f06c8cb44190af4275e45e6">01795</a> <a class="code" href="classInOrderCPU.html#a1adfc5dd5f06c8cb44190af4275e45e6" title="Forwards an instruction read to the appropriate data resource (indexes into Resource Pool thru &amp;quot;...">InOrderCPU::read</a>(<a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst, <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="namespaceX86ISA.html#a79b5c08c190167d17c9b9b3fd40112f6">addr</a>,
<a name="l01796"></a>01796                  uint8_t *data, <span class="keywordtype">unsigned</span> size, <span class="keywordtype">unsigned</span> flags)
<a name="l01797"></a>01797 {
<a name="l01798"></a>01798     <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#ae13ef5bf2fb400f62e4eff22f3ee29ed" title="Get a pointer to the (always present) data load/store unit.">getDataUnit</a>()-&gt;<a class="code" href="classCacheUnit.html#ae5ded339f99b24b68d81b09e30e89f10">read</a>(inst, addr, data, size, flags);
<a name="l01799"></a>01799 }
<a name="l01800"></a>01800 
<a name="l01801"></a>01801 <a class="code" href="classRefCountingPtr.html">Fault</a>
<a name="l01802"></a><a class="code" href="classInOrderCPU.html#a01d70441d2e4a22045c2ea825ed74dd7">01802</a> <a class="code" href="classInOrderCPU.html#a01d70441d2e4a22045c2ea825ed74dd7" title="Forwards an instruction write.">InOrderCPU::write</a>(<a class="code" href="classRefCountingPtr.html">DynInstPtr</a> inst, uint8_t *data, <span class="keywordtype">unsigned</span> size,
<a name="l01803"></a>01803                   <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="namespaceX86ISA.html#a79b5c08c190167d17c9b9b3fd40112f6">addr</a>, <span class="keywordtype">unsigned</span> flags, uint64_t *write_res)
<a name="l01804"></a>01804 {
<a name="l01805"></a>01805     <span class="keywordflow">return</span> <a class="code" href="classInOrderCPU.html#a810facabac6ac9eac6e6344295de4d13" title="Interface between the CPU and CPU resources.">resPool</a>-&gt;<a class="code" href="classResourcePool.html#ae13ef5bf2fb400f62e4eff22f3ee29ed" title="Get a pointer to the (always present) data load/store unit.">getDataUnit</a>()-&gt;<a class="code" href="classCacheUnit.html#a4bf62fdf25b4136518f82b207c1c6a4f">write</a>(inst, data, size, addr, flags,
<a name="l01806"></a>01806                                          write_res);
<a name="l01807"></a>01807 }
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"><address style="align: right;"><small>
Generated on Sun Apr 7 2013 18:16:12 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.7.1</small></address>

</body>
</html>
