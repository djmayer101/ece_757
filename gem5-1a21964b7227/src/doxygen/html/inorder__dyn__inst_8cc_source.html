<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gem5: cpu/inorder/inorder_dyn_inst.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>cpu/inorder/inorder_dyn_inst.cc</h1>  </div>
</div>
<div class="contents">
<a href="inorder__dyn__inst_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2007 MIPS Technologies, Inc.</span>
<a name="l00003"></a>00003 <span class="comment"> * All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00006"></a>00006 <span class="comment"> * modification, are permitted provided that the following conditions are</span>
<a name="l00007"></a>00007 <span class="comment"> * met: redistributions of source code must retain the above copyright</span>
<a name="l00008"></a>00008 <span class="comment"> * notice, this list of conditions and the following disclaimer;</span>
<a name="l00009"></a>00009 <span class="comment"> * redistributions in binary form must reproduce the above copyright</span>
<a name="l00010"></a>00010 <span class="comment"> * notice, this list of conditions and the following disclaimer in the</span>
<a name="l00011"></a>00011 <span class="comment"> * documentation and/or other materials provided with the distribution;</span>
<a name="l00012"></a>00012 <span class="comment"> * neither the name of the copyright holders nor the names of its</span>
<a name="l00013"></a>00013 <span class="comment"> * contributors may be used to endorse or promote products derived from</span>
<a name="l00014"></a>00014 <span class="comment"> * this software without specific prior written permission.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00017"></a>00017 <span class="comment"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00018"></a>00018 <span class="comment"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00019"></a>00019 <span class="comment"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<a name="l00020"></a>00020 <span class="comment"> * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<a name="l00021"></a>00021 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00022"></a>00022 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00023"></a>00023 <span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00024"></a>00024 <span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00025"></a>00025 <span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00026"></a>00026 <span class="comment"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00027"></a>00027 <span class="comment"> *</span>
<a name="l00028"></a>00028 <span class="comment"> * Authors: Korey Sewell</span>
<a name="l00029"></a>00029 <span class="comment"> *</span>
<a name="l00030"></a>00030 <span class="comment"> */</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;set&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="bigint_8hh.html">base/bigint.hh</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="cp__annotate_8hh.html">base/cp_annotate.hh</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="cprintf_8hh.html">base/cprintf.hh</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="trace_8hh.html">base/trace.hh</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;config/the_isa.hh&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="inorder_2cpu_8hh.html">cpu/inorder/cpu.hh</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="inorder__dyn__inst_8hh.html" title="Defines a dynamic instruction context for a inorder CPU model.">cpu/inorder/inorder_dyn_inst.hh</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="exetrace_8hh.html">cpu/exetrace.hh</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;debug/InOrderDynInst.hh&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="request_8hh.html" title="Declaration of a request, the overall memory request consisting of the parts of the request that are ...">mem/request.hh</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="fault__fwd_8hh.html">sim/fault_fwd.hh</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="full__system_8hh.html">sim/full_system.hh</a>&quot;</span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="keyword">using namespace </span>std;
<a name="l00051"></a>00051 <span class="keyword">using namespace </span>TheISA;
<a name="l00052"></a>00052 <span class="keyword">using namespace </span>ThePipeline;
<a name="l00053"></a>00053 
<a name="l00054"></a><a class="code" href="classInOrderDynInst.html#ad0b7e01b2de3a729bb82c271fc5e206b">00054</a> <a class="code" href="classInOrderDynInst.html#ad0b7e01b2de3a729bb82c271fc5e206b" title="BaseDynInst constructor given a binary instruction.">InOrderDynInst::InOrderDynInst</a>(<a class="code" href="classInOrderCPU.html">InOrderCPU</a> *cpu,
<a name="l00055"></a>00055                                <a class="code" href="classInOrderThreadState.html" title="Class that has various thread state, such as the status, the current instruction being processed...">InOrderThreadState</a> *state,
<a name="l00056"></a>00056                                <a class="code" href="inst__seq_8hh.html#a258d93d98edaedee089435c19ea2ea2e">InstSeqNum</a> seq_num,
<a name="l00057"></a>00057                                <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid,
<a name="l00058"></a>00058                                <span class="keywordtype">unsigned</span> _asid)
<a name="l00059"></a>00059   : seqNum(seq_num), squashSeqNum(0), threadNumber(tid), <a class="code" href="namespaceArmISA.html#aaff4c7c57057268242cad9e94c8ff5d7">asid</a>(_asid),
<a name="l00060"></a>00060     virtProcNumber(0), staticInst(NULL), traceData(NULL), cpu(cpu),
<a name="l00061"></a>00061     thread(state), fault(<a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>), memData(NULL), loadData(0),
<a name="l00062"></a>00062     storeData(0), effAddr(0), physEffAddr(0), memReqFlags(0),
<a name="l00063"></a>00063     readyRegs(0), <a class="code" href="namespaceMipsISA.html#a4f7ed975e7137b5c369214789649451f">pc</a>(0), predPC(0), memAddr(0), nextStage(0),
<a name="l00064"></a>00064     memTime(0), splitMemData(NULL), splitMemReq(NULL), totalSize(0),
<a name="l00065"></a>00065     split2ndSize(0), split2ndAddr(0), split2ndAccess(false),
<a name="l00066"></a>00066     split2ndDataPtr(NULL), split2ndFlags(0), splitInst(false),
<a name="l00067"></a>00067     splitFinishCnt(0), split2ndStoreDataPtr(NULL), splitInstSked(false),
<a name="l00068"></a>00068     inFrontEnd(true), frontSked(NULL), backSked(NULL),
<a name="l00069"></a>00069     squashingStage(0), predictTaken(false), procDelaySlotOnMispred(false),
<a name="l00070"></a>00070     fetchMemReq(NULL), dataMemReq(NULL), instEffAddr(0), eaCalcDone(false),
<a name="l00071"></a>00071     lqIdx(0), sqIdx(0), onInstList(false)
<a name="l00072"></a>00072 {
<a name="l00073"></a>00073     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; MaxInstSrcRegs; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>++) {
<a name="l00074"></a>00074         <a class="code" href="classInOrderDynInst.html#a7e3196916ba9a61540ed417aea46a239" title="Whether or not the source register is ready.">_readySrcRegIdx</a>[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>] = <span class="keyword">false</span>;
<a name="l00075"></a>00075         <a class="code" href="classInOrderDynInst.html#aaa7b66a3e307d36e3db75a3d5d360468" title="Physical register index of the source registers of this instruction.">_srcRegIdx</a>[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>] = 0;
<a name="l00076"></a>00076     }
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#ac843bf7761bca8cf5315375942a0c25b">j</a> = 0; <a class="code" href="namespaceArmISA.html#ac843bf7761bca8cf5315375942a0c25b">j</a> &lt; MaxInstDestRegs; <a class="code" href="namespaceArmISA.html#ac843bf7761bca8cf5315375942a0c25b">j</a>++) {
<a name="l00079"></a>00079       <a class="code" href="classInOrderDynInst.html#ac1ccc40f7c72652a0a16456c9e8c9b20" title="Physical register index of the destination registers of this instruction.">_destRegIdx</a>[<a class="code" href="namespaceArmISA.html#ac843bf7761bca8cf5315375942a0c25b">j</a>] = 0;
<a name="l00080"></a>00080       <a class="code" href="classInOrderDynInst.html#a090c5ba54a4e2f1e8e9c2ddae5c04611" title="Physical register index of the previous producers of the architected destinations.">_prevDestRegIdx</a>[<a class="code" href="namespaceArmISA.html#ac843bf7761bca8cf5315375942a0c25b">j</a>] = 0;
<a name="l00081"></a>00081     }
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     ++<a class="code" href="classInOrderDynInst.html#a35d846872c72cffd50a683270cce3d43" title="Count of total number of dynamic instructions.">instcount</a>;
<a name="l00084"></a>00084     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;DynInst: [tid:%i] [sn:%lli] Instruction created.&quot;</span>
<a name="l00085"></a>00085             <span class="stringliteral">&quot; (active insts: %i)\n&quot;</span>, <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, <a class="code" href="classInOrderDynInst.html#a35d846872c72cffd50a683270cce3d43" title="Count of total number of dynamic instructions.">instcount</a>);
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 }
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 <span class="keywordtype">int</span> <a class="code" href="classInOrderDynInst.html#a35d846872c72cffd50a683270cce3d43" title="Count of total number of dynamic instructions.">InOrderDynInst::instcount</a> = 0;
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="keywordtype">int</span>
<a name="l00092"></a><a class="code" href="classInOrderDynInst.html#a871a45918e6509f8eaf01ed6317503d0">00092</a> <a class="code" href="classInOrderDynInst.html#a871a45918e6509f8eaf01ed6317503d0" title="Read this CPU&amp;#39;s ID.">InOrderDynInst::cpuId</a>()
<a name="l00093"></a>00093 {
<a name="l00094"></a>00094     <span class="keywordflow">return</span> <a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classBaseCPU.html#afbce2c177a8b0733c0699bea94a5f608" title="Reads this CPU&amp;#39;s ID.">cpuId</a>();
<a name="l00095"></a>00095 }
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 <span class="keywordtype">void</span>
<a name="l00098"></a><a class="code" href="classInOrderDynInst.html#a92b42601580b3e80b6e16332e81e363c">00098</a> <a class="code" href="classInOrderDynInst.html#a92b42601580b3e80b6e16332e81e363c">InOrderDynInst::setStaticInst</a>(<a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> <a class="code" href="namespacePowerISA.html#a53469916ca59ded1955f23a592f32f41">si</a>)
<a name="l00099"></a>00099 {
<a name="l00100"></a>00100     <a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a> = si;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;numDestRegs(); <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>++) {
<a name="l00103"></a>00103         <a class="code" href="classInOrderDynInst.html#ac1ccc40f7c72652a0a16456c9e8c9b20" title="Physical register index of the destination registers of this instruction.">_destRegIdx</a>[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>] = this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;destRegIdx(<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>);
<a name="l00104"></a>00104     }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;numSrcRegs(); <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>++) {
<a name="l00107"></a>00107         <a class="code" href="classInOrderDynInst.html#aaa7b66a3e307d36e3db75a3d5d360468" title="Physical register index of the source registers of this instruction.">_srcRegIdx</a>[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>] = this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;srcRegIdx(<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>);
<a name="l00108"></a>00108         this-&gt;<a class="code" href="classInOrderDynInst.html#a7e3196916ba9a61540ed417aea46a239" title="Whether or not the source register is ready.">_readySrcRegIdx</a>[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>] = 0;
<a name="l00109"></a>00109     }
<a name="l00110"></a>00110 }
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 <span class="keywordtype">void</span>
<a name="l00113"></a><a class="code" href="classInOrderDynInst.html#a3377e025e87a5e7e12dba5ed35397060">00113</a> <a class="code" href="classInOrderDynInst.html#a3377e025e87a5e7e12dba5ed35397060" title="Function to initialize variables in the constructors.">InOrderDynInst::initVars</a>()
<a name="l00114"></a>00114 {
<a name="l00115"></a>00115     <a class="code" href="classInOrderDynInst.html#a8bc515abc64f8b42621089ded75612ac">inFrontEnd</a> = <span class="keyword">true</span>;
<a name="l00116"></a>00116 
<a name="l00117"></a>00117     <a class="code" href="classInOrderDynInst.html#a6501870a9a13d27683bd5052779de72b">fetchMemReq</a> = NULL;
<a name="l00118"></a>00118     <a class="code" href="classInOrderDynInst.html#a6fd95c8c1a26c86423519f63b9cc1cac">dataMemReq</a> = NULL;
<a name="l00119"></a>00119     <a class="code" href="classInOrderDynInst.html#a35cf43d73c13a395f91742196c233d68">splitMemData</a> = NULL;
<a name="l00120"></a>00120     <a class="code" href="classInOrderDynInst.html#ad5b5e1b37dc1b54f131ab1abd974905a">split2ndAddr</a> = 0;
<a name="l00121"></a>00121     <a class="code" href="classInOrderDynInst.html#afa150dd3a1a878d2506d09d7cf1eba8a">split2ndAccess</a> = <span class="keyword">false</span>;
<a name="l00122"></a>00122     <a class="code" href="classInOrderDynInst.html#a6e3077220941e4aeb250bf724129b0cd">splitInst</a> = <span class="keyword">false</span>;
<a name="l00123"></a>00123     <a class="code" href="classInOrderDynInst.html#aabe590cc18a8ef8600e8518cd8310990">splitInstSked</a> = <span class="keyword">false</span>;    
<a name="l00124"></a>00124     <a class="code" href="classInOrderDynInst.html#a3f2fc75434c0b191add5002b6773b54b">splitFinishCnt</a> = 0;
<a name="l00125"></a>00125     
<a name="l00126"></a>00126     <a class="code" href="classInOrderDynInst.html#aa64006ce280f6ffe7f232d486aa02f3b" title="The effective virtual address (lds &amp;amp; stores only).">effAddr</a> = 0;
<a name="l00127"></a>00127     <a class="code" href="classInOrderDynInst.html#ac086151be102a2271accfe37fa8ae844" title="The effective physical address.">physEffAddr</a> = 0;
<a name="l00128"></a>00128 
<a name="l00129"></a>00129     <a class="code" href="classInOrderDynInst.html#a26ecca839cd481149947b2822007f74b" title="How many source registers are ready.">readyRegs</a> = 0;
<a name="l00130"></a>00130 
<a name="l00131"></a>00131     <a class="code" href="classInOrderDynInst.html#a4e3d1f0eacfcc76d42024d65f229ae2b">nextStage</a> = 0;
<a name="l00132"></a>00132 
<a name="l00133"></a>00133     <a class="code" href="classInOrderDynInst.html#ac14f79afcdc479135913d58e7f032c2f" title="The status of this BaseDynInst.">status</a>.reset();
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     <a class="code" href="classInOrderDynInst.html#aa8653cd5fca7c873c0e00006ebbc2247">memAddrReady</a> = <span class="keyword">false</span>;
<a name="l00136"></a>00136     <a class="code" href="classInOrderDynInst.html#ad292bc6fb1bb2ac7ca83dbd52437a43b" title="Whether or not the effective address calculation is completed.">eaCalcDone</a> = <span class="keyword">false</span>;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138     <a class="code" href="classInOrderDynInst.html#a19088a633d9384be4b34bea7af9f9478">predictTaken</a> = <span class="keyword">false</span>;
<a name="l00139"></a>00139     <a class="code" href="classInOrderDynInst.html#a69b4890d70462761a6715a0e2596f2d0">procDelaySlotOnMispred</a> = <span class="keyword">false</span>;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     <a class="code" href="classInOrderDynInst.html#a5f1d572a9204e43a05f71a93586fef73" title="Load queue index.">lqIdx</a> = -1;
<a name="l00142"></a>00142     <a class="code" href="classInOrderDynInst.html#ab35021740cdb67f62bdb51471439dc85" title="Store queue index.">sqIdx</a> = -1;
<a name="l00143"></a>00143 
<a name="l00144"></a>00144     <span class="comment">// Also make this a parameter, or perhaps get it from xc or cpu.</span>
<a name="l00145"></a>00145     <a class="code" href="classInOrderDynInst.html#a42397e552ad32fcfc4cc519612cef25f" title="data address space ID, for loads &amp;amp; stores.">asid</a> = 0;
<a name="l00146"></a>00146 
<a name="l00147"></a>00147     <a class="code" href="classInOrderDynInst.html#a359e5fec4184bb7268511d6c1a36ed69" title="The virtual processor number.">virtProcNumber</a> = 0;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     <span class="comment">// Initialize the fault to be NoFault.</span>
<a name="l00150"></a>00150     <a class="code" href="classInOrderDynInst.html#a0c47eef00f4f66677d62a462bd6c3d23" title="The kind of fault this instruction has generated.">fault</a> = <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00151"></a>00151 
<a name="l00152"></a>00152     <span class="comment">// Make sure to have the renamed register entries set to the same</span>
<a name="l00153"></a>00153     <span class="comment">// as the normal register entries.  It will allow the IQ to work</span>
<a name="l00154"></a>00154     <span class="comment">// without any modifications.</span>
<a name="l00155"></a>00155     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>) {
<a name="l00156"></a>00156         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;numDestRegs(); <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>++) {
<a name="l00157"></a>00157             <a class="code" href="classInOrderDynInst.html#ac1ccc40f7c72652a0a16456c9e8c9b20" title="Physical register index of the destination registers of this instruction.">_destRegIdx</a>[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>] = this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;destRegIdx(<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>);
<a name="l00158"></a>00158         }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;numSrcRegs(); <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>++) {
<a name="l00161"></a>00161             <a class="code" href="classInOrderDynInst.html#aaa7b66a3e307d36e3db75a3d5d360468" title="Physical register index of the source registers of this instruction.">_srcRegIdx</a>[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>] = this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;srcRegIdx(<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>);
<a name="l00162"></a>00162             this-&gt;<a class="code" href="classInOrderDynInst.html#a7e3196916ba9a61540ed417aea46a239" title="Whether or not the source register is ready.">_readySrcRegIdx</a>[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>] = 0;
<a name="l00163"></a>00163         }
<a name="l00164"></a>00164     }
<a name="l00165"></a>00165 
<a name="l00166"></a>00166     <span class="comment">// Update Instruction Count for this instruction</span>
<a name="l00167"></a>00167     <span class="keywordflow">if</span> (<a class="code" href="classInOrderDynInst.html#a35d846872c72cffd50a683270cce3d43" title="Count of total number of dynamic instructions.">instcount</a> &gt; 100) {
<a name="l00168"></a>00168         <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Number of Active Instructions in CPU is too high. &quot;</span>
<a name="l00169"></a>00169                 <span class="stringliteral">&quot;(Not Dereferencing Ptrs. Correctly?)\n&quot;</span>);
<a name="l00170"></a>00170     }
<a name="l00171"></a>00171 }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173 <span class="keywordtype">void</span>
<a name="l00174"></a><a class="code" href="classInOrderDynInst.html#af2c3b92f6a985892b4a31537026f2e10">00174</a> <a class="code" href="classInOrderDynInst.html#af2c3b92f6a985892b4a31537026f2e10">InOrderDynInst::resetInstCount</a>()
<a name="l00175"></a>00175 {
<a name="l00176"></a>00176     <a class="code" href="classInOrderDynInst.html#a35d846872c72cffd50a683270cce3d43" title="Count of total number of dynamic instructions.">instcount</a> = 0;
<a name="l00177"></a>00177 }
<a name="l00178"></a>00178 
<a name="l00179"></a>00179 
<a name="l00180"></a><a class="code" href="classInOrderDynInst.html#a2dc781cf3fff180f596c6c7e8f24f554">00180</a> <a class="code" href="classInOrderDynInst.html#a2dc781cf3fff180f596c6c7e8f24f554" title="InOrderDynInst destructor.">InOrderDynInst::~InOrderDynInst</a>()
<a name="l00181"></a>00181 {
<a name="l00182"></a>00182     <span class="keywordflow">if</span> (<a class="code" href="classInOrderDynInst.html#ab217528a74753e2629c7185aecf28af6" title="InstRecord that tracks this instructions.">traceData</a>)
<a name="l00183"></a>00183         <span class="keyword">delete</span> <a class="code" href="classInOrderDynInst.html#ab217528a74753e2629c7185aecf28af6" title="InstRecord that tracks this instructions.">traceData</a>;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     <span class="keywordflow">if</span> (<a class="code" href="classInOrderDynInst.html#a35cf43d73c13a395f91742196c233d68">splitMemData</a>)
<a name="l00186"></a>00186         <span class="keyword">delete</span> [] <a class="code" href="classInOrderDynInst.html#a35cf43d73c13a395f91742196c233d68">splitMemData</a>;
<a name="l00187"></a>00187 
<a name="l00188"></a>00188     <a class="code" href="classInOrderDynInst.html#a0c47eef00f4f66677d62a462bd6c3d23" title="The kind of fault this instruction has generated.">fault</a> = <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190     --<a class="code" href="classInOrderDynInst.html#a35d846872c72cffd50a683270cce3d43" title="Count of total number of dynamic instructions.">instcount</a>;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;DynInst: [tid:%i] [sn:%lli] Instruction destroyed&quot;</span>
<a name="l00193"></a>00193             <span class="stringliteral">&quot; (active insts: %i)\n&quot;</span>, <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, <a class="code" href="classInOrderDynInst.html#a35d846872c72cffd50a683270cce3d43" title="Count of total number of dynamic instructions.">instcount</a>);
<a name="l00194"></a>00194 }
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 <span class="keywordtype">void</span>
<a name="l00197"></a><a class="code" href="classInOrderDynInst.html#ab626d7e728bb8516f6d0ee618ab925bf">00197</a> <a class="code" href="classInOrderDynInst.html#a92b42601580b3e80b6e16332e81e363c">InOrderDynInst::setStaticInst</a>(<a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;static_inst)
<a name="l00198"></a>00198 {
<a name="l00199"></a>00199     this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a> = static_inst;
<a name="l00200"></a>00200 
<a name="l00201"></a>00201     <span class="comment">// Make sure to have the renamed register entries set to the same</span>
<a name="l00202"></a>00202     <span class="comment">// as the normal register entries.  It will allow the IQ to work</span>
<a name="l00203"></a>00203     <span class="comment">// without any modifications.</span>
<a name="l00204"></a>00204     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>) {
<a name="l00205"></a>00205         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;numDestRegs(); <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>++) {
<a name="l00206"></a>00206             <a class="code" href="classInOrderDynInst.html#ac1ccc40f7c72652a0a16456c9e8c9b20" title="Physical register index of the destination registers of this instruction.">_destRegIdx</a>[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>] = this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;destRegIdx(<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>);
<a name="l00207"></a>00207         }
<a name="l00208"></a>00208 
<a name="l00209"></a>00209         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;numSrcRegs(); <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>++) {
<a name="l00210"></a>00210             <a class="code" href="classInOrderDynInst.html#aaa7b66a3e307d36e3db75a3d5d360468" title="Physical register index of the source registers of this instruction.">_srcRegIdx</a>[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>] = this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;srcRegIdx(<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>);
<a name="l00211"></a>00211             this-&gt;<a class="code" href="classInOrderDynInst.html#a7e3196916ba9a61540ed417aea46a239" title="Whether or not the source register is ready.">_readySrcRegIdx</a>[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>] = 0;
<a name="l00212"></a>00212         }
<a name="l00213"></a>00213     }
<a name="l00214"></a>00214 }
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 <a class="code" href="classRefCountingPtr.html">Fault</a>
<a name="l00217"></a><a class="code" href="classInOrderDynInst.html#a05ec4a277d2d6e6a8f4a1d3da8871d83">00217</a> <a class="code" href="classInOrderDynInst.html#a05ec4a277d2d6e6a8f4a1d3da8871d83" title="Executes the instruction.">InOrderDynInst::execute</a>()
<a name="l00218"></a>00218 {
<a name="l00219"></a>00219     <span class="comment">// @todo: Pretty convoluted way to avoid squashing from happening</span>
<a name="l00220"></a>00220     <span class="comment">// when using the TC during an instruction&#39;s execution</span>
<a name="l00221"></a>00221     <span class="comment">// (specifically for instructions that have side-effects that use</span>
<a name="l00222"></a>00222     <span class="comment">// the TC).  Fix this.</span>
<a name="l00223"></a>00223     <span class="keywordtype">bool</span> no_squash_from_TC = this-&gt;<a class="code" href="classInOrderDynInst.html#a500edf08ee330a9d322350d04912446a" title="Pointer to the thread state.">thread</a>-&gt;<a class="code" href="classInOrderThreadState.html#af92d5060cb1bfc23d36792cf8b7c6070">noSquashFromTC</a>;
<a name="l00224"></a>00224     this-&gt;<a class="code" href="classInOrderDynInst.html#a500edf08ee330a9d322350d04912446a" title="Pointer to the thread state.">thread</a>-&gt;<a class="code" href="classInOrderThreadState.html#af92d5060cb1bfc23d36792cf8b7c6070">noSquashFromTC</a> = <span class="keyword">true</span>;
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     this-&gt;<a class="code" href="classInOrderDynInst.html#a0c47eef00f4f66677d62a462bd6c3d23" title="The kind of fault this instruction has generated.">fault</a> = this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;execute(<span class="keyword">this</span>, this-&gt;<a class="code" href="classInOrderDynInst.html#ab217528a74753e2629c7185aecf28af6" title="InstRecord that tracks this instructions.">traceData</a>);
<a name="l00227"></a>00227 
<a name="l00228"></a>00228     this-&gt;<a class="code" href="classInOrderDynInst.html#a500edf08ee330a9d322350d04912446a" title="Pointer to the thread state.">thread</a>-&gt;<a class="code" href="classInOrderThreadState.html#af92d5060cb1bfc23d36792cf8b7c6070">noSquashFromTC</a> = no_squash_from_TC;
<a name="l00229"></a>00229 
<a name="l00230"></a>00230     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classInOrderDynInst.html#a0c47eef00f4f66677d62a462bd6c3d23" title="The kind of fault this instruction has generated.">fault</a>;
<a name="l00231"></a>00231 }
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 <a class="code" href="classRefCountingPtr.html">Fault</a>
<a name="l00234"></a><a class="code" href="classInOrderDynInst.html#a98f27b9751c924889c2e49ab14410633">00234</a> <a class="code" href="classInOrderDynInst.html#a98f27b9751c924889c2e49ab14410633" title="Calculates Eff.">InOrderDynInst::calcEA</a>()
<a name="l00235"></a>00235 {
<a name="l00236"></a>00236     this-&gt;<a class="code" href="classInOrderDynInst.html#a0c47eef00f4f66677d62a462bd6c3d23" title="The kind of fault this instruction has generated.">fault</a> = this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;eaComp(<span class="keyword">this</span>, this-&gt;<a class="code" href="classInOrderDynInst.html#ab217528a74753e2629c7185aecf28af6" title="InstRecord that tracks this instructions.">traceData</a>);
<a name="l00237"></a>00237     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classInOrderDynInst.html#a0c47eef00f4f66677d62a462bd6c3d23" title="The kind of fault this instruction has generated.">fault</a>;
<a name="l00238"></a>00238 }
<a name="l00239"></a>00239 
<a name="l00240"></a>00240 <a class="code" href="classRefCountingPtr.html">Fault</a>
<a name="l00241"></a><a class="code" href="classInOrderDynInst.html#ab3f2aeb270629a7b0f6c0e00e6e9d244">00241</a> <a class="code" href="classInOrderDynInst.html#ab3f2aeb270629a7b0f6c0e00e6e9d244" title="Initiates a memory access - Calculate Eff.">InOrderDynInst::initiateAcc</a>()
<a name="l00242"></a>00242 {
<a name="l00243"></a>00243     <span class="comment">// @todo: Pretty convoluted way to avoid squashing from happening</span>
<a name="l00244"></a>00244     <span class="comment">// when using the TC during an instruction&#39;s execution</span>
<a name="l00245"></a>00245     <span class="comment">// (specifically for instructions that have side-effects that use</span>
<a name="l00246"></a>00246     <span class="comment">// the TC).  Fix this.</span>
<a name="l00247"></a>00247     <span class="keywordtype">bool</span> no_squash_from_TC = this-&gt;<a class="code" href="classInOrderDynInst.html#a500edf08ee330a9d322350d04912446a" title="Pointer to the thread state.">thread</a>-&gt;<a class="code" href="classInOrderThreadState.html#af92d5060cb1bfc23d36792cf8b7c6070">noSquashFromTC</a>;
<a name="l00248"></a>00248     this-&gt;<a class="code" href="classInOrderDynInst.html#a500edf08ee330a9d322350d04912446a" title="Pointer to the thread state.">thread</a>-&gt;<a class="code" href="classInOrderThreadState.html#af92d5060cb1bfc23d36792cf8b7c6070">noSquashFromTC</a> = <span class="keyword">true</span>;
<a name="l00249"></a>00249 
<a name="l00250"></a>00250     this-&gt;<a class="code" href="classInOrderDynInst.html#a0c47eef00f4f66677d62a462bd6c3d23" title="The kind of fault this instruction has generated.">fault</a> = this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;initiateAcc(<span class="keyword">this</span>, this-&gt;<a class="code" href="classInOrderDynInst.html#ab217528a74753e2629c7185aecf28af6" title="InstRecord that tracks this instructions.">traceData</a>);
<a name="l00251"></a>00251 
<a name="l00252"></a>00252     this-&gt;<a class="code" href="classInOrderDynInst.html#a500edf08ee330a9d322350d04912446a" title="Pointer to the thread state.">thread</a>-&gt;<a class="code" href="classInOrderThreadState.html#af92d5060cb1bfc23d36792cf8b7c6070">noSquashFromTC</a> = no_squash_from_TC;
<a name="l00253"></a>00253 
<a name="l00254"></a>00254     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classInOrderDynInst.html#a0c47eef00f4f66677d62a462bd6c3d23" title="The kind of fault this instruction has generated.">fault</a>;
<a name="l00255"></a>00255 }
<a name="l00256"></a>00256 
<a name="l00257"></a>00257 
<a name="l00258"></a>00258 <a class="code" href="classRefCountingPtr.html">Fault</a>
<a name="l00259"></a><a class="code" href="classInOrderDynInst.html#a237d813d2bc190850460d66b6306c07a">00259</a> <a class="code" href="classInOrderDynInst.html#a237d813d2bc190850460d66b6306c07a" title="Completes a memory access - Only valid for memory operations.">InOrderDynInst::completeAcc</a>(<a class="code" href="classPacket.html" title="A Packet is used to encapsulate a transfer between two objects in the memory system (e...">Packet</a> *pkt)
<a name="l00260"></a>00260 {
<a name="l00261"></a>00261     this-&gt;<a class="code" href="classInOrderDynInst.html#a0c47eef00f4f66677d62a462bd6c3d23" title="The kind of fault this instruction has generated.">fault</a> = this-&gt;<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;completeAcc(pkt, <span class="keyword">this</span>, this-&gt;<a class="code" href="classInOrderDynInst.html#ab217528a74753e2629c7185aecf28af6" title="InstRecord that tracks this instructions.">traceData</a>);
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classInOrderDynInst.html#a0c47eef00f4f66677d62a462bd6c3d23" title="The kind of fault this instruction has generated.">fault</a>;
<a name="l00264"></a>00264 }
<a name="l00265"></a>00265 
<a name="l00266"></a>00266 <a class="code" href="classRefCountingPtr.html">Fault</a>
<a name="l00267"></a><a class="code" href="classInOrderDynInst.html#a69a99cc4d945a7b6c37e4af939a94468">00267</a> <a class="code" href="classInOrderDynInst.html#a69a99cc4d945a7b6c37e4af939a94468" title="Read Effective Address from instruction &amp;amp; do memory access.">InOrderDynInst::memAccess</a>()
<a name="l00268"></a>00268 {
<a name="l00269"></a>00269     <span class="keywordflow">return</span> <a class="code" href="classInOrderDynInst.html#ab3f2aeb270629a7b0f6c0e00e6e9d244" title="Initiates a memory access - Calculate Eff.">initiateAcc</a>();
<a name="l00270"></a>00270 }
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 
<a name="l00273"></a>00273 <a class="code" href="classRefCountingPtr.html">Fault</a>
<a name="l00274"></a><a class="code" href="classInOrderDynInst.html#a3129f9a5518c07e315b4fc9d2082a4a4">00274</a> <a class="code" href="classInOrderDynInst.html#a3129f9a5518c07e315b4fc9d2082a4a4" title="Calls a syscall.">InOrderDynInst::hwrei</a>()
<a name="l00275"></a>00275 {
<a name="l00276"></a>00276 <span class="preprocessor">#if THE_ISA == ALPHA_ISA</span>
<a name="l00277"></a>00277 <span class="preprocessor"></span>    <span class="comment">// Can only do a hwrei when in pal mode.</span>
<a name="l00278"></a>00278     <span class="keywordflow">if</span> (!(this-&gt;<a class="code" href="classInOrderDynInst.html#a573a468663800ca48d378cd9f4bb7a77">instAddr</a>() &amp; 0x3))
<a name="l00279"></a>00279         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classAlphaISA_1_1UnimplementedOpcodeFault.html">AlphaISA::UnimplementedOpcodeFault</a>;
<a name="l00280"></a>00280 
<a name="l00281"></a>00281     <span class="comment">// Set the next PC based on the value of the EXC_ADDR IPR.</span>
<a name="l00282"></a>00282     <a class="code" href="classGenericISA_1_1SimplePCState.html">AlphaISA::PCState</a> <a class="code" href="classInOrderDynInst.html#a7502d0e459302e8090508a7a512b259a" title="PC of this instruction.">pc</a> = this-&gt;<a class="code" href="classInOrderDynInst.html#a791e0e94179d143ca138d781985a93c5" title="Read the PC of this instruction.">pcState</a>();
<a name="l00283"></a>00283     pc.<a class="code" href="classGenericISA_1_1SimplePCState.html#adfabba4b256ce38aeb20657ed6a5b00b">npc</a>(this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#acc7b4ce6dbb3f18aa4a9eb7f79c89d7c" title="Reads a miscellaneous register.">readMiscRegNoEffect</a>(<a class="code" href="namespaceAlphaISA.html#a238bbb397f48622c2b00b5727f1f0c9aa181636d9fceb00536ad3e36c02f9b56f">AlphaISA::IPR_EXC_ADDR</a>,
<a name="l00284"></a>00284                                           this-&gt;threadNumber));
<a name="l00285"></a>00285     this-&gt;<a class="code" href="classInOrderDynInst.html#a791e0e94179d143ca138d781985a93c5" title="Read the PC of this instruction.">pcState</a>(pc);
<a name="l00286"></a>00286     <span class="keywordflow">if</span> (<a class="code" href="classCPA.html#a7c7b6e4839b3111a143209b7b46a46fd">CPA::available</a>()) {
<a name="l00287"></a>00287         <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc = this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#ac749a703dd78256850e871e628b07075" title="Returns a pointer to a thread context.">tcBase</a>(this-&gt;<a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>);
<a name="l00288"></a>00288         <a class="code" href="classCPA.html#a4718b022c7e507cc0c9dbb1e0dade621">CPA::cpa</a>()-&gt;<a class="code" href="classCPA.html#a1dfb0c2ea66bda04f95bf040bacd0642">swAutoBegin</a>(tc, this-&gt;<a class="code" href="classInOrderDynInst.html#ae5bc1c222cee5bdd28961e30d0c0d062">nextInstAddr</a>());
<a name="l00289"></a>00289     }
<a name="l00290"></a>00290 
<a name="l00291"></a>00291     <span class="comment">// Tell CPU to clear any state it needs to if a hwrei is taken.</span>
<a name="l00292"></a>00292     this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a1a368806b237012f99d27e6b0d39be35" title="HW return from error interrupt.">hwrei</a>(this-&gt;<a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>);
<a name="l00293"></a>00293 <span class="preprocessor">#endif</span>
<a name="l00294"></a>00294 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>;
<a name="l00295"></a>00295 }
<a name="l00296"></a>00296 
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 <span class="keywordtype">void</span>
<a name="l00299"></a><a class="code" href="classInOrderDynInst.html#a6104bf17fd98aa9790a583a31cf6009f">00299</a> <a class="code" href="classInOrderDynInst.html#a6104bf17fd98aa9790a583a31cf6009f" title="Traps to handle specified fault.">InOrderDynInst::trap</a>(<a class="code" href="classRefCountingPtr.html">Fault</a> fault)
<a name="l00300"></a>00300 {
<a name="l00301"></a>00301     this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a501137b42b356a6a5edeb46e9b754f1b" title="Perform trap to Handle Given Fault.">trap</a>(fault, this-&gt;<a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <span class="keyword">this</span>);
<a name="l00302"></a>00302 }
<a name="l00303"></a>00303 
<a name="l00304"></a>00304 
<a name="l00305"></a>00305 <span class="keywordtype">bool</span>
<a name="l00306"></a><a class="code" href="classInOrderDynInst.html#af739f2a76b6ec2067f6ab387cf2dc242">00306</a> <a class="code" href="classInOrderDynInst.html#af739f2a76b6ec2067f6ab387cf2dc242">InOrderDynInst::simPalCheck</a>(<span class="keywordtype">int</span> palFunc)
<a name="l00307"></a>00307 {
<a name="l00308"></a>00308 <span class="preprocessor">#if THE_ISA != ALPHA_ISA</span>
<a name="l00309"></a>00309 <span class="preprocessor"></span>    <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;simPalCheck called, but PAL only exists in Alpha!\n&quot;</span>);
<a name="l00310"></a>00310 <span class="preprocessor">#endif</span>
<a name="l00311"></a>00311 <span class="preprocessor"></span>    <span class="keywordflow">return</span> this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a213481aa646369e2fae1c3be2e2e5c69">simPalCheck</a>(palFunc, this-&gt;<a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>);
<a name="l00312"></a>00312 }
<a name="l00313"></a>00313 
<a name="l00314"></a>00314 <span class="keywordtype">void</span>
<a name="l00315"></a><a class="code" href="classInOrderDynInst.html#a22018e64310512c7fe86fe05731dc33a">00315</a> <a class="code" href="classInOrderDynInst.html#a22018e64310512c7fe86fe05731dc33a" title="Emulates a syscall.">InOrderDynInst::syscall</a>(int64_t callnum)
<a name="l00316"></a>00316 {
<a name="l00317"></a>00317     <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370" title="The FullSystem variable can be used to determine the current mode of simulation.">FullSystem</a>)
<a name="l00318"></a>00318         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Syscall emulation isn&#39;t available in FS mode.\n&quot;</span>);
<a name="l00319"></a>00319 
<a name="l00320"></a>00320     <a class="code" href="classInOrderDynInst.html#ac37ef0302517e7bd17a30bee456068eb">syscallNum</a> = callnum;
<a name="l00321"></a>00321     <a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a8e347ecdce2f68b92e7d969c8ef78968" title="Schedule a syscall on the CPU.">syscallContext</a>(<a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>, this-&gt;<a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <span class="keyword">this</span>);
<a name="l00322"></a>00322 }
<a name="l00323"></a>00323 
<a name="l00324"></a>00324 <span class="keywordtype">void</span>
<a name="l00325"></a><a class="code" href="classInOrderDynInst.html#a6d2a24e11aa1cc328d6b4e3fe09a524b">00325</a> <a class="code" href="classInOrderDynInst.html#a6d2a24e11aa1cc328d6b4e3fe09a524b">InOrderDynInst::setSquashInfo</a>(<span class="keywordtype">unsigned</span> stage_num)
<a name="l00326"></a>00326 {
<a name="l00327"></a>00327     <a class="code" href="classInOrderDynInst.html#a6307bea80b4413280abeecc1d0fc0115">squashingStage</a> = stage_num;
<a name="l00328"></a>00328 
<a name="l00329"></a>00329     <span class="comment">// If it&#39;s a fault, then we need to squash</span>
<a name="l00330"></a>00330     <span class="comment">// the faulting instruction too. Squash</span>
<a name="l00331"></a>00331     <span class="comment">// functions squash above a seqNum, so we</span>
<a name="l00332"></a>00332     <span class="comment">// decrement here for that case</span>
<a name="l00333"></a>00333     <span class="keywordflow">if</span> (<a class="code" href="classInOrderDynInst.html#a0c47eef00f4f66677d62a462bd6c3d23" title="The kind of fault this instruction has generated.">fault</a> != <a class="code" href="fault__fwd_8hh.html#ab8ce3b69a6737f63fcdcf99910feb153">NoFault</a>) {
<a name="l00334"></a>00334         <a class="code" href="classInOrderDynInst.html#afad3e8f4979779b5ef8ccf6f018fa3ae" title="If this instruction is squashing, the number should we squash behind.">squashSeqNum</a> = <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a> - 1;
<a name="l00335"></a>00335         <span class="keywordflow">return</span>;
<a name="l00336"></a>00336     } <span class="keywordflow">else</span>
<a name="l00337"></a>00337         <a class="code" href="classInOrderDynInst.html#afad3e8f4979779b5ef8ccf6f018fa3ae" title="If this instruction is squashing, the number should we squash behind.">squashSeqNum</a> = <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>;
<a name="l00338"></a>00338 
<a name="l00339"></a>00339 <span class="preprocessor">#if ISA_HAS_DELAY_SLOT</span>
<a name="l00340"></a>00340 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a> &amp;&amp; <a class="code" href="classInOrderDynInst.html#a0031a10698b45fcd046d3d10ccf46340">isControl</a>()) {
<a name="l00341"></a>00341         <a class="code" href="namespaceAlphaISA.html#a233e755911c9143f96bef37eedb1e009">TheISA::PCState</a> nextPC = <a class="code" href="classInOrderDynInst.html#a7502d0e459302e8090508a7a512b259a" title="PC of this instruction.">pc</a>;
<a name="l00342"></a>00342         <a class="code" href="namespaceAlphaISA.html#add1b209af0281827d9ac0a67747a3bf7">TheISA::advancePC</a>(nextPC, <a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>);
<a name="l00343"></a>00343 
<a name="l00344"></a>00344         <span class="comment">// Check to see if we should squash after the</span>
<a name="l00345"></a>00345         <span class="comment">// branch or after a branch delay slot.</span>
<a name="l00346"></a>00346         <span class="keywordflow">if</span> (<a class="code" href="classInOrderDynInst.html#a7502d0e459302e8090508a7a512b259a" title="PC of this instruction.">pc</a>.nextInstAddr() == <a class="code" href="classInOrderDynInst.html#a7502d0e459302e8090508a7a512b259a" title="PC of this instruction.">pc</a>.instAddr() + <span class="keyword">sizeof</span>(MachInst))
<a name="l00347"></a>00347             <a class="code" href="classInOrderDynInst.html#afad3e8f4979779b5ef8ccf6f018fa3ae" title="If this instruction is squashing, the number should we squash behind.">squashSeqNum</a> = <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a> + 1;
<a name="l00348"></a>00348         <span class="keywordflow">else</span>
<a name="l00349"></a>00349             <a class="code" href="classInOrderDynInst.html#afad3e8f4979779b5ef8ccf6f018fa3ae" title="If this instruction is squashing, the number should we squash behind.">squashSeqNum</a> = <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>;
<a name="l00350"></a>00350     }
<a name="l00351"></a>00351 <span class="preprocessor">#endif</span>
<a name="l00352"></a>00352 <span class="preprocessor"></span>}
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 <span class="keywordtype">void</span>
<a name="l00355"></a><a class="code" href="classInOrderDynInst.html#a2539813b92f1979c208cbee33d76fc36">00355</a> <a class="code" href="classInOrderDynInst.html#a2539813b92f1979c208cbee33d76fc36" title="Release a Resource Request (Currently Unused).">InOrderDynInst::releaseReq</a>(<a class="code" href="classResourceRequest.html">ResourceRequest</a>* req)
<a name="l00356"></a>00356 {
<a name="l00357"></a>00357     <a class="code" href="classstd_1_1list.html" title="STL list class.">std::list&lt;ResourceRequest*&gt;::iterator</a> list_it = <a class="code" href="classInOrderDynInst.html#a617a620da813a60c64b3f337d688419b" title="List of active resource requests for this instruction.">reqList</a>.begin();
<a name="l00358"></a>00358     <a class="code" href="classstd_1_1list.html" title="STL list class.">std::list&lt;ResourceRequest*&gt;::iterator</a> list_end = <a class="code" href="classInOrderDynInst.html#a617a620da813a60c64b3f337d688419b" title="List of active resource requests for this instruction.">reqList</a>.end();
<a name="l00359"></a>00359 
<a name="l00360"></a>00360     <span class="keywordflow">while</span>(list_it != list_end) {
<a name="l00361"></a>00361         <span class="keywordflow">if</span>((*list_it)-&gt;getResIdx() == req-&gt;<a class="code" href="classResourceRequest.html#a4872a96ad0e8767d9ee0c5f174ed3500" title="Get Resource Index.">getResIdx</a>() &amp;&amp;
<a name="l00362"></a>00362            (*list_it)-&gt;getSlot() == req-&gt;<a class="code" href="classResourceRequest.html#a0a82e350f53be464a0342efff52ae9ac" title="Get Slot Number.">getSlot</a>()) {
<a name="l00363"></a>00363             <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;[tid:%u]: [sn:%i] Done with request &quot;</span>
<a name="l00364"></a>00364                     <span class="stringliteral">&quot;to %s.\n&quot;</span>, <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, req-&gt;<a class="code" href="classResourceRequest.html#a5270efeaf8fa712a767448799431232a" title="Pointer to Resource that is being used.">res</a>-&gt;<a class="code" href="classResource.html#a0dc98d91cd7aefea8225c28e3e799f6f" title="Return name of this resource.">name</a>());
<a name="l00365"></a>00365             <a class="code" href="classInOrderDynInst.html#a617a620da813a60c64b3f337d688419b" title="List of active resource requests for this instruction.">reqList</a>.erase(list_it);
<a name="l00366"></a>00366             <span class="keywordflow">return</span>;
<a name="l00367"></a>00367         }
<a name="l00368"></a>00368         list_it++;
<a name="l00369"></a>00369     }
<a name="l00370"></a>00370 
<a name="l00371"></a>00371     <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Releasing Res. Request That Isnt There!\n&quot;</span>);
<a name="l00372"></a>00372 }
<a name="l00373"></a>00373 
<a name="l00375"></a>00375 <span class="keywordtype">void</span>
<a name="l00376"></a><a class="code" href="classInOrderDynInst.html#a424b43629fc8415f70baf0e9e073a6d7">00376</a> <a class="code" href="classInOrderDynInst.html#a424b43629fc8415f70baf0e9e073a6d7" title="Functions that sets an integer or floating point source register to a value.">InOrderDynInst::setIntSrc</a>(<span class="keywordtype">int</span> idx, uint64_t <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>)
<a name="l00377"></a>00377 {
<a name="l00378"></a>00378     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;[tid:%i]: [sn:%i] [src:%i] Int being set &quot;</span>
<a name="l00379"></a>00379             <span class="stringliteral">&quot;to %#x.\n&quot;</span>, <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, idx, val);
<a name="l00380"></a>00380     <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstValue.html#a2405a42912f51dee4f0f18d44829af02">intVal</a> = val;
<a name="l00381"></a>00381 }
<a name="l00382"></a>00382 
<a name="l00384"></a>00384 <span class="keywordtype">void</span>
<a name="l00385"></a><a class="code" href="classInOrderDynInst.html#a52c483a9728a57b0bcaa0897674653fc">00385</a> <a class="code" href="classInOrderDynInst.html#a52c483a9728a57b0bcaa0897674653fc" title="Records an fp register being set to a value.">InOrderDynInst::setFloatSrc</a>(<span class="keywordtype">int</span> idx, <a class="code" href="classInOrderDynInst.html#aa0f55f3308ffa22a2b5888ed9c50f505">FloatReg</a> <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>)
<a name="l00386"></a>00386 {
<a name="l00387"></a>00387     <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstValue.html#a89939616d98f0980c412d4d6faffdcb9">fpVal</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#a4414acaa34b2abb2dc6c4f16ed1c655e">f</a> = val;
<a name="l00388"></a>00388     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;[tid:%i]: [sn:%i] [src:%i] FP being set &quot;</span>
<a name="l00389"></a>00389             <span class="stringliteral">&quot;to %x, %08f...%08f\n&quot;</span>, <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, idx,
<a name="l00390"></a>00390             <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].fpVal.<a class="code" href="structInOrderDynInst_1_1InstValue.html#aef3e3c2f465c242a9a19095988c956f9">i</a>, <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstValue.html#a89939616d98f0980c412d4d6faffdcb9">fpVal</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#a4414acaa34b2abb2dc6c4f16ed1c655e">f</a>, val);
<a name="l00391"></a>00391 }
<a name="l00392"></a>00392 
<a name="l00394"></a>00394 <span class="keywordtype">void</span>
<a name="l00395"></a>00395 <a class="code" href="classInOrderDynInst.html#a7890943173cd0322a153805cc461e698">InOrderDynInst::setFloatRegBitsSrc</a>(<span class="keywordtype">int</span> idx, <a class="code" href="namespaceAlphaISA.html#a320a4070bf0f71a598dac381b6afe14e">FloatRegBits</a> <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>)
<a name="l00396"></a>00396 {
<a name="l00397"></a>00397     <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstValue.html#a89939616d98f0980c412d4d6faffdcb9">fpVal</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#aef3e3c2f465c242a9a19095988c956f9">i</a> = val;
<a name="l00398"></a>00398     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;[tid:%i]: [sn:%i] [src:%i] FPBits being set &quot;</span>
<a name="l00399"></a>00399             <span class="stringliteral">&quot;to %x, %08f...%x\n&quot;</span>, <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, idx,
<a name="l00400"></a>00400             <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].fpVal.<a class="code" href="structInOrderDynInst_1_1InstValue.html#aef3e3c2f465c242a9a19095988c956f9">i</a>, <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstValue.html#a89939616d98f0980c412d4d6faffdcb9">fpVal</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#a4414acaa34b2abb2dc6c4f16ed1c655e">f</a>, val);
<a name="l00401"></a>00401 }
<a name="l00402"></a>00402 
<a name="l00404"></a>00404 <a class="code" href="namespaceAlphaISA.html#ae185f053b1d897b270bee4cb348c742f">IntReg</a>
<a name="l00405"></a><a class="code" href="classInOrderDynInst.html#af738e59ef0d45c2f50b755a3d478f2c4">00405</a> <a class="code" href="classInOrderDynInst.html#af738e59ef0d45c2f50b755a3d478f2c4" title="These Instructions read a integer/float/misc.">InOrderDynInst::readIntRegOperand</a>(<span class="keyword">const</span> <a class="code" href="classStaticInst.html" title="Base, ISA-independent static instruction class.">StaticInst</a> *<a class="code" href="namespacePowerISA.html#a53469916ca59ded1955f23a592f32f41">si</a>, <span class="keywordtype">int</span> idx, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l00406"></a>00406 {
<a name="l00407"></a>00407     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;[tid:%i]: [sn:%i] [src:%i] IntVal read as %#x.\n&quot;</span>,
<a name="l00408"></a>00408             <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, idx, <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].intVal);
<a name="l00409"></a>00409     <span class="keywordflow">return</span> <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstValue.html#a2405a42912f51dee4f0f18d44829af02">intVal</a>;
<a name="l00410"></a>00410 }
<a name="l00411"></a>00411 
<a name="l00413"></a>00413 <a class="code" href="namespaceAlphaISA.html#a9dc38d5e1803de53d6bf5d15e22bad7f">FloatReg</a>
<a name="l00414"></a><a class="code" href="classInOrderDynInst.html#a8305d1e2e45c48eb50347812a825f319">00414</a> <a class="code" href="classInOrderDynInst.html#a8305d1e2e45c48eb50347812a825f319" title="Reads a FP register.">InOrderDynInst::readFloatRegOperand</a>(<span class="keyword">const</span> <a class="code" href="classStaticInst.html" title="Base, ISA-independent static instruction class.">StaticInst</a> *<a class="code" href="namespacePowerISA.html#a53469916ca59ded1955f23a592f32f41">si</a>, <span class="keywordtype">int</span> idx)
<a name="l00415"></a>00415 {
<a name="l00416"></a>00416     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;[tid:%i]: [sn:%i] [src:%i] FPVal being read &quot;</span>
<a name="l00417"></a>00417             <span class="stringliteral">&quot;as %x, %08f.\n&quot;</span>, <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, idx,
<a name="l00418"></a>00418             <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].fpVal.<a class="code" href="structInOrderDynInst_1_1InstValue.html#aef3e3c2f465c242a9a19095988c956f9">i</a>, <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstValue.html#a89939616d98f0980c412d4d6faffdcb9">fpVal</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#a4414acaa34b2abb2dc6c4f16ed1c655e">f</a>);
<a name="l00419"></a>00419     <span class="keywordflow">return</span> <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstValue.html#a89939616d98f0980c412d4d6faffdcb9">fpVal</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#a4414acaa34b2abb2dc6c4f16ed1c655e">f</a>;
<a name="l00420"></a>00420 }
<a name="l00421"></a>00421 
<a name="l00422"></a>00422 
<a name="l00424"></a>00424 <a class="code" href="namespaceAlphaISA.html#a320a4070bf0f71a598dac381b6afe14e">FloatRegBits</a>
<a name="l00425"></a><a class="code" href="classInOrderDynInst.html#abd61e17f770a341c428cfaa14cbb1c65">00425</a> <a class="code" href="classInOrderDynInst.html#abd61e17f770a341c428cfaa14cbb1c65" title="Reads a FP register as a integer.">InOrderDynInst::readFloatRegOperandBits</a>(<span class="keyword">const</span> <a class="code" href="classStaticInst.html" title="Base, ISA-independent static instruction class.">StaticInst</a> *<a class="code" href="namespacePowerISA.html#a53469916ca59ded1955f23a592f32f41">si</a>, <span class="keywordtype">int</span> idx)
<a name="l00426"></a>00426 {
<a name="l00427"></a>00427     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;[tid:%i]: [sn:%i] [src:%i] FPBits being read &quot;</span>
<a name="l00428"></a>00428             <span class="stringliteral">&quot;as %x, %08f.\n&quot;</span>, <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, idx,
<a name="l00429"></a>00429             <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].fpVal.<a class="code" href="structInOrderDynInst_1_1InstValue.html#aef3e3c2f465c242a9a19095988c956f9">i</a>, <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstValue.html#a89939616d98f0980c412d4d6faffdcb9">fpVal</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#a4414acaa34b2abb2dc6c4f16ed1c655e">f</a>);
<a name="l00430"></a>00430     <span class="keywordflow">return</span> <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstValue.html#a89939616d98f0980c412d4d6faffdcb9">fpVal</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#aef3e3c2f465c242a9a19095988c956f9">i</a>;
<a name="l00431"></a>00431 }
<a name="l00432"></a>00432 
<a name="l00434"></a>00434 <a class="code" href="namespaceAlphaISA.html#a77bad56584821a5741ae1512cc6f524b">MiscReg</a>
<a name="l00435"></a><a class="code" href="classInOrderDynInst.html#a7fdc839c4bc8d4a1e66f8d76cec00596">00435</a> <a class="code" href="classInOrderDynInst.html#a7fdc839c4bc8d4a1e66f8d76cec00596" title="Reads a miscellaneous register.">InOrderDynInst::readMiscReg</a>(<span class="keywordtype">int</span> misc_reg)
<a name="l00436"></a>00436 {
<a name="l00437"></a>00437     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#ab050f0ce311305dcc0396f290966bd43" title="Reads a misc.">readMiscReg</a>(misc_reg, <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>);
<a name="l00438"></a>00438 }
<a name="l00439"></a>00439 
<a name="l00440"></a>00440 
<a name="l00444"></a>00444 <a class="code" href="namespaceAlphaISA.html#a77bad56584821a5741ae1512cc6f524b">MiscReg</a>
<a name="l00445"></a><a class="code" href="classInOrderDynInst.html#adab08b330574c74e9d96eae29d25e09f">00445</a> <a class="code" href="classInOrderDynInst.html#adab08b330574c74e9d96eae29d25e09f" title="Reads a misc.">InOrderDynInst::readMiscRegOperand</a>(<span class="keyword">const</span> <a class="code" href="classStaticInst.html" title="Base, ISA-independent static instruction class.">StaticInst</a> *<a class="code" href="namespacePowerISA.html#a53469916ca59ded1955f23a592f32f41">si</a>, <span class="keywordtype">int</span> idx)
<a name="l00446"></a>00446 {
<a name="l00447"></a>00447     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;[tid:%i]: [sn:%i] Misc. Reg Source Value %i&quot;</span>
<a name="l00448"></a>00448             <span class="stringliteral">&quot; read as %#x.\n&quot;</span>, <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, idx,
<a name="l00449"></a>00449             <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].intVal);
<a name="l00450"></a>00450     <span class="keywordflow">return</span> <a class="code" href="classInOrderDynInst.html#aa7b90c3c0f87de24563c991d9d1ba4a5" title="The source of the instruction; assumes for now that there&amp;#39;s only one destination register...">instSrc</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstValue.html#a2405a42912f51dee4f0f18d44829af02">intVal</a>;
<a name="l00451"></a>00451 }
<a name="l00452"></a>00452 
<a name="l00453"></a>00453 
<a name="l00457"></a>00457 <span class="keywordtype">void</span>
<a name="l00458"></a><a class="code" href="classInOrderDynInst.html#a1e1653b1e95e4d37754943d246b3d0ee">00458</a> <a class="code" href="classInOrderDynInst.html#a1e1653b1e95e4d37754943d246b3d0ee" title="Sets a misc.">InOrderDynInst::setMiscRegOperand</a>(<span class="keyword">const</span> <a class="code" href="classStaticInst.html" title="Base, ISA-independent static instruction class.">StaticInst</a> *<a class="code" href="namespacePowerISA.html#a53469916ca59ded1955f23a592f32f41">si</a>, <span class="keywordtype">int</span> idx,
<a name="l00459"></a>00459                        <span class="keyword">const</span> <a class="code" href="classInOrderDynInst.html#a9fa5231557463a6c444dde00eb47da2f">MiscReg</a> &amp;<a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>)
<a name="l00460"></a>00460 {
<a name="l00461"></a>00461     <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstResult.html#a98a84d18361a7cb564884c4023451a83">type</a> = Integer;
<a name="l00462"></a>00462     <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstResult.html#a41c9683c8a64119ca85d1ffd5ea7d5a0">res</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#a2405a42912f51dee4f0f18d44829af02">intVal</a> = val;
<a name="l00463"></a>00463     <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstResult.html#a13ca80277a1e00a934a0a7dfb1e99a9b">tick</a> = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The current simulated tick.">curTick</a>();
<a name="l00464"></a>00464 
<a name="l00465"></a>00465     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;[tid:%i]: [sn:%i] Setting Misc Reg. Operand %i &quot;</span>
<a name="l00466"></a>00466             <span class="stringliteral">&quot;being set to %#x.\n&quot;</span>, <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, idx, val);
<a name="l00467"></a>00467 }
<a name="l00468"></a>00468 
<a name="l00469"></a>00469 <a class="code" href="namespaceAlphaISA.html#a77bad56584821a5741ae1512cc6f524b">MiscReg</a>
<a name="l00470"></a><a class="code" href="classInOrderDynInst.html#ad5c36eaf76fdb56ebf36a13c9c7a122c">00470</a> <a class="code" href="classInOrderDynInst.html#ad5c36eaf76fdb56ebf36a13c9c7a122c">InOrderDynInst::readRegOtherThread</a>(<span class="keywordtype">unsigned</span> reg_idx, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l00471"></a>00471 {
<a name="l00472"></a>00472     <span class="keywordflow">if</span> (tid == -1) {
<a name="l00473"></a>00473         tid = <a class="code" href="namespaceAlphaISA.html#a7956606c6fe17700d24242789ae5002c">TheISA::getTargetThread</a>(this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#ac749a703dd78256850e871e628b07075" title="Returns a pointer to a thread context.">tcBase</a>(<a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>));
<a name="l00474"></a>00474     }
<a name="l00475"></a>00475 
<a name="l00476"></a>00476     <span class="keywordflow">if</span> (reg_idx &lt; <a class="code" href="namespaceAlphaISA.html#a942a03a0f7360391b1b6cf838c74b01ca675319a87996ecc87e14daadaafe7424">FP_Base_DepTag</a>) {                   <span class="comment">// Integer Register File</span>
<a name="l00477"></a>00477         <span class="keywordflow">return</span> this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a79d73d94acf7619a4715ef2f90bcdff8" title="Register file accessors.">readIntReg</a>(reg_idx, tid);
<a name="l00478"></a>00478     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (reg_idx &lt; <a class="code" href="namespaceAlphaISA.html#a942a03a0f7360391b1b6cf838c74b01ca34e953853d6e63b34f9febd0e691da0c">Ctrl_Base_DepTag</a>) {          <span class="comment">// Float Register File</span>
<a name="l00479"></a>00479         reg_idx -= FP_Base_DepTag;
<a name="l00480"></a>00480         <span class="keywordflow">return</span> this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a1c3b4575a1c31986340477eb848ef495">readFloatRegBits</a>(reg_idx, tid);
<a name="l00481"></a>00481     } <span class="keywordflow">else</span> {
<a name="l00482"></a>00482         reg_idx -= Ctrl_Base_DepTag;
<a name="l00483"></a>00483         <span class="keywordflow">return</span> this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#ab050f0ce311305dcc0396f290966bd43" title="Reads a misc.">readMiscReg</a>(reg_idx, tid);  <span class="comment">// Misc. Register File</span>
<a name="l00484"></a>00484     }
<a name="l00485"></a>00485 }
<a name="l00486"></a>00486 
<a name="l00488"></a>00488 <span class="keywordtype">void</span>
<a name="l00489"></a><a class="code" href="classInOrderDynInst.html#ae9325308aca8f2f0c53d55c9df8cff6a">00489</a> <a class="code" href="classInOrderDynInst.html#ae9325308aca8f2f0c53d55c9df8cff6a" title="This is the interface that an instruction will use to write it&amp;#39;s destination register.">InOrderDynInst::setIntRegOperand</a>(<span class="keyword">const</span> <a class="code" href="classStaticInst.html" title="Base, ISA-independent static instruction class.">StaticInst</a> *<a class="code" href="namespacePowerISA.html#a53469916ca59ded1955f23a592f32f41">si</a>, <span class="keywordtype">int</span> idx, <a class="code" href="classInOrderDynInst.html#adfb2a00f33dbc4b5419955bd8f4ec4a4">IntReg</a> <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>)
<a name="l00490"></a>00490 {
<a name="l00491"></a>00491     <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstResult.html#a98a84d18361a7cb564884c4023451a83">type</a> = Integer;
<a name="l00492"></a>00492     <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstResult.html#a41c9683c8a64119ca85d1ffd5ea7d5a0">res</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#a2405a42912f51dee4f0f18d44829af02">intVal</a> = val;
<a name="l00493"></a>00493     <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstResult.html#a13ca80277a1e00a934a0a7dfb1e99a9b">tick</a> = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The current simulated tick.">curTick</a>();
<a name="l00494"></a>00494 
<a name="l00495"></a>00495     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;[tid:%i]: [sn:%i] Setting Result Int Reg. %i &quot;</span>
<a name="l00496"></a>00496             <span class="stringliteral">&quot;being set to %#x (result-tick:%i).\n&quot;</span>,
<a name="l00497"></a>00497             <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, idx, val, <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].tick);
<a name="l00498"></a>00498 }
<a name="l00499"></a>00499 
<a name="l00501"></a>00501 <span class="keywordtype">void</span>
<a name="l00502"></a><a class="code" href="classInOrderDynInst.html#a2e35859978dc08f482b5454f57d88a7c">00502</a> <a class="code" href="classInOrderDynInst.html#a2e35859978dc08f482b5454f57d88a7c" title="Sets a FP register.">InOrderDynInst::setFloatRegOperand</a>(<span class="keyword">const</span> <a class="code" href="classStaticInst.html" title="Base, ISA-independent static instruction class.">StaticInst</a> *<a class="code" href="namespacePowerISA.html#a53469916ca59ded1955f23a592f32f41">si</a>, <span class="keywordtype">int</span> idx, <a class="code" href="classInOrderDynInst.html#aa0f55f3308ffa22a2b5888ed9c50f505">FloatReg</a> <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>)
<a name="l00503"></a>00503 {
<a name="l00504"></a>00504     <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstResult.html#a98a84d18361a7cb564884c4023451a83">type</a> = Float;
<a name="l00505"></a>00505     <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstResult.html#a41c9683c8a64119ca85d1ffd5ea7d5a0">res</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#a89939616d98f0980c412d4d6faffdcb9">fpVal</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#a4414acaa34b2abb2dc6c4f16ed1c655e">f</a> = val;
<a name="l00506"></a>00506     <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstResult.html#a13ca80277a1e00a934a0a7dfb1e99a9b">tick</a> = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The current simulated tick.">curTick</a>();
<a name="l00507"></a>00507 
<a name="l00508"></a>00508     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;[tid:%i]: [sn:%i] Result Float Reg. %i &quot;</span>
<a name="l00509"></a>00509             <span class="stringliteral">&quot;being set to %#x, %08f (result-tick:%i).\n&quot;</span>,
<a name="l00510"></a>00510             <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, idx, val, val, <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].tick);
<a name="l00511"></a>00511 }
<a name="l00512"></a>00512 
<a name="l00514"></a>00514 <span class="keywordtype">void</span>
<a name="l00515"></a>00515 <a class="code" href="classInOrderDynInst.html#a7e03a3eee0c7cc0ce431407bb8496853">InOrderDynInst::setFloatRegOperandBits</a>(<span class="keyword">const</span> <a class="code" href="classStaticInst.html" title="Base, ISA-independent static instruction class.">StaticInst</a> *<a class="code" href="namespacePowerISA.html#a53469916ca59ded1955f23a592f32f41">si</a>, <span class="keywordtype">int</span> idx,
<a name="l00516"></a>00516                               <a class="code" href="namespaceAlphaISA.html#a320a4070bf0f71a598dac381b6afe14e">FloatRegBits</a> <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>)
<a name="l00517"></a>00517 {
<a name="l00518"></a>00518     <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstResult.html#a98a84d18361a7cb564884c4023451a83">type</a> = FloatBits;
<a name="l00519"></a>00519     <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstResult.html#a41c9683c8a64119ca85d1ffd5ea7d5a0">res</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#a89939616d98f0980c412d4d6faffdcb9">fpVal</a>.<a class="code" href="structInOrderDynInst_1_1InstValue.html#aef3e3c2f465c242a9a19095988c956f9">i</a> = val;
<a name="l00520"></a>00520     <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].<a class="code" href="structInOrderDynInst_1_1InstResult.html#a13ca80277a1e00a934a0a7dfb1e99a9b">tick</a> = <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The current simulated tick.">curTick</a>();
<a name="l00521"></a>00521 
<a name="l00522"></a>00522     <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classInOrderDynInst.html">InOrderDynInst</a>, <span class="stringliteral">&quot;[tid:%i]: [sn:%i] Result Float Reg. Bits %i &quot;</span>
<a name="l00523"></a>00523             <span class="stringliteral">&quot;being set to %#x (result-tick:%i).\n&quot;</span>,
<a name="l00524"></a>00524             <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a67c8de209e8d1ab12c7e57a1fe33aca0" title="The sequence number of the instruction.">seqNum</a>, idx, val, <a class="code" href="classInOrderDynInst.html#a40df5e0c42c0e1dc0264443aa06f8297" title="The result of the instruction; assumes for now that there&amp;#39;s only one destination register...">instResult</a>[idx].tick);
<a name="l00525"></a>00525 }
<a name="l00526"></a>00526 
<a name="l00530"></a>00530 <span class="comment">/* Alter this if/when wanting to *speculate* on Miscellaneous registers */</span>
<a name="l00531"></a>00531 <span class="keywordtype">void</span>
<a name="l00532"></a><a class="code" href="classInOrderDynInst.html#aaabee82680f0edf0e8d2d141adce56cd">00532</a> <a class="code" href="classInOrderDynInst.html#aaabee82680f0edf0e8d2d141adce56cd" title="Sets a misc.">InOrderDynInst::setMiscReg</a>(<span class="keywordtype">int</span> misc_reg, <span class="keyword">const</span> <a class="code" href="classInOrderDynInst.html#a9fa5231557463a6c444dde00eb47da2f">MiscReg</a> &amp;<a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>)
<a name="l00533"></a>00533 {
<a name="l00534"></a>00534     this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a30e01aa0c1bc60eddb1dffcca8f05665" title="Sets a misc.">setMiscReg</a>(misc_reg, val, <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>);
<a name="l00535"></a>00535 }
<a name="l00536"></a>00536 
<a name="l00537"></a>00537 <span class="keywordtype">void</span>
<a name="l00538"></a>00538 <a class="code" href="classInOrderDynInst.html#aadfe174cde787e9ad08f8c8e0c8ce6b0">InOrderDynInst::setRegOtherThread</a>(<span class="keywordtype">unsigned</span> reg_idx, <span class="keyword">const</span> <a class="code" href="namespaceAlphaISA.html#a77bad56584821a5741ae1512cc6f524b">MiscReg</a> &amp;<a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>,
<a name="l00539"></a>00539                                   <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid)
<a name="l00540"></a>00540 {
<a name="l00541"></a>00541     <span class="keywordflow">if</span> (tid == <a class="code" href="base_2types_8hh.html#a192b210a26f038691d0f095d85dc0953">InvalidThreadID</a>) {
<a name="l00542"></a>00542         tid = <a class="code" href="namespaceAlphaISA.html#a7956606c6fe17700d24242789ae5002c">TheISA::getTargetThread</a>(this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#ac749a703dd78256850e871e628b07075" title="Returns a pointer to a thread context.">tcBase</a>(<a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>));
<a name="l00543"></a>00543     }
<a name="l00544"></a>00544 
<a name="l00545"></a>00545     <span class="keywordflow">if</span> (reg_idx &lt; <a class="code" href="namespaceAlphaISA.html#a942a03a0f7360391b1b6cf838c74b01ca675319a87996ecc87e14daadaafe7424">FP_Base_DepTag</a>) {            <span class="comment">// Integer Register File</span>
<a name="l00546"></a>00546         this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#aa8de314eb1ca92ea7f9928c685507a55">setIntReg</a>(reg_idx, val, tid);
<a name="l00547"></a>00547     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (reg_idx &lt; <a class="code" href="namespaceAlphaISA.html#a942a03a0f7360391b1b6cf838c74b01ca34e953853d6e63b34f9febd0e691da0c">Ctrl_Base_DepTag</a>) {   <span class="comment">// Float Register File</span>
<a name="l00548"></a>00548         reg_idx -= FP_Base_DepTag;
<a name="l00549"></a>00549         this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a94b61cd8beca8df53579731d5666b35f">setFloatRegBits</a>(reg_idx, val, tid);
<a name="l00550"></a>00550     } <span class="keywordflow">else</span> {
<a name="l00551"></a>00551         reg_idx -= Ctrl_Base_DepTag;
<a name="l00552"></a>00552         this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a30e01aa0c1bc60eddb1dffcca8f05665" title="Sets a misc.">setMiscReg</a>(reg_idx, val, tid); <span class="comment">// Misc. Register File</span>
<a name="l00553"></a>00553     }
<a name="l00554"></a>00554 }
<a name="l00555"></a>00555 
<a name="l00556"></a>00556 <span class="keywordtype">void</span>
<a name="l00557"></a><a class="code" href="classInOrderDynInst.html#ae82a36a80e7e06c4c6dcde868d82984c">00557</a> <a class="code" href="classInOrderDynInst.html#ae82a36a80e7e06c4c6dcde868d82984c">InOrderDynInst::deallocateContext</a>(<span class="keywordtype">int</span> thread_num)
<a name="l00558"></a>00558 {
<a name="l00559"></a>00559     this-&gt;<a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classBaseCPU.html#a6aeab5d8cdf833d6f9d6f035a09b945b" title="Notify the CPU that the indicated context is now deallocated.">deallocateContext</a>(thread_num);
<a name="l00560"></a>00560 }
<a name="l00561"></a>00561 
<a name="l00562"></a>00562 <a class="code" href="classRefCountingPtr.html">Fault</a>
<a name="l00563"></a><a class="code" href="classInOrderDynInst.html#a87fb752a1b0f1d231323c0bce8e9c0eb">00563</a> <a class="code" href="classInOrderDynInst.html#a87fb752a1b0f1d231323c0bce8e9c0eb">InOrderDynInst::readMem</a>(<a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="namespaceX86ISA.html#a79b5c08c190167d17c9b9b3fd40112f6">addr</a>, uint8_t *data,
<a name="l00564"></a>00564                         <span class="keywordtype">unsigned</span> size, <span class="keywordtype">unsigned</span> flags)
<a name="l00565"></a>00565 {
<a name="l00566"></a>00566     <span class="keywordflow">return</span> <a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a1adfc5dd5f06c8cb44190af4275e45e6" title="Forwards an instruction read to the appropriate data resource (indexes into Resource Pool thru &amp;quot;...">read</a>(<span class="keyword">this</span>, addr, data, size, flags);
<a name="l00567"></a>00567 }
<a name="l00568"></a>00568 
<a name="l00569"></a>00569 <a class="code" href="classRefCountingPtr.html">Fault</a>
<a name="l00570"></a><a class="code" href="classInOrderDynInst.html#a4940b3dfd41e319ee73e24672067d1ce">00570</a> <a class="code" href="classInOrderDynInst.html#a4940b3dfd41e319ee73e24672067d1ce">InOrderDynInst::writeMem</a>(uint8_t *data, <span class="keywordtype">unsigned</span> size,
<a name="l00571"></a>00571                          <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="namespaceX86ISA.html#a79b5c08c190167d17c9b9b3fd40112f6">addr</a>, <span class="keywordtype">unsigned</span> flags, uint64_t *res)
<a name="l00572"></a>00572 {
<a name="l00573"></a>00573     <span class="keywordflow">return</span> <a class="code" href="classInOrderDynInst.html#a3895be079d93867f5acb27db77b20089" title="Pointer to the Impl&amp;#39;s CPU object.">cpu</a>-&gt;<a class="code" href="classInOrderCPU.html#a01d70441d2e4a22045c2ea825ed74dd7" title="Forwards an instruction write.">write</a>(<span class="keyword">this</span>, data, size, addr, flags, res);
<a name="l00574"></a>00574 }
<a name="l00575"></a>00575 
<a name="l00576"></a>00576 
<a name="l00577"></a>00577 <span class="keywordtype">void</span>
<a name="l00578"></a><a class="code" href="classInOrderDynInst.html#aa7c013bd5603fb8d48013dfa87414379">00578</a> <a class="code" href="classInOrderDynInst.html#aa7c013bd5603fb8d48013dfa87414379" title="Dumps out contents of this BaseDynInst.">InOrderDynInst::dump</a>()
<a name="l00579"></a>00579 {
<a name="l00580"></a>00580     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;T%d : %#08d `&quot;</span>, <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a>, <a class="code" href="classInOrderDynInst.html#a7502d0e459302e8090508a7a512b259a" title="PC of this instruction.">pc</a>.instAddr());
<a name="l00581"></a>00581     cout &lt;&lt; <a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;disassemble(<a class="code" href="classInOrderDynInst.html#a7502d0e459302e8090508a7a512b259a" title="PC of this instruction.">pc</a>.instAddr());
<a name="l00582"></a>00582     <a class="code" href="cprintf_8hh.html#a46231f0e413d30a2560384d0ae05536b">cprintf</a>(<span class="stringliteral">&quot;&#39;\n&quot;</span>);
<a name="l00583"></a>00583 }
<a name="l00584"></a>00584 
<a name="l00585"></a>00585 <span class="keywordtype">void</span>
<a name="l00586"></a><a class="code" href="classInOrderDynInst.html#a1d22baa183c52b2db33d179cfef2cbd4">00586</a> <a class="code" href="classInOrderDynInst.html#aa7c013bd5603fb8d48013dfa87414379" title="Dumps out contents of this BaseDynInst.">InOrderDynInst::dump</a>(std::string &amp;outstring)
<a name="l00587"></a>00587 {
<a name="l00588"></a>00588     std::ostringstream <a class="code" href="namespaceMipsISA.html#a36d11894e85e86352c6a5ddfd624fc7a">s</a>;
<a name="l00589"></a>00589     s &lt;&lt; <span class="stringliteral">&quot;T&quot;</span> &lt;&lt; <a class="code" href="classInOrderDynInst.html#a9346d194a71d6553fa70391a9e29b6f7" title="The thread this instruction is from.">threadNumber</a> &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; <a class="code" href="classInOrderDynInst.html#a7502d0e459302e8090508a7a512b259a" title="PC of this instruction.">pc</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span>
<a name="l00590"></a>00590       &lt;&lt; <a class="code" href="classInOrderDynInst.html#af57701a913008abc704c59a91c6ad042" title="The StaticInst used by this BaseDynInst.">staticInst</a>-&gt;disassemble(<a class="code" href="classInOrderDynInst.html#a7502d0e459302e8090508a7a512b259a" title="PC of this instruction.">pc</a>.instAddr());
<a name="l00591"></a>00591 
<a name="l00592"></a>00592     outstring = s.str();
<a name="l00593"></a>00593 }
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"><address style="align: right;"><small>
Generated on Sun Apr 7 2013 18:16:14 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.7.1</small></address>

</body>
</html>
