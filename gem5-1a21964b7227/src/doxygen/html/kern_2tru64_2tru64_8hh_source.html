<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gem5: kern/tru64/tru64.hh Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>kern/tru64/tru64.hh</h1>  </div>
</div>
<div class="contents">
<a href="kern_2tru64_2tru64_8hh.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2001-2005 The Regents of The University of Michigan</span>
<a name="l00003"></a>00003 <span class="comment"> * All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00006"></a>00006 <span class="comment"> * modification, are permitted provided that the following conditions are</span>
<a name="l00007"></a>00007 <span class="comment"> * met: redistributions of source code must retain the above copyright</span>
<a name="l00008"></a>00008 <span class="comment"> * notice, this list of conditions and the following disclaimer;</span>
<a name="l00009"></a>00009 <span class="comment"> * redistributions in binary form must reproduce the above copyright</span>
<a name="l00010"></a>00010 <span class="comment"> * notice, this list of conditions and the following disclaimer in the</span>
<a name="l00011"></a>00011 <span class="comment"> * documentation and/or other materials provided with the distribution;</span>
<a name="l00012"></a>00012 <span class="comment"> * neither the name of the copyright holders nor the names of its</span>
<a name="l00013"></a>00013 <span class="comment"> * contributors may be used to endorse or promote products derived from</span>
<a name="l00014"></a>00014 <span class="comment"> * this software without specific prior written permission.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00017"></a>00017 <span class="comment"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00018"></a>00018 <span class="comment"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00019"></a>00019 <span class="comment"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<a name="l00020"></a>00020 <span class="comment"> * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<a name="l00021"></a>00021 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00022"></a>00022 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00023"></a>00023 <span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00024"></a>00024 <span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00025"></a>00025 <span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00026"></a>00026 <span class="comment"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00027"></a>00027 <span class="comment"> *</span>
<a name="l00028"></a>00028 <span class="comment"> * Authors: Nathan Binkert</span>
<a name="l00029"></a>00029 <span class="comment"> *          Ali Saidi</span>
<a name="l00030"></a>00030 <span class="comment"> */</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#ifndef __TRU64_HH__</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#define __TRU64_HH__</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="operatingsystem_8hh.html">kern/operatingsystem.hh</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="byteswap_8hh.html">sim/byteswap.hh</a>&quot;</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;sys/stat.h&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#if defined(__OpenBSD__) || defined(__APPLE__) || defined(__FreeBSD__)</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">#include &lt;sys/mount.h&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;sys/param.h&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#else</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#include &lt;sys/statfs.h&gt;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#endif</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &lt;dirent.h&gt;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &lt;fcntl.h&gt;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &lt;unistd.h&gt;</span>
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="preprocessor">#include &lt;cerrno&gt;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &lt;cstring&gt;</span>     <span class="comment">// for memset()</span>
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="alpha_2registers_8hh.html">arch/alpha/registers.hh</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;config/the_isa.hh&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="cpu_2base_8hh.html">cpu/base.hh</a>&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;debug/SyscallVerbose.hh&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="core_8hh.html">sim/core.hh</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="syscall__emul_8hh.html" title="This file defines objects used to emulate syscalls from the target application on the host machine...">sim/syscall_emul.hh</a>&quot;</span>
<a name="l00060"></a>00060 
<a name="l00061"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#a38e9c9050f8ef6245f3e4e2cdb25ae18">00061</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>stat <a class="code" href="kern_2tru64_2tru64_8hh.html#a38e9c9050f8ef6245f3e4e2cdb25ae18">global_stat</a>;
<a name="l00062"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#a1a8529336c3f2704cb49ee2cd97412a8">00062</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>statfs <a class="code" href="kern_2tru64_2tru64_8hh.html#a1a8529336c3f2704cb49ee2cd97412a8">global_statfs</a>;
<a name="l00063"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#ae8a7ba972c525e3d137846c7f1d0a1d5">00063</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>dirent <a class="code" href="kern_2tru64_2tru64_8hh.html#ae8a7ba972c525e3d137846c7f1d0a1d5">global_dirent</a>;
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="keyword">class </span><a class="code" href="classSETranslatingPortProxy.html">SETranslatingPortProxy</a>;
<a name="l00066"></a>00066 
<a name="l00072"></a><a class="code" href="classTru64.html">00072</a> <span class="keyword">class </span><a class="code" href="classTru64.html" title="This class encapsulates the types, structures, constants, functions, and syscall-number mappings spec...">Tru64</a> : <span class="keyword">public</span> <a class="code" href="classOperatingSystem.html" title="This class encapsulates the types, structures, constants, functions, and syscall-number mappings spec...">OperatingSystem</a>
<a name="l00073"></a>00073 {
<a name="l00074"></a>00074 
<a name="l00075"></a>00075   <span class="keyword">public</span>:
<a name="l00076"></a>00076 
<a name="l00078"></a>00078 
<a name="l00079"></a><a class="code" href="classTru64.html#a68531a2393d60181ca798247215ac27b">00079</a>     <span class="keyword">typedef</span> uint64_t size_t;
<a name="l00080"></a><a class="code" href="classTru64.html#aa0f1f377d0b9da0bcd6c7c1a0a31d64f">00080</a>     <span class="keyword">typedef</span> uint64_t off_t;
<a name="l00081"></a><a class="code" href="classTru64.html#ac98a9d35546b10be28ac8b64addead98">00081</a>     <span class="keyword">typedef</span> uint16_t nlink_t;
<a name="l00082"></a><a class="code" href="classTru64.html#ab8119cec866c7d91d65cd650083c9a21">00082</a>     <span class="keyword">typedef</span> int32_t  dev_t;
<a name="l00083"></a><a class="code" href="classTru64.html#a817c2170b3317523205584cf1cd10107">00083</a>     <span class="keyword">typedef</span> <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> uid_t;
<a name="l00084"></a><a class="code" href="classTru64.html#aeb8daab35a4eba2f7d0b542772a6e348">00084</a>     <span class="keyword">typedef</span> <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> gid_t;
<a name="l00085"></a><a class="code" href="classTru64.html#a4f8b3c49e0c484ce3a27d12395e49cce">00085</a>     <span class="keyword">typedef</span> <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> time_t;
<a name="l00086"></a><a class="code" href="classTru64.html#a6636080ceb6328836ccdf40a88386ce8">00086</a>     <span class="keyword">typedef</span> <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> mode_t;
<a name="l00087"></a><a class="code" href="classTru64.html#a030b165949c333e4d4c24804b271d551">00087</a>     <span class="keyword">typedef</span> <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> ino_t;
<a name="l00088"></a><a class="code" href="structTru64_1_1quad.html#acc437a13bcce4807f674aa5b881d11a3">00088</a>     <span class="keyword">typedef</span> <span class="keyword">struct </span>{ <span class="keywordtype">int</span> <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>[2]; } <a class="code" href="structTru64_1_1quad.html">quad</a>;
<a name="l00089"></a><a class="code" href="classTru64.html#ae4a9be8e6edaf2ba5f634ee652f627d2">00089</a>     <span class="keyword">typedef</span> <a class="code" href="structTru64_1_1quad.html">quad</a> <a class="code" href="structTru64_1_1quad.html">fsid_t</a>;
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 
<a name="l00094"></a><a class="code" href="structTru64_1_1F64__statfs.html">00094</a>     <span class="keyword">struct </span><a class="code" href="structTru64_1_1F64__statfs.html" title="For statfs().">F64_statfs</a> {
<a name="l00095"></a><a class="code" href="structTru64_1_1F64__statfs.html#af5deae1fb751302400645d9f24bc948a">00095</a>         int16_t   <a class="code" href="structTru64_1_1F64__statfs.html#af5deae1fb751302400645d9f24bc948a">f_type</a>;
<a name="l00096"></a><a class="code" href="structTru64_1_1F64__statfs.html#aa55869a29dcb644b6404d1b137d2f2c8">00096</a>         int16_t   <a class="code" href="structTru64_1_1F64__statfs.html#aa55869a29dcb644b6404d1b137d2f2c8">f_flags</a>;
<a name="l00097"></a><a class="code" href="structTru64_1_1F64__statfs.html#a7bc6771a3a796588b196af686654e2f0">00097</a>         int32_t     <a class="code" href="structTru64_1_1F64__statfs.html#a7bc6771a3a796588b196af686654e2f0">f_retired1</a>;
<a name="l00098"></a><a class="code" href="structTru64_1_1F64__statfs.html#a84b192b915817ad209d549b7e09ededa">00098</a>         int32_t     <a class="code" href="structTru64_1_1F64__statfs.html#a84b192b915817ad209d549b7e09ededa">f_retired2</a>;
<a name="l00099"></a><a class="code" href="structTru64_1_1F64__statfs.html#abb0520a8f52f4f9ce7e6f5d1adcb93f0">00099</a>         int32_t     <a class="code" href="structTru64_1_1F64__statfs.html#abb0520a8f52f4f9ce7e6f5d1adcb93f0">f_retired3</a>;
<a name="l00100"></a><a class="code" href="structTru64_1_1F64__statfs.html#ae73adc1a348d19f10ed42f8d6812b4c3">00100</a>         int32_t     <a class="code" href="structTru64_1_1F64__statfs.html#ae73adc1a348d19f10ed42f8d6812b4c3">f_retired4</a>;
<a name="l00101"></a><a class="code" href="structTru64_1_1F64__statfs.html#aeeca6a13a3d8ae4da41509a3cba4d7d3">00101</a>         int32_t     <a class="code" href="structTru64_1_1F64__statfs.html#aeeca6a13a3d8ae4da41509a3cba4d7d3">f_retired5</a>;
<a name="l00102"></a><a class="code" href="structTru64_1_1F64__statfs.html#a1359e15083ff5d90cb9002e2f2a49432">00102</a>         int32_t     <a class="code" href="structTru64_1_1F64__statfs.html#a1359e15083ff5d90cb9002e2f2a49432">f_retired6</a>;
<a name="l00103"></a><a class="code" href="structTru64_1_1F64__statfs.html#a5989cedfef8b54abddaa186c1138601c">00103</a>         int32_t     <a class="code" href="structTru64_1_1F64__statfs.html#a5989cedfef8b54abddaa186c1138601c">f_retired7</a>;
<a name="l00104"></a><a class="code" href="structTru64_1_1F64__statfs.html#a3a98aceab7243c7c5e95dbf4b4ff1180">00104</a>         <a class="code" href="structTru64_1_1quad.html">fsid_t</a>  <a class="code" href="structTru64_1_1F64__statfs.html#a3a98aceab7243c7c5e95dbf4b4ff1180">f_fsid</a>;
<a name="l00105"></a><a class="code" href="structTru64_1_1F64__statfs.html#ae789eca52a9986113aaa0a3255dba8f3">00105</a>         int32_t     <a class="code" href="structTru64_1_1F64__statfs.html#ae789eca52a9986113aaa0a3255dba8f3">f_spare</a>[9];
<a name="l00106"></a><a class="code" href="structTru64_1_1F64__statfs.html#a66f5fa20c2430b6044bee1c4b29d896f">00106</a>         <span class="keywordtype">char</span>    <a class="code" href="structTru64_1_1F64__statfs.html#a66f5fa20c2430b6044bee1c4b29d896f">f_retired8</a>[90];
<a name="l00107"></a><a class="code" href="structTru64_1_1F64__statfs.html#a2c0500d7e2087b92bb413f71bec16e3f">00107</a>         <span class="keywordtype">char</span>    <a class="code" href="structTru64_1_1F64__statfs.html#a2c0500d7e2087b92bb413f71bec16e3f">f_retired9</a>[90];
<a name="l00108"></a><a class="code" href="structTru64_1_1F64__statfs.html#ac28379d1fe2390445b1540a6b7dbf5c2">00108</a>         uint64_t <a class="code" href="structTru64_1_1F64__statfs.html#ac28379d1fe2390445b1540a6b7dbf5c2">dummy</a>[10]; <span class="comment">// was union mount_info mount_info;</span>
<a name="l00109"></a><a class="code" href="structTru64_1_1F64__statfs.html#acee4b02fa7f0c81fc32c200e0899c6e6">00109</a>         uint64_t  <a class="code" href="structTru64_1_1F64__statfs.html#acee4b02fa7f0c81fc32c200e0899c6e6">f_flags2</a>;
<a name="l00110"></a><a class="code" href="structTru64_1_1F64__statfs.html#a3bb56bf44ef969ff067cc958bde7efd5">00110</a>         int64_t    <a class="code" href="structTru64_1_1F64__statfs.html#a3bb56bf44ef969ff067cc958bde7efd5">f_spare2</a>[14];
<a name="l00111"></a><a class="code" href="structTru64_1_1F64__statfs.html#ae001b8f17320fd689cca929ebc759210">00111</a>         int64_t    <a class="code" href="structTru64_1_1F64__statfs.html#ae001b8f17320fd689cca929ebc759210">f_fsize</a>;
<a name="l00112"></a><a class="code" href="structTru64_1_1F64__statfs.html#a978609c7cc230f83ae22bf9bce1bb058">00112</a>         int64_t    <a class="code" href="structTru64_1_1F64__statfs.html#a978609c7cc230f83ae22bf9bce1bb058">f_bsize</a>;
<a name="l00113"></a><a class="code" href="structTru64_1_1F64__statfs.html#a43b6c5e3e1b2fca72706726be88d165c">00113</a>         int64_t    <a class="code" href="structTru64_1_1F64__statfs.html#a43b6c5e3e1b2fca72706726be88d165c">f_blocks</a>;
<a name="l00114"></a><a class="code" href="structTru64_1_1F64__statfs.html#a33b3d0af914728eaf1a41cd42e4290a8">00114</a>         int64_t    <a class="code" href="structTru64_1_1F64__statfs.html#a33b3d0af914728eaf1a41cd42e4290a8">f_bfree</a>;
<a name="l00115"></a><a class="code" href="structTru64_1_1F64__statfs.html#a0368fd8510adca4b9ee468938abe73a8">00115</a>         int64_t    <a class="code" href="structTru64_1_1F64__statfs.html#a0368fd8510adca4b9ee468938abe73a8">f_bavail</a>;
<a name="l00116"></a><a class="code" href="structTru64_1_1F64__statfs.html#aba9afe994aa7bb2d0b188cb2fcaaf01e">00116</a>         int64_t    <a class="code" href="structTru64_1_1F64__statfs.html#aba9afe994aa7bb2d0b188cb2fcaaf01e">f_files</a>;
<a name="l00117"></a><a class="code" href="structTru64_1_1F64__statfs.html#ad919a1f58c5592696aa3274a6f33c21c">00117</a>         int64_t    <a class="code" href="structTru64_1_1F64__statfs.html#ad919a1f58c5592696aa3274a6f33c21c">f_ffree</a>;
<a name="l00118"></a><a class="code" href="structTru64_1_1F64__statfs.html#a0f6ecb5d7404731b2db39a9d119b6dbc">00118</a>         <span class="keywordtype">char</span>    <a class="code" href="structTru64_1_1F64__statfs.html#a0f6ecb5d7404731b2db39a9d119b6dbc">f_mntonname</a>[1024];
<a name="l00119"></a><a class="code" href="structTru64_1_1F64__statfs.html#af4674ad636ecb63eeb475ead37589898">00119</a>         <span class="keywordtype">char</span>    <a class="code" href="structTru64_1_1F64__statfs.html#af4674ad636ecb63eeb475ead37589898">f_mntfromname</a>[1024];
<a name="l00120"></a>00120     };
<a name="l00121"></a>00121 
<a name="l00123"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html">00123</a>     <span class="keyword">struct </span><a class="code" href="structTru64_1_1pre__F64__statfs.html" title="For old Tru64 v4.x statfs().">pre_F64_statfs</a> {
<a name="l00124"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#a4b16a0876981bd6da671af73648cbc34">00124</a>         int16_t   <a class="code" href="structTru64_1_1pre__F64__statfs.html#a4b16a0876981bd6da671af73648cbc34">f_type</a>;
<a name="l00125"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#a2c461c6230ee7de0fdf3c08616a890e5">00125</a>         int16_t   <a class="code" href="structTru64_1_1pre__F64__statfs.html#a2c461c6230ee7de0fdf3c08616a890e5">f_flags</a>;
<a name="l00126"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#aed4d6fc264fea3b934e00f8d7aa6d895">00126</a>         int32_t     <a class="code" href="structTru64_1_1pre__F64__statfs.html#aed4d6fc264fea3b934e00f8d7aa6d895">f_fsize</a>;
<a name="l00127"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#a3c3797c3ea582279394051f18fe74f99">00127</a>         int32_t     <a class="code" href="structTru64_1_1pre__F64__statfs.html#a3c3797c3ea582279394051f18fe74f99">f_bsize</a>;
<a name="l00128"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#af240d7fae4203ee29f28cd23968da24a">00128</a>         int32_t     <a class="code" href="structTru64_1_1pre__F64__statfs.html#af240d7fae4203ee29f28cd23968da24a">f_blocks</a>;
<a name="l00129"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#acec18828c3cf8f62195fe0fc2cf170c8">00129</a>         int32_t     <a class="code" href="structTru64_1_1pre__F64__statfs.html#acec18828c3cf8f62195fe0fc2cf170c8">f_bfree</a>;
<a name="l00130"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#aee68418577dc2857279c86c2c4f2e285">00130</a>         int32_t     <a class="code" href="structTru64_1_1pre__F64__statfs.html#aee68418577dc2857279c86c2c4f2e285">f_bavail</a>;
<a name="l00131"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#a7dad753b76542b007857c2278c8c35ad">00131</a>         int32_t     <a class="code" href="structTru64_1_1pre__F64__statfs.html#a7dad753b76542b007857c2278c8c35ad">f_files</a>;
<a name="l00132"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#a182751240a8b533e2e2603ffdcc37001">00132</a>         int32_t     <a class="code" href="structTru64_1_1pre__F64__statfs.html#a182751240a8b533e2e2603ffdcc37001">f_ffree</a>;
<a name="l00133"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#abf5d78bc540976cbcdde749fd2a84ae5">00133</a>         <a class="code" href="structTru64_1_1quad.html">fsid_t</a>  <a class="code" href="structTru64_1_1pre__F64__statfs.html#abf5d78bc540976cbcdde749fd2a84ae5">f_fsid</a>;
<a name="l00134"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#a010a43f626b1856a1d91bd2483c6a201">00134</a>         int32_t     <a class="code" href="structTru64_1_1pre__F64__statfs.html#a010a43f626b1856a1d91bd2483c6a201">f_spare</a>[9];
<a name="l00135"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#ac93ad492d65e6c96b61c651f1b8a8fac">00135</a>         <span class="keywordtype">char</span>    <a class="code" href="structTru64_1_1pre__F64__statfs.html#ac93ad492d65e6c96b61c651f1b8a8fac">f_mntonname</a>[90];
<a name="l00136"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#a95c68a1dc9aea8031acce5ca8dd68cb7">00136</a>         <span class="keywordtype">char</span>    <a class="code" href="structTru64_1_1pre__F64__statfs.html#a95c68a1dc9aea8031acce5ca8dd68cb7">f_mntfromname</a>[90];
<a name="l00137"></a><a class="code" href="structTru64_1_1pre__F64__statfs.html#ac2d1001a67b3a406ffecf0cef3e56c62">00137</a>         uint64_t <a class="code" href="structTru64_1_1pre__F64__statfs.html#ac2d1001a67b3a406ffecf0cef3e56c62">dummy</a>[10]; <span class="comment">// was union mount_info mount_info;</span>
<a name="l00138"></a>00138     };
<a name="l00139"></a>00139 
<a name="l00141"></a><a class="code" href="structTru64_1_1dirent.html">00141</a>     <span class="keyword">struct </span><a class="code" href="structTru64_1_1dirent.html" title="For getdirentries().">dirent</a>
<a name="l00142"></a>00142     {
<a name="l00143"></a><a class="code" href="structTru64_1_1dirent.html#a87d7853e74f8948c04320217b5e70aea">00143</a>         <a class="code" href="classTru64.html#a030b165949c333e4d4c24804b271d551">ino_t</a> <a class="code" href="structTru64_1_1dirent.html#a87d7853e74f8948c04320217b5e70aea" title="file number of entry">d_ino</a>;            
<a name="l00144"></a><a class="code" href="structTru64_1_1dirent.html#a55d4b33b4dc4ce51891de773770ce842">00144</a>         uint16_t <a class="code" href="structTru64_1_1dirent.html#a55d4b33b4dc4ce51891de773770ce842" title="length of this record">d_reclen</a>;      
<a name="l00145"></a><a class="code" href="structTru64_1_1dirent.html#a9ca9c8ac7d28df3927b9b23c04fde0bb">00145</a>         uint16_t <a class="code" href="structTru64_1_1dirent.html#a9ca9c8ac7d28df3927b9b23c04fde0bb" title="length of string in d_name">d_namlen</a>;      
<a name="l00146"></a><a class="code" href="structTru64_1_1dirent.html#a154c7582132991d105a868a5c3e1a9e9">00146</a>         <span class="keywordtype">char</span> <a class="code" href="structTru64_1_1dirent.html#a154c7582132991d105a868a5c3e1a9e9" title="dummy name length">d_name</a>[256];       
<a name="l00147"></a>00147     };
<a name="l00148"></a>00148 
<a name="l00149"></a>00149 
<a name="l00151"></a><a class="code" href="classTru64.html#a55ffb3aee4f2087ea48f49f0680b2a8f">00151</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classTru64.html#a55ffb3aee4f2087ea48f49f0680b2a8f" title="Length of strings in struct utsname (plus 1 for null char).">_SYS_NMLN</a> = 32;
<a name="l00152"></a>00152 
<a name="l00154"></a><a class="code" href="structTru64_1_1utsname.html">00154</a>     <span class="keyword">struct </span><a class="code" href="structOperatingSystem_1_1utsname.html" title="Interface struct for uname().">utsname</a> {
<a name="l00155"></a><a class="code" href="structTru64_1_1utsname.html#ad98131bbb56489dece302e28658e9bd2">00155</a>         <span class="keywordtype">char</span> <a class="code" href="structTru64_1_1utsname.html#ad98131bbb56489dece302e28658e9bd2" title="System name.">sysname</a>[<a class="code" href="classTru64.html#a55ffb3aee4f2087ea48f49f0680b2a8f" title="Length of strings in struct utsname (plus 1 for null char).">_SYS_NMLN</a>];        
<a name="l00156"></a><a class="code" href="structTru64_1_1utsname.html#a3b7d9d72e1a6ee66b6f826a257588e78">00156</a>         <span class="keywordtype">char</span> <a class="code" href="structTru64_1_1utsname.html#a3b7d9d72e1a6ee66b6f826a257588e78" title="Node name.">nodename</a>[<a class="code" href="classTru64.html#a55ffb3aee4f2087ea48f49f0680b2a8f" title="Length of strings in struct utsname (plus 1 for null char).">_SYS_NMLN</a>];       
<a name="l00157"></a><a class="code" href="structTru64_1_1utsname.html#a7d1c33bc86f6a687ef7b3e3646a405fd">00157</a>         <span class="keywordtype">char</span> <a class="code" href="structTru64_1_1utsname.html#a7d1c33bc86f6a687ef7b3e3646a405fd" title="OS release.">release</a>[<a class="code" href="classTru64.html#a55ffb3aee4f2087ea48f49f0680b2a8f" title="Length of strings in struct utsname (plus 1 for null char).">_SYS_NMLN</a>];        
<a name="l00158"></a><a class="code" href="structTru64_1_1utsname.html#a8c3236f7fb11849b95dd3d966c6677f2">00158</a>         <span class="keywordtype">char</span> <a class="code" href="structTru64_1_1utsname.html#a8c3236f7fb11849b95dd3d966c6677f2" title="OS version.">version</a>[<a class="code" href="classTru64.html#a55ffb3aee4f2087ea48f49f0680b2a8f" title="Length of strings in struct utsname (plus 1 for null char).">_SYS_NMLN</a>];        
<a name="l00159"></a><a class="code" href="structTru64_1_1utsname.html#aed917ff4ba5ccfa8cabeb913a7210c6d">00159</a>         <span class="keywordtype">char</span> <a class="code" href="structTru64_1_1utsname.html#aed917ff4ba5ccfa8cabeb913a7210c6d" title="Machine type.">machine</a>[<a class="code" href="classTru64.html#a55ffb3aee4f2087ea48f49f0680b2a8f" title="Length of strings in struct utsname (plus 1 for null char).">_SYS_NMLN</a>];        
<a name="l00160"></a>00160     };
<a name="l00161"></a>00161 
<a name="l00163"></a><a class="code" href="structTru64_1_1rlimit.html">00163</a>     <span class="keyword">struct </span><a class="code" href="structOperatingSystem_1_1rlimit.html" title="Limit struct for getrlimit/setrlimit.">rlimit</a> {
<a name="l00164"></a><a class="code" href="structTru64_1_1rlimit.html#a9063cd5b2044df5306bddadcdf349be9">00164</a>         uint64_t  <a class="code" href="structTru64_1_1rlimit.html#a9063cd5b2044df5306bddadcdf349be9" title="soft limit">rlim_cur</a>;     
<a name="l00165"></a><a class="code" href="structTru64_1_1rlimit.html#a99fb2d68773cd6b12f962ba53c49b89b">00165</a>         uint64_t  <a class="code" href="structTru64_1_1rlimit.html#a99fb2d68773cd6b12f962ba53c49b89b" title="hard limit">rlim_max</a>;     
<a name="l00166"></a>00166     };
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 
<a name="l00170"></a><a class="code" href="structTru64_1_1cpu__info.html">00170</a>     <span class="keyword">struct </span><a class="code" href="structTru64_1_1cpu__info.html" title="For getsysinfo() GSI_CPU_INFO option.">cpu_info</a> {
<a name="l00171"></a><a class="code" href="structTru64_1_1cpu__info.html#a21a5f7e3114abccadd1df751b0ef3a1a">00171</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>     <a class="code" href="structTru64_1_1cpu__info.html#a21a5f7e3114abccadd1df751b0ef3a1a" title="current_cpu">current_cpu</a>;       
<a name="l00172"></a><a class="code" href="structTru64_1_1cpu__info.html#a6e5715bf1481a1d5518f8f2aef387a60">00172</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>     <a class="code" href="structTru64_1_1cpu__info.html#a6e5715bf1481a1d5518f8f2aef387a60" title="cpus_in_box">cpus_in_box</a>;       
<a name="l00173"></a><a class="code" href="structTru64_1_1cpu__info.html#a19d69f680991eec7b4cfe2d8accf10cf">00173</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>     <a class="code" href="structTru64_1_1cpu__info.html#a19d69f680991eec7b4cfe2d8accf10cf" title="cpu_type">cpu_type</a>;          
<a name="l00174"></a><a class="code" href="structTru64_1_1cpu__info.html#a817ee715ec22ab7007c25f7f459b79fa">00174</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>     <a class="code" href="structTru64_1_1cpu__info.html#a817ee715ec22ab7007c25f7f459b79fa" title="ncpus">ncpus</a>;             
<a name="l00175"></a><a class="code" href="structTru64_1_1cpu__info.html#ad28f75f505a026f8e7823f88c9d0696d">00175</a>         uint64_t     <a class="code" href="structTru64_1_1cpu__info.html#ad28f75f505a026f8e7823f88c9d0696d" title="cpus_present">cpus_present</a>;      
<a name="l00176"></a><a class="code" href="structTru64_1_1cpu__info.html#ab7fd0163cd371648ca373c85880f7fc2">00176</a>         uint64_t     <a class="code" href="structTru64_1_1cpu__info.html#ab7fd0163cd371648ca373c85880f7fc2" title="cpus_running">cpus_running</a>;      
<a name="l00177"></a><a class="code" href="structTru64_1_1cpu__info.html#a72d354d6d549cb17cf432fcf193668d3">00177</a>         uint64_t     <a class="code" href="structTru64_1_1cpu__info.html#a72d354d6d549cb17cf432fcf193668d3" title="cpu_binding">cpu_binding</a>;       
<a name="l00178"></a><a class="code" href="structTru64_1_1cpu__info.html#aee136394cf9537d1fa2d8dffa9f9c073">00178</a>         uint64_t     <a class="code" href="structTru64_1_1cpu__info.html#aee136394cf9537d1fa2d8dffa9f9c073" title="cpu_ex_binding">cpu_ex_binding</a>;    
<a name="l00179"></a><a class="code" href="structTru64_1_1cpu__info.html#a108b47e417793e3af77a310f830a973c">00179</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>     <a class="code" href="structTru64_1_1cpu__info.html#a108b47e417793e3af77a310f830a973c" title="mhz">mhz</a>;               
<a name="l00180"></a><a class="code" href="structTru64_1_1cpu__info.html#a092b50f2f1e43b3b96d519000edcca90">00180</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>     <a class="code" href="structTru64_1_1cpu__info.html#a092b50f2f1e43b3b96d519000edcca90" title="future expansion">unused</a>[3];         
<a name="l00181"></a>00181     };
<a name="l00182"></a>00182 
<a name="l00184"></a><a class="code" href="structTru64_1_1timeval.html">00184</a>     <span class="keyword">struct </span><a class="code" href="structOperatingSystem_1_1timeval.html" title="For gettimeofday().">timeval</a> {
<a name="l00185"></a><a class="code" href="structTru64_1_1timeval.html#a84aafb101b3416c5b59e1fe2dead4756">00185</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="structTru64_1_1timeval.html#a84aafb101b3416c5b59e1fe2dead4756" title="seconds">tv_sec</a>;        
<a name="l00186"></a><a class="code" href="structTru64_1_1timeval.html#aad2b0f7e4665b250f40b72a1a3a58037">00186</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="structTru64_1_1timeval.html#aad2b0f7e4665b250f40b72a1a3a58037" title="microseconds">tv_usec</a>;       
<a name="l00187"></a>00187     };
<a name="l00188"></a>00188 
<a name="l00190"></a><a class="code" href="structTru64_1_1rusage.html">00190</a>     <span class="keyword">struct </span><a class="code" href="structOperatingSystem_1_1rusage.html" title="For getrusage().">rusage</a> {
<a name="l00191"></a><a class="code" href="structTru64_1_1rusage.html#a85ff52878b14b99a19483676a617d6a6">00191</a>         <span class="keyword">struct </span><a class="code" href="structOperatingSystem_1_1timeval.html" title="For gettimeofday().">timeval</a> <a class="code" href="structTru64_1_1rusage.html#a85ff52878b14b99a19483676a617d6a6" title="user time used">ru_utime</a>;        
<a name="l00192"></a><a class="code" href="structTru64_1_1rusage.html#a1936de70214ccdcf0388708ff5b15c4f">00192</a>         <span class="keyword">struct </span><a class="code" href="structOperatingSystem_1_1timeval.html" title="For gettimeofday().">timeval</a> <a class="code" href="structTru64_1_1rusage.html#a1936de70214ccdcf0388708ff5b15c4f" title="system time used">ru_stime</a>;        
<a name="l00193"></a><a class="code" href="structTru64_1_1rusage.html#af5ed8c7c3dd4709738aa4fed5483b6be">00193</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#af5ed8c7c3dd4709738aa4fed5483b6be" title="ru_maxrss">ru_maxrss</a>;             
<a name="l00194"></a><a class="code" href="structTru64_1_1rusage.html#a6ea23dca171b2ff34019da11dabd1434">00194</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#a6ea23dca171b2ff34019da11dabd1434" title="integral shared memory size">ru_ixrss</a>;              
<a name="l00195"></a><a class="code" href="structTru64_1_1rusage.html#a52e646e098c59bf902bc34611e663f56">00195</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#a52e646e098c59bf902bc34611e663f56" title="integral unshared data &quot;">ru_idrss</a>;              
<a name="l00196"></a><a class="code" href="structTru64_1_1rusage.html#afaf34a6adb636f484db94af6b7a3a617">00196</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#afaf34a6adb636f484db94af6b7a3a617" title="integral unshared stack &quot;">ru_isrss</a>;              
<a name="l00197"></a><a class="code" href="structTru64_1_1rusage.html#aa7298f5b071fdedc4cc7f8dfa5f46065">00197</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#aa7298f5b071fdedc4cc7f8dfa5f46065" title="page reclaims - total vmfaults">ru_minflt</a>;             
<a name="l00198"></a><a class="code" href="structTru64_1_1rusage.html#a858274248d93729122fcfa0802215b69">00198</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#a858274248d93729122fcfa0802215b69" title="page faults">ru_majflt</a>;             
<a name="l00199"></a><a class="code" href="structTru64_1_1rusage.html#a84dea30382c29d27f0c751fd4c40aa0e">00199</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#a84dea30382c29d27f0c751fd4c40aa0e" title="swaps">ru_nswap</a>;              
<a name="l00200"></a><a class="code" href="structTru64_1_1rusage.html#a41c8c820f603eca737747963f022218e">00200</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#a41c8c820f603eca737747963f022218e" title="block input operations">ru_inblock</a>;            
<a name="l00201"></a><a class="code" href="structTru64_1_1rusage.html#ac705542772a6a35efa67420124da4eb3">00201</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#ac705542772a6a35efa67420124da4eb3" title="block output operations">ru_oublock</a>;            
<a name="l00202"></a><a class="code" href="structTru64_1_1rusage.html#adc61805c811560732c0519c37de1c20f">00202</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#adc61805c811560732c0519c37de1c20f" title="messages sent">ru_msgsnd</a>;             
<a name="l00203"></a><a class="code" href="structTru64_1_1rusage.html#aef9765e61b905ef50d01c8b28341d2bd">00203</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#aef9765e61b905ef50d01c8b28341d2bd" title="messages received">ru_msgrcv</a>;             
<a name="l00204"></a><a class="code" href="structTru64_1_1rusage.html#a3ee92c92dbbfdcdcfdf5f871b86fa956">00204</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#a3ee92c92dbbfdcdcfdf5f871b86fa956" title="signals received">ru_nsignals</a>;           
<a name="l00205"></a><a class="code" href="structTru64_1_1rusage.html#a9f4750d725db58e34fe308c53b9bda00">00205</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#a9f4750d725db58e34fe308c53b9bda00" title="voluntary context switches">ru_nvcsw</a>;              
<a name="l00206"></a><a class="code" href="structTru64_1_1rusage.html#a6690293e5afee11619546369a216fcc7">00206</a>         uint64_t <a class="code" href="structTru64_1_1rusage.html#a6690293e5afee11619546369a216fcc7" title="involuntary &quot;">ru_nivcsw</a>;             
<a name="l00207"></a>00207     };
<a name="l00208"></a>00208 
<a name="l00210"></a><a class="code" href="structTru64_1_1sigcontext.html">00210</a>     <span class="keyword">struct </span><a class="code" href="structTru64_1_1sigcontext.html" title="For sigreturn().">sigcontext</a> {
<a name="l00211"></a><a class="code" href="structTru64_1_1sigcontext.html#af6a188097a21b8778308285ba6d67304">00211</a>         int64_t <a class="code" href="structTru64_1_1sigcontext.html#af6a188097a21b8778308285ba6d67304" title="sigstack state to restore">sc_onstack</a>;             
<a name="l00212"></a><a class="code" href="structTru64_1_1sigcontext.html#a4e652ab8e3d439a095dcc2b7e5258a86">00212</a>         int64_t <a class="code" href="structTru64_1_1sigcontext.html#a4e652ab8e3d439a095dcc2b7e5258a86" title="signal mask to restore">sc_mask</a>;                
<a name="l00213"></a><a class="code" href="structTru64_1_1sigcontext.html#a9008c6fbc90d9ae6e3124c6a4b262b5b">00213</a>         int64_t <a class="code" href="structTru64_1_1sigcontext.html#a9008c6fbc90d9ae6e3124c6a4b262b5b" title="pc at time of signal">sc_pc</a>;                  
<a name="l00214"></a><a class="code" href="structTru64_1_1sigcontext.html#a4198c134ed54a7014f50c0d1a045a393">00214</a>         int64_t <a class="code" href="structTru64_1_1sigcontext.html#a4198c134ed54a7014f50c0d1a045a393" title="psl to retore">sc_ps</a>;                  
<a name="l00215"></a><a class="code" href="structTru64_1_1sigcontext.html#a8544aba0eafce8299c51349c44205915">00215</a>         int64_t <a class="code" href="structTru64_1_1sigcontext.html#a8544aba0eafce8299c51349c44205915" title="processor regs 0 to 31">sc_regs</a>[32];            
<a name="l00216"></a><a class="code" href="structTru64_1_1sigcontext.html#ac87198c6d20652ec8af17089670ab153">00216</a>         int64_t <a class="code" href="structTru64_1_1sigcontext.html#ac87198c6d20652ec8af17089670ab153" title="fp has been used">sc_ownedfp</a>;             
<a name="l00217"></a><a class="code" href="structTru64_1_1sigcontext.html#a3b29eb5f0b2e2862bd47597be3086e60">00217</a>         int64_t <a class="code" href="structTru64_1_1sigcontext.html#a3b29eb5f0b2e2862bd47597be3086e60" title="fp regs 0 to 31">sc_fpregs</a>[32];          
<a name="l00218"></a><a class="code" href="structTru64_1_1sigcontext.html#a0619b8c13b6e00c3e605509928f88e59">00218</a>         uint64_t <a class="code" href="structTru64_1_1sigcontext.html#a0619b8c13b6e00c3e605509928f88e59" title="floating point control reg">sc_fpcr</a>;               
<a name="l00219"></a><a class="code" href="structTru64_1_1sigcontext.html#a0b2966b9f317a11af76ecad06afe1b33">00219</a>         uint64_t <a class="code" href="structTru64_1_1sigcontext.html#a0b2966b9f317a11af76ecad06afe1b33" title="software fpcr">sc_fp_control</a>;         
<a name="l00220"></a><a class="code" href="structTru64_1_1sigcontext.html#abde52e8a4b22cdfb6a63188c7c27bd53">00220</a>         int64_t <a class="code" href="structTru64_1_1sigcontext.html#abde52e8a4b22cdfb6a63188c7c27bd53" title="reserved for kernel">sc_reserved1</a>;           
<a name="l00221"></a><a class="code" href="structTru64_1_1sigcontext.html#ac551ef82636b5ee548361ca7b2ab9fd8">00221</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="structTru64_1_1sigcontext.html#ac551ef82636b5ee548361ca7b2ab9fd8" title="reserved for kernel">sc_kreserved1</a>;         
<a name="l00222"></a><a class="code" href="structTru64_1_1sigcontext.html#af676f1ad1c44fb6c64c64f978c2d9c1d">00222</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="structTru64_1_1sigcontext.html#af676f1ad1c44fb6c64c64f978c2d9c1d" title="reserved for kernel">sc_kreserved2</a>;         
<a name="l00223"></a><a class="code" href="structTru64_1_1sigcontext.html#ad7852b831621e9536d295b5edff2a875">00223</a>         <span class="keywordtype">size_t</span>  <a class="code" href="structTru64_1_1sigcontext.html#ad7852b831621e9536d295b5edff2a875" title="stack size">sc_ssize</a>;               
<a name="l00224"></a><a class="code" href="structTru64_1_1sigcontext.html#a96d780ad5694f7321a9a395851f7697f">00224</a>         caddr_t <a class="code" href="structTru64_1_1sigcontext.html#a96d780ad5694f7321a9a395851f7697f" title="stack start">sc_sbase</a>;               
<a name="l00225"></a><a class="code" href="structTru64_1_1sigcontext.html#a0764d0a3c88c6e534e2acc26a047cea3">00225</a>         uint64_t <a class="code" href="structTru64_1_1sigcontext.html#a0764d0a3c88c6e534e2acc26a047cea3" title="a0 argument to trap on exc">sc_traparg_a0</a>;         
<a name="l00226"></a><a class="code" href="structTru64_1_1sigcontext.html#a2b8fc864aac924c8f7cf0005fec5c702">00226</a>         uint64_t <a class="code" href="structTru64_1_1sigcontext.html#a2b8fc864aac924c8f7cf0005fec5c702" title="a1 argument to trap on exc">sc_traparg_a1</a>;         
<a name="l00227"></a><a class="code" href="structTru64_1_1sigcontext.html#a0d14050f9bc6e9d901a7e9f60db95085">00227</a>         uint64_t <a class="code" href="structTru64_1_1sigcontext.html#a0d14050f9bc6e9d901a7e9f60db95085" title="a2 argument to trap on exc">sc_traparg_a2</a>;         
<a name="l00228"></a><a class="code" href="structTru64_1_1sigcontext.html#a88e0eb1be0359df44f48dda9006e4f24">00228</a>         uint64_t <a class="code" href="structTru64_1_1sigcontext.html#a88e0eb1be0359df44f48dda9006e4f24" title="imprecise pc">sc_fp_trap_pc</a>;         
<a name="l00229"></a><a class="code" href="structTru64_1_1sigcontext.html#a983b594b2d6c99e8bdd45d39e9543369">00229</a>         uint64_t <a class="code" href="structTru64_1_1sigcontext.html#a983b594b2d6c99e8bdd45d39e9543369" title="Exception summary at trigg.">sc_fp_trigger_sum</a>;     
<a name="l00230"></a><a class="code" href="structTru64_1_1sigcontext.html#aebf5f09a45f70e6c93c5de9143470acf">00230</a>         uint64_t <a class="code" href="structTru64_1_1sigcontext.html#aebf5f09a45f70e6c93c5de9143470acf" title="Instruction at trigger pc.">sc_fp_trigger_inst</a>;    
<a name="l00231"></a>00231     };
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 
<a name="l00234"></a>00234 
<a name="l00236"></a><a class="code" href="structTru64_1_1tbl__sysinfo.html">00236</a>     <span class="keyword">struct </span><a class="code" href="structTru64_1_1tbl__sysinfo.html" title="For table().">tbl_sysinfo</a> {
<a name="l00237"></a><a class="code" href="structTru64_1_1tbl__sysinfo.html#ac1bd7ff8fcc8d9ad9af12f7e62933909">00237</a>         uint64_t <a class="code" href="structTru64_1_1tbl__sysinfo.html#ac1bd7ff8fcc8d9ad9af12f7e62933909" title="User time.">si_user</a>;       
<a name="l00238"></a><a class="code" href="structTru64_1_1tbl__sysinfo.html#a372128b57d200eb0a119700904e37f96">00238</a>         uint64_t <a class="code" href="structTru64_1_1tbl__sysinfo.html#a372128b57d200eb0a119700904e37f96" title="Nice time.">si_nice</a>;       
<a name="l00239"></a><a class="code" href="structTru64_1_1tbl__sysinfo.html#ae8334fd42caa2776176efdf84c8853b5">00239</a>         uint64_t <a class="code" href="structTru64_1_1tbl__sysinfo.html#ae8334fd42caa2776176efdf84c8853b5" title="System time.">si_sys</a>;        
<a name="l00240"></a><a class="code" href="structTru64_1_1tbl__sysinfo.html#a847e4dc9b4df9f4719044e7b9dc0303e">00240</a>         uint64_t <a class="code" href="structTru64_1_1tbl__sysinfo.html#a847e4dc9b4df9f4719044e7b9dc0303e" title="Idle time.">si_idle</a>;       
<a name="l00241"></a><a class="code" href="structTru64_1_1tbl__sysinfo.html#a877a46bd6e1a0143832f2e1420200d10">00241</a>         uint64_t <a class="code" href="structTru64_1_1tbl__sysinfo.html#a877a46bd6e1a0143832f2e1420200d10" title="hz">si_hz</a>;         
<a name="l00242"></a><a class="code" href="structTru64_1_1tbl__sysinfo.html#a16fc59f61efe1a040aa24b31d5a7c235">00242</a>         uint64_t <a class="code" href="structTru64_1_1tbl__sysinfo.html#a16fc59f61efe1a040aa24b31d5a7c235" title="phz">si_phz</a>;        
<a name="l00243"></a><a class="code" href="structTru64_1_1tbl__sysinfo.html#a60f6827bc91bdba1122fc4275e3c2a1e">00243</a>         uint64_t <a class="code" href="structTru64_1_1tbl__sysinfo.html#a60f6827bc91bdba1122fc4275e3c2a1e" title="Boot time in seconds.">si_boottime</a>;   
<a name="l00244"></a><a class="code" href="structTru64_1_1tbl__sysinfo.html#a58e5e48ee3d220880c4790d0d72040d7">00244</a>         uint64_t <a class="code" href="structTru64_1_1tbl__sysinfo.html#a58e5e48ee3d220880c4790d0d72040d7" title="Wait time.">wait</a>;          
<a name="l00245"></a><a class="code" href="structTru64_1_1tbl__sysinfo.html#acf92c6553747686a516dd0ad1c3e3113">00245</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>  <a class="code" href="structTru64_1_1tbl__sysinfo.html#acf92c6553747686a516dd0ad1c3e3113" title="rpb-&amp;gt;rpb_numprocs">si_max_procs</a>; 
<a name="l00246"></a><a class="code" href="structTru64_1_1tbl__sysinfo.html#aa1b992910dc1b45d6b5cb8717ebad8ca">00246</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>  <a class="code" href="structTru64_1_1tbl__sysinfo.html#aa1b992910dc1b45d6b5cb8717ebad8ca" title="padding">pad</a>;          
<a name="l00247"></a>00247     };
<a name="l00248"></a>00248 
<a name="l00249"></a>00249 
<a name="l00251"></a><a class="code" href="structTru64_1_1vm__stack.html">00251</a>     <span class="keyword">struct </span><a class="code" href="structTru64_1_1vm__stack.html" title="For stack_create.">vm_stack</a> {
<a name="l00252"></a>00252         <span class="comment">// was void *</span>
<a name="l00253"></a><a class="code" href="structTru64_1_1vm__stack.html#a6d5e3bc21218bbbfdefc45bf6f14747d">00253</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a>    <a class="code" href="structTru64_1_1vm__stack.html#a6d5e3bc21218bbbfdefc45bf6f14747d" title="address hint">address</a>;        
<a name="l00254"></a><a class="code" href="structTru64_1_1vm__stack.html#a3161f6963b508a34f55dbe307d92c4a6">00254</a>         <span class="keywordtype">size_t</span>  <a class="code" href="structTru64_1_1vm__stack.html#a3161f6963b508a34f55dbe307d92c4a6" title="red zone size">rsize</a>;          
<a name="l00255"></a><a class="code" href="structTru64_1_1vm__stack.html#a2c0c29f06283ab61699c417506e7a2d2">00255</a>         <span class="keywordtype">size_t</span>  <a class="code" href="structTru64_1_1vm__stack.html#a2c0c29f06283ab61699c417506e7a2d2" title="yellow zone size">ysize</a>;          
<a name="l00256"></a><a class="code" href="structTru64_1_1vm__stack.html#abe6c3ec60d1e435002e7269bc95280ed">00256</a>         <span class="keywordtype">size_t</span>  <a class="code" href="structTru64_1_1vm__stack.html#abe6c3ec60d1e435002e7269bc95280ed" title="green zone size">gsize</a>;          
<a name="l00257"></a><a class="code" href="structTru64_1_1vm__stack.html#a7e4c6922a125bbf1c64a9f5af02c604d">00257</a>         <span class="keywordtype">size_t</span>  <a class="code" href="structTru64_1_1vm__stack.html#a7e4c6922a125bbf1c64a9f5af02c604d" title="amount of swap to reserve">swap</a>;           
<a name="l00258"></a><a class="code" href="structTru64_1_1vm__stack.html#a757298bb3ad5b65aa35562b3f0a05ce5">00258</a>         <span class="keywordtype">size_t</span>  <a class="code" href="structTru64_1_1vm__stack.html#a757298bb3ad5b65aa35562b3f0a05ce5" title="growth increment">incr</a>;           
<a name="l00259"></a><a class="code" href="structTru64_1_1vm__stack.html#ae3ffea77f44e7f7dd4999d40669b9484">00259</a>         uint64_t        <a class="code" href="structTru64_1_1vm__stack.html#ae3ffea77f44e7f7dd4999d40669b9484" title="address alignment">align</a>;          
<a name="l00260"></a><a class="code" href="structTru64_1_1vm__stack.html#ae9baf4c77db2a36ae52aa1440201f9ba">00260</a>         uint64_t        <a class="code" href="structTru64_1_1vm__stack.html#ae9baf4c77db2a36ae52aa1440201f9ba" title="MAP_FIXED etc.">flags</a>;          
<a name="l00261"></a>00261         <span class="comment">// was struct memalloc_attr *</span>
<a name="l00262"></a><a class="code" href="structTru64_1_1vm__stack.html#a2eeb6b709cd8d9dba07ce63fe868e9d1">00262</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a>    <a class="code" href="structTru64_1_1vm__stack.html#a2eeb6b709cd8d9dba07ce63fe868e9d1" title="allocation policy">attr</a>;           
<a name="l00263"></a><a class="code" href="structTru64_1_1vm__stack.html#a0b5cdda8093855ca017072c36b911680">00263</a>         uint64_t <a class="code" href="structTru64_1_1vm__stack.html#a0b5cdda8093855ca017072c36b911680" title="reserved">reserved</a>;      
<a name="l00264"></a>00264     };
<a name="l00265"></a>00265 
<a name="l00267"></a>00267     <span class="keyword">enum</span> {
<a name="l00268"></a><a class="code" href="classTru64.html#a7b481cbe2cd21760a87ed4d199e7cef5aaceb491f7a8f5d062ab47b902a5bc47e">00268</a>         <a class="code" href="classTru64.html#a7b481cbe2cd21760a87ed4d199e7cef5aaceb491f7a8f5d062ab47b902a5bc47e">KERN_NOT_RECEIVER</a> = 7,
<a name="l00269"></a><a class="code" href="classTru64.html#a7b481cbe2cd21760a87ed4d199e7cef5ab9a2045b500b502af26967cd6f3cbb03">00269</a>         <a class="code" href="classTru64.html#a7b481cbe2cd21760a87ed4d199e7cef5ab9a2045b500b502af26967cd6f3cbb03">KERN_NOT_IN_SET</a> = 12
<a name="l00270"></a>00270     };
<a name="l00271"></a>00271 
<a name="l00273"></a><a class="code" href="classTru64.html#adaad3fb403ad9783f348b69f9d13b215">00273</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classTru64.html#adaad3fb403ad9783f348b69f9d13b215" title="For nxm_task_init.">NXM_TASK_INIT_VP</a> = 2;      
<a name="l00274"></a>00274 
<a name="l00276"></a><a class="code" href="structTru64_1_1nxm__task__attr.html">00276</a>     <span class="keyword">struct </span><a class="code" href="structTru64_1_1nxm__task__attr.html" title="Task attribute structure.">nxm_task_attr</a> {
<a name="l00277"></a><a class="code" href="structTru64_1_1nxm__task__attr.html#a05caf6fb005f62cb2e8d52da09d1b527">00277</a>         int64_t <a class="code" href="structTru64_1_1nxm__task__attr.html#a05caf6fb005f62cb2e8d52da09d1b527" title="nxm_callback">nxm_callback</a>;   
<a name="l00278"></a><a class="code" href="structTru64_1_1nxm__task__attr.html#a821c0d5ad3d8cfa46e6b24e8f9c31ccc">00278</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structTru64_1_1nxm__task__attr.html#a821c0d5ad3d8cfa46e6b24e8f9c31ccc" title="nxm_version">nxm_version</a>;       
<a name="l00279"></a><a class="code" href="structTru64_1_1nxm__task__attr.html#aa518797660090deab2d0195345d262b9">00279</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structTru64_1_1nxm__task__attr.html#aa518797660090deab2d0195345d262b9" title="nxm_uniq_offset">nxm_uniq_offset</a>; 
<a name="l00280"></a><a class="code" href="structTru64_1_1nxm__task__attr.html#a11e0a2c1e71e37cd97808f0cfdbb6adf">00280</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structTru64_1_1nxm__task__attr.html#a11e0a2c1e71e37cd97808f0cfdbb6adf" title="flags">flags</a>;   
<a name="l00281"></a><a class="code" href="structTru64_1_1nxm__task__attr.html#aa1b8179599e108d99f1aac0d33742dc5">00281</a>         <span class="keywordtype">int</span> <a class="code" href="structTru64_1_1nxm__task__attr.html#aa1b8179599e108d99f1aac0d33742dc5" title="nxm_quantum">nxm_quantum</a>;        
<a name="l00282"></a><a class="code" href="structTru64_1_1nxm__task__attr.html#a6718adc972a6a9a3b565ddf87b2afae2">00282</a>         <span class="keywordtype">int</span> <a class="code" href="structTru64_1_1nxm__task__attr.html#a6718adc972a6a9a3b565ddf87b2afae2" title="pad1">pad1</a>;               
<a name="l00283"></a><a class="code" href="structTru64_1_1nxm__task__attr.html#a35171b189357e9f1bc33c2c0fd9e8e45">00283</a>         int64_t <a class="code" href="structTru64_1_1nxm__task__attr.html#a35171b189357e9f1bc33c2c0fd9e8e45" title="pad2">pad2</a>;           
<a name="l00284"></a>00284     };
<a name="l00285"></a>00285 
<a name="l00287"></a><a class="code" href="classTru64.html#a7607d423584dcf6f9ef4bf6d8a0b8cf8">00287</a>     <span class="keyword">typedef</span> uint64_t   sigset_t;
<a name="l00288"></a>00288 
<a name="l00290"></a><a class="code" href="structTru64_1_1ushared__state.html">00290</a>     <span class="keyword">struct </span><a class="code" href="structTru64_1_1ushared__state.html" title="Thread state shared between user &amp;amp; kernel.">ushared_state</a> {
<a name="l00291"></a><a class="code" href="structTru64_1_1ushared__state.html#aaf016fc53f52d47f9de490b1707864fc">00291</a>         <a class="code" href="classTru64.html#a7607d423584dcf6f9ef4bf6d8a0b8cf8" title="Signal set.">sigset_t</a>        <a class="code" href="structTru64_1_1ushared__state.html#aaf016fc53f52d47f9de490b1707864fc" title="thread signal mask">sigmask</a>;        
<a name="l00292"></a><a class="code" href="structTru64_1_1ushared__state.html#af14678f96ddb121dcd5851fbc608223c">00292</a>         <a class="code" href="classTru64.html#a7607d423584dcf6f9ef4bf6d8a0b8cf8" title="Signal set.">sigset_t</a>        <a class="code" href="structTru64_1_1ushared__state.html#af14678f96ddb121dcd5851fbc608223c" title="thread pending mask">sig</a>;            
<a name="l00293"></a>00293         <span class="comment">// struct nxm_pth_state *</span>
<a name="l00294"></a><a class="code" href="structTru64_1_1ushared__state.html#a1d3f38235993df97708a03b021d4c117">00294</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="structTru64_1_1ushared__state.html#a1d3f38235993df97708a03b021d4c117" title="out-of-line state">pth_id</a>; 
<a name="l00295"></a><a class="code" href="structTru64_1_1ushared__state.html#a122efcad2e6dcc8689a1db62f1d79c80">00295</a>         <span class="keywordtype">int</span>             <a class="code" href="structTru64_1_1ushared__state.html#a122efcad2e6dcc8689a1db62f1d79c80" title="shared flags">flags</a>;          
<a name="l00296"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#ac24e0f8db00c21320591c78141f02db3">00296</a> <span class="preprocessor">#define US_SIGSTACK     0x1             // thread called sigaltstack</span>
<a name="l00297"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#a4e9bea1f0bf5eaa0a3de4cf4f96fb703">00297</a> <span class="preprocessor"></span><span class="preprocessor">#define US_ONSTACK      0x2             // thread is running on altstack</span>
<a name="l00298"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#a8e6cbedf17c907260a68ba151e334beb">00298</a> <span class="preprocessor"></span><span class="preprocessor">#define US_PROFILE      0x4             // thread called profil</span>
<a name="l00299"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#a05dc14b0b6e83cebfc7e62a67b99a5b6">00299</a> <span class="preprocessor"></span><span class="preprocessor">#define US_SYSCALL      0x8             // thread in syscall</span>
<a name="l00300"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#a464d91849cd67867458ccb546abccb3f">00300</a> <span class="preprocessor"></span><span class="preprocessor">#define US_TRAP         0x10            // thread has trapped</span>
<a name="l00301"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#a689c6ea145e701718abb3b2a4dc8c519">00301</a> <span class="preprocessor"></span><span class="preprocessor">#define US_YELLOW       0x20            // thread has mellowed yellow</span>
<a name="l00302"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#add5a5fbe7fe7caed1b149f2a608af2e2">00302</a> <span class="preprocessor"></span><span class="preprocessor">#define US_YZONE        0x40            // thread has zoned out</span>
<a name="l00303"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#aa03cff48983215334518b8b1520a8430">00303</a> <span class="preprocessor"></span><span class="preprocessor">#define US_FP_OWNED     0x80            // thread used floating point</span>
<a name="l00304"></a>00304 <span class="preprocessor"></span>
<a name="l00305"></a><a class="code" href="structTru64_1_1ushared__state.html#a97fc2e740f72d98b016a8eb48410aa25">00305</a>         <span class="keywordtype">int</span>             <a class="code" href="structTru64_1_1ushared__state.html#a97fc2e740f72d98b016a8eb48410aa25" title="thread&amp;#39;s cancelation state">cancel_state</a>;   
<a name="l00306"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#a3ee52ec290fe142e43267b7bc43dc2f1">00306</a> <span class="preprocessor">#define US_CANCEL         0x1           // cancel pending</span>
<a name="l00307"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#a819fb2af3c0a9d945735a98248d1a983">00307</a> <span class="preprocessor"></span><span class="preprocessor">#define US_NOCANCEL       0X2           // synch cancel disabled</span>
<a name="l00308"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#abe6a60485e6bd345b1a3c98d2a3c5d3f">00308</a> <span class="preprocessor"></span><span class="preprocessor">#define US_SYS_NOCANCEL   0x4           // syscall cancel disabled</span>
<a name="l00309"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#a8fb59dd3e825f2e645ccd2708ec6153c">00309</a> <span class="preprocessor"></span><span class="preprocessor">#define US_ASYNC_NOCANCEL 0x8           // asynch cancel disabled</span>
<a name="l00310"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#aff7376b113f465e1313234392ac9a49a">00310</a> <span class="preprocessor"></span><span class="preprocessor">#define US_CANCEL_BITS  (US_NOCANCEL|US_SYS_NOCANCEL|US_ASYNC_NOCANCEL)</span>
<a name="l00311"></a><a class="code" href="kern_2tru64_2tru64_8hh.html#a346c9edb572174f9be6d764ea22df611">00311</a> <span class="preprocessor"></span><span class="preprocessor">#define US_CANCEL_MASK  (US_CANCEL|US_NOCANCEL|US_SYS_NOCANCEL| \</span>
<a name="l00312"></a>00312 <span class="preprocessor">                         US_ASYNC_NOCANCEL)</span>
<a name="l00313"></a>00313 <span class="preprocessor"></span>
<a name="l00314"></a>00314         <span class="comment">// These are semi-shared. They are always visible to</span>
<a name="l00315"></a>00315         <span class="comment">// the kernel but are never context-switched by the library.</span>
<a name="l00316"></a>00316 
<a name="l00317"></a><a class="code" href="structTru64_1_1ushared__state.html#a222054d16c8eaacdb0144837e04d8769">00317</a>         <span class="keywordtype">int</span>             <a class="code" href="structTru64_1_1ushared__state.html#a222054d16c8eaacdb0144837e04d8769" title="scheduler&amp;#39;s synchronous signals">nxm_ssig</a>;       
<a name="l00318"></a><a class="code" href="structTru64_1_1ushared__state.html#a7ac2f77afb8c5f51271720f1648ff29e">00318</a>         <span class="keywordtype">int</span>             <a class="code" href="structTru64_1_1ushared__state.html#a7ac2f77afb8c5f51271720f1648ff29e" title="reserved1">reserved1</a>;      
<a name="l00319"></a><a class="code" href="structTru64_1_1ushared__state.html#a7991be25aefae71536c01229bd1fdbc2">00319</a>         int64_t            <a class="code" href="structTru64_1_1ushared__state.html#a7991be25aefae71536c01229bd1fdbc2" title="scheduler active">nxm_active</a>;     
<a name="l00320"></a><a class="code" href="structTru64_1_1ushared__state.html#a6f2f2e4424259dda39c493026d0e5523">00320</a>         int64_t            <a class="code" href="structTru64_1_1ushared__state.html#a6f2f2e4424259dda39c493026d0e5523" title="reserved2">reserved2</a>;   
<a name="l00321"></a>00321     };
<a name="l00322"></a>00322 
<a name="l00323"></a><a class="code" href="structTru64_1_1nxm__sched__state.html">00323</a>     <span class="keyword">struct </span><a class="code" href="structTru64_1_1nxm__sched__state.html">nxm_sched_state</a> {
<a name="l00324"></a><a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762">00324</a>         <span class="keyword">struct          </span><a class="code" href="structTru64_1_1ushared__state.html" title="Thread state shared between user &amp;amp; kernel.">ushared_state</a> <a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762" title="state own by user thread">nxm_u</a>;    
<a name="l00325"></a><a class="code" href="structTru64_1_1nxm__sched__state.html#aba524589f123ca4e6de9212c27415826">00325</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="structTru64_1_1nxm__sched__state.html#aba524589f123ca4e6de9212c27415826" title="scheduler state / slot">nxm_bits</a>;               
<a name="l00326"></a><a class="code" href="structTru64_1_1nxm__sched__state.html#a72cad77325a4e7fb71864c567adcc844">00326</a>         <span class="keywordtype">int</span>             <a class="code" href="structTru64_1_1nxm__sched__state.html#a72cad77325a4e7fb71864c567adcc844" title="quantum count-down value">nxm_quantum</a>;            
<a name="l00327"></a><a class="code" href="structTru64_1_1nxm__sched__state.html#a1c03fc398f66891f9a830a727319e3a9">00327</a>         <span class="keywordtype">int</span>             <a class="code" href="structTru64_1_1nxm__sched__state.html#a1c03fc398f66891f9a830a727319e3a9" title="quantum reset value">nxm_set_quantum</a>;        
<a name="l00328"></a><a class="code" href="structTru64_1_1nxm__sched__state.html#a893a6ea42dba85b4a5afa6d2baabcba3">00328</a>         <span class="keywordtype">int</span>             <a class="code" href="structTru64_1_1nxm__sched__state.html#a893a6ea42dba85b4a5afa6d2baabcba3" title="syscall state">nxm_sysevent</a>;           
<a name="l00329"></a>00329         <span class="comment">// struct nxm_upcall *</span>
<a name="l00330"></a><a class="code" href="structTru64_1_1nxm__sched__state.html#a4594b4a0a2ad37efe15fec110d2fc79a">00330</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a>        <a class="code" href="structTru64_1_1nxm__sched__state.html#a4594b4a0a2ad37efe15fec110d2fc79a" title="stack ptr of null thread">nxm_uc_ret</a>; 
<a name="l00331"></a>00331         <span class="comment">// void *</span>
<a name="l00332"></a><a class="code" href="structTru64_1_1nxm__sched__state.html#a20ee3e5702cdc2fab42f11671f1c87d0">00332</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="structTru64_1_1nxm__sched__state.html#a20ee3e5702cdc2fab42f11671f1c87d0" title="scheduler&amp;#39;s thread id">nxm_tid</a>;               
<a name="l00333"></a><a class="code" href="structTru64_1_1nxm__sched__state.html#a0726086ea51daca99c0f2e77b5db17a4">00333</a>         int64_t            <a class="code" href="structTru64_1_1nxm__sched__state.html#a0726086ea51daca99c0f2e77b5db17a4" title="page fault address">nxm_va</a>;                 
<a name="l00334"></a>00334         <span class="comment">// struct nxm_pth_state *</span>
<a name="l00335"></a><a class="code" href="structTru64_1_1nxm__sched__state.html#a3c2b51af7a30c7813530d8c76b9dda7b">00335</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="structTru64_1_1nxm__sched__state.html#a3c2b51af7a30c7813530d8c76b9dda7b" title="id of null thread">nxm_pthid</a>; 
<a name="l00336"></a><a class="code" href="structTru64_1_1nxm__sched__state.html#a868ea8c021ebd1e979d5445a4ecf914b">00336</a>         uint64_t   <a class="code" href="structTru64_1_1nxm__sched__state.html#a868ea8c021ebd1e979d5445a4ecf914b" title="bound PCS thread count">nxm_bound_pcs_count</a>;    
<a name="l00337"></a><a class="code" href="structTru64_1_1nxm__sched__state.html#a7589cfa1221e975f8ac369601a49975c">00337</a>         int64_t            <a class="code" href="structTru64_1_1nxm__sched__state.html#a7589cfa1221e975f8ac369601a49975c" title="pad">pad</a>[2];         
<a name="l00338"></a>00338     };
<a name="l00339"></a>00339 
<a name="l00341"></a><a class="code" href="structTru64_1_1nxm__shared.html">00341</a>     <span class="keyword">struct </span><a class="code" href="structTru64_1_1nxm__shared.html" title="nxm_shared.">nxm_shared</a> {
<a name="l00342"></a><a class="code" href="structTru64_1_1nxm__shared.html#ab2eed37f2e6ce7716615bf8f6743faef">00342</a>         int64_t <a class="code" href="structTru64_1_1nxm__shared.html#ab2eed37f2e6ce7716615bf8f6743faef" title="address of upcall routine">nxm_callback</a>;              
<a name="l00343"></a><a class="code" href="structTru64_1_1nxm__shared.html#aaece1267f777a8708c6a685eb4ad2089">00343</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structTru64_1_1nxm__shared.html#aaece1267f777a8708c6a685eb4ad2089" title="version number">nxm_version</a>;       
<a name="l00344"></a><a class="code" href="structTru64_1_1nxm__shared.html#a81b90b6728f93b532881d3bbe8c92d9f">00344</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structTru64_1_1nxm__shared.html#a81b90b6728f93b532881d3bbe8c92d9f" title="correction factor for TEB">nxm_uniq_offset</a>; 
<a name="l00345"></a><a class="code" href="structTru64_1_1nxm__shared.html#afdcaf8f4a87c52bac6a3022db60fec9a">00345</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structTru64_1_1nxm__shared.html#afdcaf8f4a87c52bac6a3022db60fec9a" title="pad1">pad1</a>;            
<a name="l00346"></a><a class="code" href="structTru64_1_1nxm__shared.html#aabd45f5765b5897527d18f60ddf2b50d">00346</a>         int64_t <a class="code" href="structTru64_1_1nxm__shared.html#aabd45f5765b5897527d18f60ddf2b50d" title="future growth">space</a>[2];                  
<a name="l00347"></a><a class="code" href="structTru64_1_1nxm__shared.html#ab10744159f81356c69892f1c49d1965b">00347</a>         <span class="keyword">struct </span><a class="code" href="structTru64_1_1nxm__sched__state.html">nxm_sched_state</a> <a class="code" href="structTru64_1_1nxm__shared.html#ab10744159f81356c69892f1c49d1965b" title="array of shared areas">nxm_ss</a>[1]; 
<a name="l00348"></a>00348     };
<a name="l00349"></a>00349 
<a name="l00351"></a><a class="code" href="classTru64.html#ab144d8d176cdd3ce556458124e56699c">00351</a>     <span class="keyword">enum</span> <a class="code" href="classTru64.html#ab144d8d176cdd3ce556458124e56699c" title="nxm_slot_state_t.">nxm_slot_state_t</a> {
<a name="l00352"></a><a class="code" href="classTru64.html#ab144d8d176cdd3ce556458124e56699caa823217c9f812d166d408b1ca7ad80cd">00352</a>         NXM_SLOT_AVAIL,
<a name="l00353"></a><a class="code" href="classTru64.html#ab144d8d176cdd3ce556458124e56699ca2d7429a4fde6c8da8c28cc5a9aa7fa43">00353</a>         NXM_SLOT_BOUND,
<a name="l00354"></a><a class="code" href="classTru64.html#ab144d8d176cdd3ce556458124e56699cabc1c1a794ff803ab71372ee2030cf27f">00354</a>         NXM_SLOT_UNBOUND,
<a name="l00355"></a><a class="code" href="classTru64.html#ab144d8d176cdd3ce556458124e56699ca6fd539981c71b8c2d9e779cf7f144604">00355</a>         <a class="code" href="classTru64.html#ab144d8d176cdd3ce556458124e56699ca6fd539981c71b8c2d9e779cf7f144604">NXM_SLOT_EMPTY</a>
<a name="l00356"></a>00356     };
<a name="l00357"></a>00357 
<a name="l00359"></a><a class="code" href="structTru64_1_1nxm__config__info.html">00359</a>     <span class="keyword">struct </span><a class="code" href="structTru64_1_1nxm__config__info.html" title="nxm_config_info">nxm_config_info</a> {
<a name="l00360"></a><a class="code" href="structTru64_1_1nxm__config__info.html#a2c01d6626fde46d7800dca85af307a8a">00360</a>         <span class="keywordtype">int</span> <a class="code" href="structTru64_1_1nxm__config__info.html#a2c01d6626fde46d7800dca85af307a8a" title="max number of VP slots per RAD">nxm_nslots_per_rad</a>;         
<a name="l00361"></a><a class="code" href="structTru64_1_1nxm__config__info.html#a5ef9541b187f999f0e433b3a6350453a">00361</a>         <span class="keywordtype">int</span> <a class="code" href="structTru64_1_1nxm__config__info.html#a5ef9541b187f999f0e433b3a6350453a" title="max number of RADs">nxm_nrads</a>;                  
<a name="l00362"></a>00362         <span class="comment">// nxm_slot_state_t *</span>
<a name="l00363"></a><a class="code" href="structTru64_1_1nxm__config__info.html#a13818ffd6ea98b18e47c1444a2c9c7e5">00363</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="structTru64_1_1nxm__config__info.html#a13818ffd6ea98b18e47c1444a2c9c7e5" title="per-VP slot state">nxm_slot_state</a>; 
<a name="l00364"></a>00364         <span class="comment">// struct nxm_shared *</span>
<a name="l00365"></a><a class="code" href="structTru64_1_1nxm__config__info.html#a543e666c90cbdd80392bf46b91c6b0ec">00365</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="structTru64_1_1nxm__config__info.html#a543e666c90cbdd80392bf46b91c6b0ec" title="per-RAD shared areas">nxm_rad</a>[1];  
<a name="l00366"></a>00366     };
<a name="l00367"></a>00367 
<a name="l00369"></a><a class="code" href="classTru64.html#a3a3286d0ebbf2805fa6691e67da03a86">00369</a>     <span class="keyword">enum</span> <a class="code" href="classTru64.html#a3a3286d0ebbf2805fa6691e67da03a86" title="For nxm_thread_create.">nxm_thread_type</a> {
<a name="l00370"></a><a class="code" href="classTru64.html#a3a3286d0ebbf2805fa6691e67da03a86ac0ebb719518275cf1770e68a0707e676">00370</a>         <a class="code" href="classTru64.html#a3a3286d0ebbf2805fa6691e67da03a86ac0ebb719518275cf1770e68a0707e676">NXM_TYPE_SCS</a>    = 0,
<a name="l00371"></a><a class="code" href="classTru64.html#a3a3286d0ebbf2805fa6691e67da03a86a50faba19ef877cfcfb35eebcb66bcf17">00371</a>         <a class="code" href="classTru64.html#a3a3286d0ebbf2805fa6691e67da03a86a50faba19ef877cfcfb35eebcb66bcf17">NXM_TYPE_VP</a>             = 1,
<a name="l00372"></a><a class="code" href="classTru64.html#a3a3286d0ebbf2805fa6691e67da03a86ad998492a98ebc1d6304bb556fadc044e">00372</a>         <a class="code" href="classTru64.html#a3a3286d0ebbf2805fa6691e67da03a86ad998492a98ebc1d6304bb556fadc044e">NXM_TYPE_MANAGER</a>        = 2
<a name="l00373"></a>00373     };
<a name="l00374"></a>00374 
<a name="l00376"></a><a class="code" href="structTru64_1_1nxm__thread__attr.html">00376</a>     <span class="keyword">struct </span><a class="code" href="structTru64_1_1nxm__thread__attr.html" title="Thread attributes.">nxm_thread_attr</a> {
<a name="l00377"></a><a class="code" href="structTru64_1_1nxm__thread__attr.html#aab65c154be4c44a94b9f4728ea0e575d">00377</a>         <span class="keywordtype">int</span> <a class="code" href="structTru64_1_1nxm__thread__attr.html#aab65c154be4c44a94b9f4728ea0e575d" title="version">version</a>;    
<a name="l00378"></a><a class="code" href="structTru64_1_1nxm__thread__attr.html#a7bee3f9434ebaaa5c03fa01ac18e28f0">00378</a>         <span class="keywordtype">int</span> <a class="code" href="structTru64_1_1nxm__thread__attr.html#a7bee3f9434ebaaa5c03fa01ac18e28f0" title="type">type</a>;       
<a name="l00379"></a><a class="code" href="structTru64_1_1nxm__thread__attr.html#a679c03a85f176652f1d30c188dbc4b72">00379</a>         <span class="keywordtype">int</span> <a class="code" href="structTru64_1_1nxm__thread__attr.html#a679c03a85f176652f1d30c188dbc4b72" title="cancel_flags">cancel_flags</a>;       
<a name="l00380"></a><a class="code" href="structTru64_1_1nxm__thread__attr.html#ac238fa0a4444d9fe822356b1cb4e1686">00380</a>         <span class="keywordtype">int</span> <a class="code" href="structTru64_1_1nxm__thread__attr.html#ac238fa0a4444d9fe822356b1cb4e1686" title="priority">priority</a>;   
<a name="l00381"></a><a class="code" href="structTru64_1_1nxm__thread__attr.html#ab28bdf36f558962527fd65c944ac1af0">00381</a>         <span class="keywordtype">int</span> <a class="code" href="structTru64_1_1nxm__thread__attr.html#ab28bdf36f558962527fd65c944ac1af0" title="policy">policy</a>;     
<a name="l00382"></a><a class="code" href="structTru64_1_1nxm__thread__attr.html#a12e52fcbe012d0750c421a2498f826da">00382</a>         <span class="keywordtype">int</span> <a class="code" href="structTru64_1_1nxm__thread__attr.html#a12e52fcbe012d0750c421a2498f826da" title="signal_type">signal_type</a>;        
<a name="l00383"></a>00383         <span class="comment">// void *</span>
<a name="l00384"></a><a class="code" href="structTru64_1_1nxm__thread__attr.html#a6542eed244f6eb9b06622992d849000a">00384</a>         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="structTru64_1_1nxm__thread__attr.html#a6542eed244f6eb9b06622992d849000a" title="pthid">pthid</a>;     
<a name="l00385"></a><a class="code" href="structTru64_1_1nxm__thread__attr.html#a79650d234386ea1ec43e38dfd261db91">00385</a>         <a class="code" href="classTru64.html#a7607d423584dcf6f9ef4bf6d8a0b8cf8" title="Signal set.">sigset_t</a> <a class="code" href="structTru64_1_1nxm__thread__attr.html#a79650d234386ea1ec43e38dfd261db91" title="sigmask">sigmask</a>;       
<a name="l00386"></a>00386 
<a name="l00387"></a>00387         <span class="keyword">struct </span>{
<a name="l00388"></a><a class="code" href="structTru64_1_1nxm__thread__attr.html#ac86d538d9d1d186556b4d4907a46d153">00388</a>             uint64_t <a class="code" href="structTru64_1_1nxm__thread__attr.html#ac86d538d9d1d186556b4d4907a46d153" title="pc">pc</a>;        
<a name="l00389"></a><a class="code" href="structTru64_1_1nxm__thread__attr.html#aeda173394748ec0599413255201bb0d7">00389</a>             uint64_t <a class="code" href="structTru64_1_1nxm__thread__attr.html#aeda173394748ec0599413255201bb0d7" title="sp">sp</a>;        
<a name="l00390"></a><a class="code" href="structTru64_1_1nxm__thread__attr.html#a9c01b691ba2d8c949f4f54c1b92ab4af">00390</a>             uint64_t <a class="code" href="structTru64_1_1nxm__thread__attr.html#a9c01b691ba2d8c949f4f54c1b92ab4af" title="a0">a0</a>;        
<a name="l00391"></a>00391         } <a class="code" href="structTru64_1_1nxm__thread__attr.html#a320718d0c02721664b619a0b1faf1442" title="Initial register values.">registers</a>;
<a name="l00392"></a><a class="code" href="structTru64_1_1nxm__thread__attr.html#a499424e3c962429dd3f22741c1182800">00392</a>         uint64_t <a class="code" href="structTru64_1_1nxm__thread__attr.html#a499424e3c962429dd3f22741c1182800" title="pad2">pad2</a>[2];       
<a name="l00393"></a>00393     };
<a name="l00394"></a>00394 
<a name="l00398"></a>00398     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00399"></a>00399     <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00400"></a><a class="code" href="classTru64.html#a8f9217e8f6aa770e161dd88a624cde31">00400</a>     <a class="code" href="classTru64.html#a8f9217e8f6aa770e161dd88a624cde31" title="Helper function to convert a host statfs buffer to a target statfs buffer.">copyOutStatfsBuf</a>(<a class="code" href="classSETranslatingPortProxy.html">SETranslatingPortProxy</a> &amp;mem, <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="namespaceX86ISA.html#a79b5c08c190167d17c9b9b3fd40112f6">addr</a>,
<a name="l00401"></a>00401                      <a class="code" href="kern_2tru64_2tru64_8hh.html#a1a8529336c3f2704cb49ee2cd97412a8">global_statfs</a> *host)
<a name="l00402"></a>00402     {
<a name="l00403"></a>00403         <span class="keyword">using namespace </span>TheISA;
<a name="l00404"></a>00404 
<a name="l00405"></a>00405         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;T&gt;</a> tgt(addr);
<a name="l00406"></a>00406 
<a name="l00407"></a>00407 <span class="preprocessor">#if defined(__OpenBSD__) || defined(__APPLE__) || defined(__FreeBSD__)</span>
<a name="l00408"></a>00408 <span class="preprocessor"></span>        tgt-&gt;f_type = 0;
<a name="l00409"></a>00409 <span class="preprocessor">#else</span>
<a name="l00410"></a>00410 <span class="preprocessor"></span>        tgt-&gt;f_type = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(host-&gt;f_type);
<a name="l00411"></a>00411 <span class="preprocessor">#endif</span>
<a name="l00412"></a>00412 <span class="preprocessor"></span>        tgt-&gt;f_bsize = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(host-&gt;f_bsize);
<a name="l00413"></a>00413         tgt-&gt;f_blocks = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(host-&gt;f_blocks);
<a name="l00414"></a>00414         tgt-&gt;f_bfree = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(host-&gt;f_bfree);
<a name="l00415"></a>00415         tgt-&gt;f_bavail = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(host-&gt;f_bavail);
<a name="l00416"></a>00416         tgt-&gt;f_files = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(host-&gt;f_files);
<a name="l00417"></a>00417         tgt-&gt;f_ffree = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(host-&gt;f_ffree);
<a name="l00418"></a>00418 
<a name="l00419"></a>00419         <span class="comment">// Is this as string normally?</span>
<a name="l00420"></a>00420         memcpy(&amp;tgt-&gt;f_fsid, &amp;host-&gt;f_fsid, <span class="keyword">sizeof</span>(host-&gt;f_fsid));
<a name="l00421"></a>00421 
<a name="l00422"></a>00422         tgt.<a class="code" href="classBaseBufferArg.html#ac5e30574eafcdb5bd84d71479288eb73">copyOut</a>(mem);
<a name="l00423"></a>00423     }
<a name="l00424"></a>00424 
<a name="l00425"></a>00425 
<a name="l00427"></a><a class="code" href="classTru64.html#a5b5661c71b9db850c567c18c4d8b3742">00427</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classTru64.html#a5b5661c71b9db850c567c18c4d8b3742" title="The target system&amp;#39;s hostname.">hostname</a>;
<a name="l00428"></a>00428 
<a name="l00429"></a>00429 
<a name="l00431"></a>00431     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l00432"></a><a class="code" href="classTru64.html#aa468c69f2e5266badacf905dde5754b0">00432</a>     <a class="code" href="classTru64.html#aa468c69f2e5266badacf905dde5754b0" title="Target getdirentries() handler.">getdirentriesFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l00433"></a>00433                       <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l00434"></a>00434     {
<a name="l00435"></a>00435         <span class="keyword">using namespace </span>TheISA;
<a name="l00436"></a>00436 
<a name="l00437"></a>00437 <span class="preprocessor">#if defined(__APPLE__) || defined(__CYGWIN__)</span>
<a name="l00438"></a>00438 <span class="preprocessor"></span>        <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;getdirent not implemented on cygwin!&quot;</span>);
<a name="l00439"></a>00439 <span class="preprocessor">#else</span>
<a name="l00440"></a>00440 <span class="preprocessor"></span>        <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l00441"></a>00441         <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a6bb1dd177dcfe2a8a54a396f8942a098">fd</a> = process-&gt;<a class="code" href="classProcess.html#adcc9e55c7c0489f57ba7714df77baa42">sim_fd</a>(process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>));
<a name="l00442"></a>00442         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> tgt_buf = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00443"></a>00443         <span class="keywordtype">int</span> tgt_nbytes = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00444"></a>00444         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> tgt_basep = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00445"></a>00445 
<a name="l00446"></a>00446         <span class="keywordtype">char</span> * <span class="keyword">const</span> host_buf = <span class="keyword">new</span> <span class="keywordtype">char</span>[tgt_nbytes];
<a name="l00447"></a>00447 
<a name="l00448"></a>00448         <span class="comment">// just pass basep through uninterpreted.</span>
<a name="l00449"></a>00449         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;int64_t&gt;</a> basep(tgt_basep);
<a name="l00450"></a>00450         basep.<a class="code" href="classBaseBufferArg.html#a5313d1eb0008afa2840ecb223e1f7e2c">copyIn</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00451"></a>00451         <span class="keywordtype">long</span> host_basep = (off_t)<a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>((int64_t)*basep);
<a name="l00452"></a>00452         <span class="keywordtype">int</span> host_result = getdirentries(<a class="code" href="namespaceArmISA.html#a6bb1dd177dcfe2a8a54a396f8942a098">fd</a>, host_buf, tgt_nbytes, &amp;host_basep);
<a name="l00453"></a>00453 
<a name="l00454"></a>00454         <span class="comment">// check for error</span>
<a name="l00455"></a>00455         <span class="keywordflow">if</span> (host_result &lt; 0) {
<a name="l00456"></a>00456             <span class="keyword">delete</span> [] host_buf;
<a name="l00457"></a>00457             <span class="keywordflow">return</span> -errno;
<a name="l00458"></a>00458         }
<a name="l00459"></a>00459 
<a name="l00460"></a>00460         <span class="comment">// no error: copy results back to target space</span>
<a name="l00461"></a>00461         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> tgt_buf_ptr = tgt_buf;
<a name="l00462"></a>00462         <span class="keywordtype">char</span> *host_buf_ptr = host_buf;
<a name="l00463"></a>00463         <span class="keywordtype">char</span> *host_buf_end = host_buf + host_result;
<a name="l00464"></a>00464         <span class="keywordflow">while</span> (host_buf_ptr &lt; host_buf_end) {
<a name="l00465"></a>00465             <a class="code" href="kern_2tru64_2tru64_8hh.html#ae8a7ba972c525e3d137846c7f1d0a1d5">global_dirent</a> *host_dp = (<a class="code" href="kern_2tru64_2tru64_8hh.html#ae8a7ba972c525e3d137846c7f1d0a1d5">global_dirent</a> *)host_buf_ptr;
<a name="l00466"></a>00466             <span class="keywordtype">int</span> namelen = strlen(host_dp-&gt;d_name);
<a name="l00467"></a>00467 
<a name="l00468"></a>00468             <span class="comment">// Actual size includes padded string rounded up for alignment.</span>
<a name="l00469"></a>00469             <span class="comment">// Subtract 256 for dummy char array in Tru64::dirent definition.</span>
<a name="l00470"></a>00470             <span class="comment">// Add 1 to namelen for terminating null char.</span>
<a name="l00471"></a>00471             <span class="keywordtype">int</span> tgt_bufsize = <span class="keyword">sizeof</span>(<a class="code" href="structTru64_1_1dirent.html" title="For getdirentries().">Tru64::dirent</a>) - 256 + <a class="code" href="intmath_8hh.html#a4d254a89b294890f6ce3a474f4e8c6c7">roundUp</a>(namelen+1, 8);
<a name="l00472"></a>00472             <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;Tru64::dirent&gt;</a> tgt_dp(tgt_buf_ptr, tgt_bufsize);
<a name="l00473"></a>00473             tgt_dp-&gt;d_ino = host_dp-&gt;d_ino;
<a name="l00474"></a>00474             tgt_dp-&gt;d_reclen = tgt_bufsize;
<a name="l00475"></a>00475             tgt_dp-&gt;d_namlen = namelen;
<a name="l00476"></a>00476             strcpy(tgt_dp-&gt;d_name, host_dp-&gt;d_name);
<a name="l00477"></a>00477             tgt_dp.<a class="code" href="classBaseBufferArg.html#ac5e30574eafcdb5bd84d71479288eb73">copyOut</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00478"></a>00478 
<a name="l00479"></a>00479             tgt_buf_ptr += tgt_bufsize;
<a name="l00480"></a>00480             host_buf_ptr += host_dp-&gt;d_reclen;
<a name="l00481"></a>00481         }
<a name="l00482"></a>00482 
<a name="l00483"></a>00483         <span class="keyword">delete</span> [] host_buf;
<a name="l00484"></a>00484 
<a name="l00485"></a>00485         *basep = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>((int64_t)host_basep);
<a name="l00486"></a>00486         basep.<a class="code" href="classBaseBufferArg.html#ac5e30574eafcdb5bd84d71479288eb73">copyOut</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00487"></a>00487 
<a name="l00488"></a>00488         <span class="keywordflow">return</span> tgt_buf_ptr - tgt_buf;
<a name="l00489"></a>00489 <span class="preprocessor">#endif</span>
<a name="l00490"></a>00490 <span class="preprocessor"></span>    }
<a name="l00491"></a>00491 
<a name="l00493"></a>00493     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l00494"></a><a class="code" href="classTru64.html#ab42860897117d63d74f09336d4bd3055">00494</a>     <a class="code" href="classTru64.html#ab42860897117d63d74f09336d4bd3055" title="Target sigreturn() handler.">sigreturnFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l00495"></a>00495                   <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l00496"></a>00496     {
<a name="l00497"></a>00497         <span class="keyword">using namespace </span>TheISA;
<a name="l00498"></a>00498 
<a name="l00499"></a>00499         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l00500"></a>00500         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;Tru64::sigcontext&gt;</a> sc(process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>));
<a name="l00501"></a>00501 
<a name="l00502"></a>00502         sc.copyIn(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00503"></a>00503 
<a name="l00504"></a>00504         <span class="comment">// Restore state from sigcontext structure.</span>
<a name="l00505"></a>00505         <span class="comment">// Note that we&#39;ll advance PC &lt;- NPC before the end of the cycle,</span>
<a name="l00506"></a>00506         <span class="comment">// so we need to restore the desired PC into NPC.</span>
<a name="l00507"></a>00507         <span class="comment">// The current regs-&gt;pc will get clobbered.</span>
<a name="l00508"></a>00508         <a class="code" href="namespaceAlphaISA.html#a233e755911c9143f96bef37eedb1e009">PCState</a> <a class="code" href="namespaceMipsISA.html#a4f7ed975e7137b5c369214789649451f">pc</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>();
<a name="l00509"></a>00509         <a class="code" href="namespaceMipsISA.html#a4f7ed975e7137b5c369214789649451f">pc</a>.npc(<a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(sc-&gt;sc_pc));
<a name="l00510"></a>00510         tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>(<a class="code" href="namespaceMipsISA.html#a4f7ed975e7137b5c369214789649451f">pc</a>);
<a name="l00511"></a>00511 
<a name="l00512"></a>00512         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; 31; ++<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>) {
<a name="l00513"></a>00513             tc-&gt;<a class="code" href="classThreadContext.html#ad008e016fd7ac09d11a85a80aa917b41">setIntReg</a>(<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>, <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(sc-&gt;sc_regs[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>]));
<a name="l00514"></a>00514             tc-&gt;<a class="code" href="classThreadContext.html#a6cfd6de3e1524055c4df2c2cf46832ca">setFloatRegBits</a>(<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>, <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(sc-&gt;sc_fpregs[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>]));
<a name="l00515"></a>00515         }
<a name="l00516"></a>00516 
<a name="l00517"></a>00517         tc-&gt;<a class="code" href="classThreadContext.html#a50d110467c213c1caec6ff304fc44521">setMiscRegNoEffect</a>(<a class="code" href="namespaceAlphaISA.html#ad058b0990dcb8ed4d0b373396689fa12a5a65f564d02ab04f88a6ace6cee20a6c">AlphaISA::MISCREG_FPCR</a>, <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(sc-&gt;sc_fpcr));
<a name="l00518"></a>00518 
<a name="l00519"></a>00519         <span class="keywordflow">return</span> 0;
<a name="l00520"></a>00520     }
<a name="l00521"></a>00521 
<a name="l00522"></a>00522 
<a name="l00523"></a>00523     <span class="comment">//</span>
<a name="l00524"></a>00524     <span class="comment">// Mach syscalls -- identified by negated syscall numbers</span>
<a name="l00525"></a>00525     <span class="comment">//</span>
<a name="l00526"></a>00526 
<a name="l00528"></a>00528     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l00529"></a><a class="code" href="classTru64.html#a6dc07d43f9d46db173ebcf1df14b8be7">00529</a>     <a class="code" href="classTru64.html#a6dc07d43f9d46db173ebcf1df14b8be7" title="Create a stack region for a thread.">stack_createFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l00530"></a>00530                      <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l00531"></a>00531     {
<a name="l00532"></a>00532         <span class="keyword">using namespace </span>TheISA;
<a name="l00533"></a>00533 
<a name="l00534"></a>00534         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l00535"></a>00535         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;Tru64::vm_stack&gt;</a> argp(process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>));
<a name="l00536"></a>00536 
<a name="l00537"></a>00537         argp.copyIn(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00538"></a>00538 
<a name="l00539"></a>00539         <span class="keywordtype">int</span> stack_size =
<a name="l00540"></a>00540             <a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(argp-&gt;rsize) + <a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(argp-&gt;ysize) + <a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(argp-&gt;gsize);
<a name="l00541"></a>00541 
<a name="l00542"></a>00542         <span class="comment">// if the user chose an address, just let them have it.  Otherwise</span>
<a name="l00543"></a>00543         <span class="comment">// pick one for them.</span>
<a name="l00544"></a>00544         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> stack_base = <a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(argp-&gt;address);
<a name="l00545"></a>00545 
<a name="l00546"></a>00546         <span class="keywordflow">if</span> (stack_base == 0) {
<a name="l00547"></a>00547             stack_base = process-&gt;<a class="code" href="classProcess.html#ac4a596533bb0a396529a8b380d613025">next_thread_stack_base</a>;
<a name="l00548"></a>00548             process-&gt;<a class="code" href="classProcess.html#ac4a596533bb0a396529a8b380d613025">next_thread_stack_base</a> -= stack_size;
<a name="l00549"></a>00549         }
<a name="l00550"></a>00550 
<a name="l00551"></a>00551         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> rounded_stack_base = <a class="code" href="intmath_8hh.html#a343c19b0ae885d5f3c7960987096e9d5">roundDown</a>(stack_base, <a class="code" href="namespaceAlphaISA.html#a446f4491585786873ebc4863f814b54ea146e832965500bde80b96d1e6998babd">VMPageSize</a>);
<a name="l00552"></a>00552         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> rounded_stack_size = <a class="code" href="intmath_8hh.html#a4d254a89b294890f6ce3a474f4e8c6c7">roundUp</a>(stack_size, <a class="code" href="namespaceAlphaISA.html#a446f4491585786873ebc4863f814b54ea146e832965500bde80b96d1e6998babd">VMPageSize</a>);
<a name="l00553"></a>00553 
<a name="l00554"></a>00554         <a class="code" href="trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(SyscallVerbose,
<a name="l00555"></a>00555                 <span class="stringliteral">&quot;stack_create: allocating stack @ %#x size %#x &quot;</span>
<a name="l00556"></a>00556                 <span class="stringliteral">&quot;(rounded from %#x, %#x)\n&quot;</span>,
<a name="l00557"></a>00557                 rounded_stack_base, rounded_stack_size,
<a name="l00558"></a>00558                 stack_base, stack_size);
<a name="l00559"></a>00559 
<a name="l00560"></a>00560         <span class="comment">// map memory</span>
<a name="l00561"></a>00561         process-&gt;<a class="code" href="classProcess.html#a6f44d1f7089c1d9ff3613d0c9cd67a69">allocateMem</a>(rounded_stack_base, rounded_stack_size);
<a name="l00562"></a>00562 
<a name="l00563"></a>00563         argp-&gt;address = <a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(rounded_stack_base);
<a name="l00564"></a>00564         argp.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00565"></a>00565 
<a name="l00566"></a>00566         <span class="keywordflow">return</span> 0;
<a name="l00567"></a>00567     }
<a name="l00568"></a>00568 
<a name="l00570"></a>00570     <span class="keyword">static</span>
<a name="l00571"></a><a class="code" href="classTru64.html#acb9deb3aef6a8109adf2a48df189ae6b">00571</a>     <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classTru64.html#acb9deb3aef6a8109adf2a48df189ae6b" title="NXM library version stamp.">NXM_LIB_VERSION</a> = 301003;
<a name="l00572"></a>00572 
<a name="l00576"></a>00576     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l00577"></a><a class="code" href="classTru64.html#a5a1153b992d92965b280c1419d636a93">00577</a>     <a class="code" href="classTru64.html#a5a1153b992d92965b280c1419d636a93" title="This call sets up the interface between the user and kernel schedulers by creating a shared-memory re...">nxm_task_initFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l00578"></a>00578                       <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l00579"></a>00579     {
<a name="l00580"></a>00580         <span class="keyword">using namespace </span>std;
<a name="l00581"></a>00581         <span class="keyword">using namespace </span>TheISA;
<a name="l00582"></a>00582 
<a name="l00583"></a>00583         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l00584"></a>00584         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;Tru64::nxm_task_attr&gt;</a>
<a name="l00585"></a>00585             attrp(process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>));
<a name="l00586"></a>00586         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;Addr&gt;</a> configptr_ptr(process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>));
<a name="l00587"></a>00587 
<a name="l00588"></a>00588         attrp.copyIn(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00589"></a>00589 
<a name="l00590"></a>00590         <span class="keywordflow">if</span> (<a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(attrp-&gt;nxm_version) != NXM_LIB_VERSION) {
<a name="l00591"></a>00591             cerr &lt;&lt; <span class="stringliteral">&quot;nxm_task_init: thread library version mismatch! &quot;</span>
<a name="l00592"></a>00592                  &lt;&lt; <span class="stringliteral">&quot;got &quot;</span> &lt;&lt; attrp-&gt;nxm_version
<a name="l00593"></a>00593                  &lt;&lt; <span class="stringliteral">&quot;, expected &quot;</span> &lt;&lt; NXM_LIB_VERSION &lt;&lt; endl;
<a name="l00594"></a>00594             abort();
<a name="l00595"></a>00595         }
<a name="l00596"></a>00596 
<a name="l00597"></a>00597         <span class="keywordflow">if</span> (<a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(attrp-&gt;flags) != <a class="code" href="classTru64.html#adaad3fb403ad9783f348b69f9d13b215" title="For nxm_task_init.">Tru64::NXM_TASK_INIT_VP</a>) {
<a name="l00598"></a>00598             cerr &lt;&lt; <span class="stringliteral">&quot;nxm_task_init: bad flag value &quot;</span> &lt;&lt; attrp-&gt;flags
<a name="l00599"></a>00599                  &lt;&lt; <span class="stringliteral">&quot; (expected &quot;</span> &lt;&lt; <a class="code" href="classTru64.html#adaad3fb403ad9783f348b69f9d13b215" title="For nxm_task_init.">Tru64::NXM_TASK_INIT_VP</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;
<a name="l00600"></a>00600             abort();
<a name="l00601"></a>00601         }
<a name="l00602"></a>00602 
<a name="l00603"></a>00603         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> base_addr = 0x12000; <span class="comment">// was 0x3f0000000LL;</span>
<a name="l00604"></a>00604         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> cur_addr = base_addr; <span class="comment">// next addresses to use</span>
<a name="l00605"></a>00605         <span class="comment">// first comes the config_info struct</span>
<a name="l00606"></a>00606         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> config_addr = cur_addr;
<a name="l00607"></a>00607         cur_addr += <span class="keyword">sizeof</span>(<a class="code" href="structTru64_1_1nxm__config__info.html" title="nxm_config_info">Tru64::nxm_config_info</a>);
<a name="l00608"></a>00608         <span class="comment">// next comes the per-cpu state vector</span>
<a name="l00609"></a>00609         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> slot_state_addr = cur_addr;
<a name="l00610"></a>00610         <span class="keywordtype">int</span> slot_state_size =
<a name="l00611"></a>00611             process-&gt;<a class="code" href="classProcess.html#af98d701de675ca25b48fcf023567faad">numCpus</a>() * <span class="keyword">sizeof</span>(Tru64::nxm_slot_state_t);
<a name="l00612"></a>00612         cur_addr += slot_state_size;
<a name="l00613"></a>00613         <span class="comment">// now the per-RAD state struct (we only support one RAD)</span>
<a name="l00614"></a>00614         cur_addr = 0x14000;     <span class="comment">// bump up addr for alignment</span>
<a name="l00615"></a>00615         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> rad_state_addr = cur_addr;
<a name="l00616"></a>00616         <span class="keywordtype">int</span> rad_state_size =
<a name="l00617"></a>00617             (<span class="keyword">sizeof</span>(<a class="code" href="structTru64_1_1nxm__shared.html" title="nxm_shared.">Tru64::nxm_shared</a>)
<a name="l00618"></a>00618              + (process-&gt;<a class="code" href="classProcess.html#af98d701de675ca25b48fcf023567faad">numCpus</a>()-1) * <span class="keyword">sizeof</span>(<a class="code" href="structTru64_1_1nxm__sched__state.html">Tru64::nxm_sched_state</a>));
<a name="l00619"></a>00619         cur_addr += rad_state_size;
<a name="l00620"></a>00620 
<a name="l00621"></a>00621         <span class="comment">// now initialize a config_info struct and copy it out to user space</span>
<a name="l00622"></a>00622         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;Tru64::nxm_config_info&gt;</a> config(config_addr);
<a name="l00623"></a>00623 
<a name="l00624"></a>00624         config-&gt;nxm_nslots_per_rad = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(process-&gt;<a class="code" href="classProcess.html#af98d701de675ca25b48fcf023567faad">numCpus</a>());
<a name="l00625"></a>00625         config-&gt;nxm_nrads = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(1);    <span class="comment">// only one RAD in our system!</span>
<a name="l00626"></a>00626         config-&gt;nxm_slot_state = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(slot_state_addr);
<a name="l00627"></a>00627         config-&gt;nxm_rad[0] = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(rad_state_addr);
<a name="l00628"></a>00628 
<a name="l00629"></a>00629         <span class="comment">// initialize the slot_state array and copy it out</span>
<a name="l00630"></a>00630         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;Tru64::nxm_slot_state_t&gt;</a> slot_state(slot_state_addr,
<a name="l00631"></a>00631                                                            slot_state_size);
<a name="l00632"></a>00632         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; process-&gt;<a class="code" href="classProcess.html#af98d701de675ca25b48fcf023567faad">numCpus</a>(); ++<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>) {
<a name="l00633"></a>00633             <span class="comment">// CPU 0 is bound to the calling process; all others are available</span>
<a name="l00634"></a>00634             <span class="comment">// XXX this code should have an endian conversion, but I don&#39;t think</span>
<a name="l00635"></a>00635             <span class="comment">// it works anyway</span>
<a name="l00636"></a>00636             slot_state[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>] =
<a name="l00637"></a>00637                 (<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> == 0) ? <a class="code" href="classTru64.html#ab144d8d176cdd3ce556458124e56699ca2d7429a4fde6c8da8c28cc5a9aa7fa43">Tru64::NXM_SLOT_BOUND</a> : <a class="code" href="classTru64.html#ab144d8d176cdd3ce556458124e56699caa823217c9f812d166d408b1ca7ad80cd">Tru64::NXM_SLOT_AVAIL</a>;
<a name="l00638"></a>00638         }
<a name="l00639"></a>00639 
<a name="l00640"></a>00640         <span class="comment">// same for the per-RAD &quot;shared&quot; struct.  Note that we need to</span>
<a name="l00641"></a>00641         <span class="comment">// allocate extra bytes for the per-VP array which is embedded at</span>
<a name="l00642"></a>00642         <span class="comment">// the end.</span>
<a name="l00643"></a>00643         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;Tru64::nxm_shared&gt;</a> rad_state(rad_state_addr,
<a name="l00644"></a>00644                                                     rad_state_size);
<a name="l00645"></a>00645 
<a name="l00646"></a>00646         rad_state-&gt;nxm_callback = attrp-&gt;nxm_callback;
<a name="l00647"></a>00647         rad_state-&gt;nxm_version = attrp-&gt;nxm_version;
<a name="l00648"></a>00648         rad_state-&gt;nxm_uniq_offset = attrp-&gt;nxm_uniq_offset;
<a name="l00649"></a>00649         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; process-&gt;<a class="code" href="classProcess.html#af98d701de675ca25b48fcf023567faad">numCpus</a>(); ++<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>) {
<a name="l00650"></a>00650             <a class="code" href="structTru64_1_1nxm__sched__state.html">Tru64::nxm_sched_state</a> *ssp = &amp;rad_state-&gt;nxm_ss[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>];
<a name="l00651"></a>00651             ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762" title="state own by user thread">nxm_u</a>.<a class="code" href="structTru64_1_1ushared__state.html#aaf016fc53f52d47f9de490b1707864fc" title="thread signal mask">sigmask</a> = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00652"></a>00652             ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762" title="state own by user thread">nxm_u</a>.<a class="code" href="structTru64_1_1ushared__state.html#af14678f96ddb121dcd5851fbc608223c" title="thread pending mask">sig</a> = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00653"></a>00653             ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762" title="state own by user thread">nxm_u</a>.<a class="code" href="structTru64_1_1ushared__state.html#a122efcad2e6dcc8689a1db62f1d79c80" title="shared flags">flags</a> = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00654"></a>00654             ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762" title="state own by user thread">nxm_u</a>.<a class="code" href="structTru64_1_1ushared__state.html#a97fc2e740f72d98b016a8eb48410aa25" title="thread&amp;#39;s cancelation state">cancel_state</a> = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00655"></a>00655             ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762" title="state own by user thread">nxm_u</a>.<a class="code" href="structTru64_1_1ushared__state.html#a222054d16c8eaacdb0144837e04d8769" title="scheduler&amp;#39;s synchronous signals">nxm_ssig</a> = 0;
<a name="l00656"></a>00656             ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#aba524589f123ca4e6de9212c27415826" title="scheduler state / slot">nxm_bits</a> = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00657"></a>00657             ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a72cad77325a4e7fb71864c567adcc844" title="quantum count-down value">nxm_quantum</a> = attrp-&gt;nxm_quantum;
<a name="l00658"></a>00658             ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a1c03fc398f66891f9a830a727319e3a9" title="quantum reset value">nxm_set_quantum</a> = attrp-&gt;nxm_quantum;
<a name="l00659"></a>00659             ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a893a6ea42dba85b4a5afa6d2baabcba3" title="syscall state">nxm_sysevent</a> = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00660"></a>00660 
<a name="l00661"></a>00661             <span class="keywordflow">if</span> (<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> == 0) {
<a name="l00662"></a>00662                 uint64_t uniq = tc-&gt;<a class="code" href="classThreadContext.html#a1cdc204f9019a41bd6b82e542690e7cd">readMiscRegNoEffect</a>(<a class="code" href="namespaceAlphaISA.html#ad058b0990dcb8ed4d0b373396689fa12ab373435f9f79fd1fde5f5800309b7ae5">AlphaISA::MISCREG_UNIQ</a>);
<a name="l00663"></a>00663                 ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762" title="state own by user thread">nxm_u</a>.<a class="code" href="structTru64_1_1ushared__state.html#a1d3f38235993df97708a03b021d4c117" title="out-of-line state">pth_id</a> = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(uniq + <a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(attrp-&gt;nxm_uniq_offset));
<a name="l00664"></a>00664                 ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762" title="state own by user thread">nxm_u</a>.<a class="code" href="structTru64_1_1ushared__state.html#a7991be25aefae71536c01229bd1fdbc2" title="scheduler active">nxm_active</a> = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(uniq | 1);
<a name="l00665"></a>00665             }
<a name="l00666"></a>00666             <span class="keywordflow">else</span> {
<a name="l00667"></a>00667                 ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762" title="state own by user thread">nxm_u</a>.<a class="code" href="structTru64_1_1ushared__state.html#a1d3f38235993df97708a03b021d4c117" title="out-of-line state">pth_id</a> = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00668"></a>00668                 ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762" title="state own by user thread">nxm_u</a>.<a class="code" href="structTru64_1_1ushared__state.html#a7991be25aefae71536c01229bd1fdbc2" title="scheduler active">nxm_active</a> = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(0);
<a name="l00669"></a>00669             }
<a name="l00670"></a>00670         }
<a name="l00671"></a>00671 
<a name="l00672"></a>00672         <span class="comment">//</span>
<a name="l00673"></a>00673         <span class="comment">// copy pointer to shared config area out to user</span>
<a name="l00674"></a>00674         <span class="comment">//</span>
<a name="l00675"></a>00675         *configptr_ptr = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(config_addr);
<a name="l00676"></a>00676 
<a name="l00677"></a>00677         <span class="comment">// Register this as a valid address range with the process</span>
<a name="l00678"></a>00678         base_addr = <a class="code" href="intmath_8hh.html#a343c19b0ae885d5f3c7960987096e9d5">roundDown</a>(base_addr, <a class="code" href="namespaceAlphaISA.html#a446f4491585786873ebc4863f814b54ea146e832965500bde80b96d1e6998babd">VMPageSize</a>);
<a name="l00679"></a>00679         <span class="keywordtype">int</span> size = cur_addr - base_addr;
<a name="l00680"></a>00680         process-&gt;<a class="code" href="classProcess.html#a6f44d1f7089c1d9ff3613d0c9cd67a69">allocateMem</a>(base_addr, <a class="code" href="intmath_8hh.html#a4d254a89b294890f6ce3a474f4e8c6c7">roundUp</a>(size, <a class="code" href="namespaceAlphaISA.html#a446f4491585786873ebc4863f814b54ea146e832965500bde80b96d1e6998babd">VMPageSize</a>));
<a name="l00681"></a>00681 
<a name="l00682"></a>00682         config.<a class="code" href="classBaseBufferArg.html#ac5e30574eafcdb5bd84d71479288eb73">copyOut</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00683"></a>00683         slot_state.<a class="code" href="classBaseBufferArg.html#ac5e30574eafcdb5bd84d71479288eb73">copyOut</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00684"></a>00684         rad_state.<a class="code" href="classBaseBufferArg.html#ac5e30574eafcdb5bd84d71479288eb73">copyOut</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00685"></a>00685         configptr_ptr.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00686"></a>00686 
<a name="l00687"></a>00687         <span class="keywordflow">return</span> 0;
<a name="l00688"></a>00688     }
<a name="l00689"></a>00689 
<a name="l00691"></a>00691     <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00692"></a><a class="code" href="classTru64.html#ad6492f3a6fd17e2e251a0b3854add333">00692</a>     <a class="code" href="classTru64.html#ad6492f3a6fd17e2e251a0b3854add333" title="Initialize thread context.">init_thread_context</a>(<a class="code" href="classLiveProcess.html">LiveProcess</a> *process, <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc,
<a name="l00693"></a>00693                       <a class="code" href="structTru64_1_1nxm__thread__attr.html" title="Thread attributes.">Tru64::nxm_thread_attr</a> *attrp, uint64_t uniq_val)
<a name="l00694"></a>00694     {
<a name="l00695"></a>00695         <span class="keyword">using namespace </span>TheISA;
<a name="l00696"></a>00696 
<a name="l00697"></a>00697         tc-&gt;<a class="code" href="classThreadContext.html#a36c8d3323b3e201ca43289e261e5d6ce">clearArchRegs</a>();
<a name="l00698"></a>00698 
<a name="l00699"></a>00699         process-&gt;<a class="code" href="classLiveProcess.html#a44f33dbea316b952824d5bab7e85d115">setSyscallArg</a>(tc, 0, <a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(attrp-&gt;<a class="code" href="structTru64_1_1nxm__thread__attr.html#a320718d0c02721664b619a0b1faf1442" title="Initial register values.">registers</a>.<a class="code" href="structTru64_1_1nxm__thread__attr.html#a9c01b691ba2d8c949f4f54c1b92ab4af" title="a0">a0</a>));
<a name="l00700"></a>00700         tc-&gt;<a class="code" href="classThreadContext.html#ad008e016fd7ac09d11a85a80aa917b41">setIntReg</a>(27<span class="comment">/*t12*/</span>, <a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(attrp-&gt;<a class="code" href="structTru64_1_1nxm__thread__attr.html#a320718d0c02721664b619a0b1faf1442" title="Initial register values.">registers</a>.<a class="code" href="structTru64_1_1nxm__thread__attr.html#ac86d538d9d1d186556b4d4907a46d153" title="pc">pc</a>));
<a name="l00701"></a>00701         tc-&gt;<a class="code" href="classThreadContext.html#ad008e016fd7ac09d11a85a80aa917b41">setIntReg</a>(<a class="code" href="namespaceAlphaISA.html#ab95f1cbe7234a4f6726f4b82e42fe30e">TheISA::StackPointerReg</a>, <a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(attrp-&gt;<a class="code" href="structTru64_1_1nxm__thread__attr.html#a320718d0c02721664b619a0b1faf1442" title="Initial register values.">registers</a>.<a class="code" href="structTru64_1_1nxm__thread__attr.html#aeda173394748ec0599413255201bb0d7" title="sp">sp</a>));
<a name="l00702"></a>00702         tc-&gt;<a class="code" href="classThreadContext.html#a50d110467c213c1caec6ff304fc44521">setMiscRegNoEffect</a>(<a class="code" href="namespaceAlphaISA.html#ad058b0990dcb8ed4d0b373396689fa12ab373435f9f79fd1fde5f5800309b7ae5">AlphaISA::MISCREG_UNIQ</a>, uniq_val);
<a name="l00703"></a>00703 
<a name="l00704"></a>00704         tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>(<a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(attrp-&gt;<a class="code" href="structTru64_1_1nxm__thread__attr.html#a320718d0c02721664b619a0b1faf1442" title="Initial register values.">registers</a>.<a class="code" href="structTru64_1_1nxm__thread__attr.html#ac86d538d9d1d186556b4d4907a46d153" title="pc">pc</a>));
<a name="l00705"></a>00705 
<a name="l00706"></a>00706         tc-&gt;<a class="code" href="classThreadContext.html#a33f0fb994d7ace7a98f25e61a6580f75" title="Set the status to Active.">activate</a>();
<a name="l00707"></a>00707     }
<a name="l00708"></a>00708 
<a name="l00710"></a>00710     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l00711"></a><a class="code" href="classTru64.html#a3838b7ba5361ed16a5058a8ecb2d28d0">00711</a>     <a class="code" href="classTru64.html#a3838b7ba5361ed16a5058a8ecb2d28d0" title="Create thread.">nxm_thread_createFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l00712"></a>00712                           <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l00713"></a>00713     {
<a name="l00714"></a>00714         <span class="keyword">using namespace </span>std;
<a name="l00715"></a>00715         <span class="keyword">using namespace </span>TheISA;
<a name="l00716"></a>00716 
<a name="l00717"></a>00717         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l00718"></a>00718         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;Tru64::nxm_thread_attr&gt;</a>
<a name="l00719"></a>00719             attrp(process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>));
<a name="l00720"></a>00720         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;uint64_t&gt;</a> kidp(process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>));
<a name="l00721"></a>00721         <span class="keywordtype">int</span> thread_index = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00722"></a>00722 
<a name="l00723"></a>00723         <span class="comment">// get attribute args</span>
<a name="l00724"></a>00724         attrp.copyIn(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00725"></a>00725 
<a name="l00726"></a>00726         <span class="keywordflow">if</span> (<a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(attrp-&gt;version) != NXM_LIB_VERSION) {
<a name="l00727"></a>00727             cerr &lt;&lt; <span class="stringliteral">&quot;nxm_thread_create: thread library version mismatch! &quot;</span>
<a name="l00728"></a>00728                  &lt;&lt; <span class="stringliteral">&quot;got &quot;</span> &lt;&lt; attrp-&gt;version
<a name="l00729"></a>00729                  &lt;&lt; <span class="stringliteral">&quot;, expected &quot;</span> &lt;&lt; NXM_LIB_VERSION &lt;&lt; endl;
<a name="l00730"></a>00730             abort();
<a name="l00731"></a>00731         }
<a name="l00732"></a>00732 
<a name="l00733"></a>00733         <span class="keywordflow">if</span> (thread_index &lt; 0 || thread_index &gt; process-&gt;<a class="code" href="classProcess.html#af98d701de675ca25b48fcf023567faad">numCpus</a>()) {
<a name="l00734"></a>00734             cerr &lt;&lt; <span class="stringliteral">&quot;nxm_thread_create: bad thread index &quot;</span> &lt;&lt; thread_index
<a name="l00735"></a>00735                  &lt;&lt; endl;
<a name="l00736"></a>00736             abort();
<a name="l00737"></a>00737         }
<a name="l00738"></a>00738 
<a name="l00739"></a>00739         <span class="comment">// On a real machine, the per-RAD shared structure is in</span>
<a name="l00740"></a>00740         <span class="comment">// shared memory, so both the user and kernel can get at it.</span>
<a name="l00741"></a>00741         <span class="comment">// We don&#39;t have that luxury, so we just copy it in and then</span>
<a name="l00742"></a>00742         <span class="comment">// back out again.</span>
<a name="l00743"></a>00743         <span class="keywordtype">int</span> rad_state_size =
<a name="l00744"></a>00744             (<span class="keyword">sizeof</span>(<a class="code" href="structTru64_1_1nxm__shared.html" title="nxm_shared.">Tru64::nxm_shared</a>) +
<a name="l00745"></a>00745              (process-&gt;<a class="code" href="classProcess.html#af98d701de675ca25b48fcf023567faad">numCpus</a>()-1) * <span class="keyword">sizeof</span>(<a class="code" href="structTru64_1_1nxm__sched__state.html">Tru64::nxm_sched_state</a>));
<a name="l00746"></a>00746 
<a name="l00747"></a>00747         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;Tru64::nxm_shared&gt;</a> rad_state(0x14000,
<a name="l00748"></a>00748                                                     rad_state_size);
<a name="l00749"></a>00749         rad_state.<a class="code" href="classBaseBufferArg.html#a5313d1eb0008afa2840ecb223e1f7e2c">copyIn</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00750"></a>00750 
<a name="l00751"></a>00751         uint64_t uniq_val = <a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(attrp-&gt;pthid) - <a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(rad_state-&gt;nxm_uniq_offset);
<a name="l00752"></a>00752 
<a name="l00753"></a>00753         <span class="keywordflow">if</span> (<a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(attrp-&gt;type) == <a class="code" href="classTru64.html#a3a3286d0ebbf2805fa6691e67da03a86ad998492a98ebc1d6304bb556fadc044e">Tru64::NXM_TYPE_MANAGER</a>) {
<a name="l00754"></a>00754             <span class="comment">// DEC pthreads seems to always create one of these (in</span>
<a name="l00755"></a>00755             <span class="comment">// addition to N application threads), but we don&#39;t use it,</span>
<a name="l00756"></a>00756             <span class="comment">// so don&#39;t bother creating it.</span>
<a name="l00757"></a>00757 
<a name="l00758"></a>00758             <span class="comment">// This is supposed to be a port number.  Make something up.</span>
<a name="l00759"></a>00759             *kidp = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(99);
<a name="l00760"></a>00760             kidp.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00761"></a>00761 
<a name="l00762"></a>00762             <span class="keywordflow">return</span> 0;
<a name="l00763"></a>00763         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(attrp-&gt;type) == Tru64::NXM_TYPE_VP) {
<a name="l00764"></a>00764             <span class="comment">// A real &quot;virtual processor&quot; kernel thread.  Need to fork</span>
<a name="l00765"></a>00765             <span class="comment">// this thread on another CPU.</span>
<a name="l00766"></a>00766             <a class="code" href="structTru64_1_1nxm__sched__state.html">Tru64::nxm_sched_state</a> *ssp = &amp;rad_state-&gt;nxm_ss[thread_index];
<a name="l00767"></a>00767 
<a name="l00768"></a>00768             <span class="keywordflow">if</span> (<a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762" title="state own by user thread">nxm_u</a>.<a class="code" href="structTru64_1_1ushared__state.html#a7991be25aefae71536c01229bd1fdbc2" title="scheduler active">nxm_active</a>) != 0)
<a name="l00769"></a>00769                 <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) Tru64::KERN_NOT_RECEIVER;
<a name="l00770"></a>00770 
<a name="l00771"></a>00771             ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762" title="state own by user thread">nxm_u</a>.<a class="code" href="structTru64_1_1ushared__state.html#a1d3f38235993df97708a03b021d4c117" title="out-of-line state">pth_id</a> = attrp-&gt;pthid;
<a name="l00772"></a>00772             ssp-&gt;<a class="code" href="structTru64_1_1nxm__sched__state.html#a40513ce6d32b56755cbe71a51a45b762" title="state own by user thread">nxm_u</a>.<a class="code" href="structTru64_1_1ushared__state.html#a7991be25aefae71536c01229bd1fdbc2" title="scheduler active">nxm_active</a> = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(uniq_val | 1);
<a name="l00773"></a>00773 
<a name="l00774"></a>00774             rad_state.<a class="code" href="classBaseBufferArg.html#ac5e30574eafcdb5bd84d71479288eb73">copyOut</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00775"></a>00775 
<a name="l00776"></a>00776             <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> slot_state_addr = 0x12000 + <span class="keyword">sizeof</span>(<a class="code" href="structTru64_1_1nxm__config__info.html" title="nxm_config_info">Tru64::nxm_config_info</a>);
<a name="l00777"></a>00777             <span class="keywordtype">int</span> slot_state_size =
<a name="l00778"></a>00778                 process-&gt;<a class="code" href="classProcess.html#af98d701de675ca25b48fcf023567faad">numCpus</a>() * <span class="keyword">sizeof</span>(Tru64::nxm_slot_state_t);
<a name="l00779"></a>00779 
<a name="l00780"></a>00780             <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;Tru64::nxm_slot_state_t&gt;</a>
<a name="l00781"></a>00781                 slot_state(slot_state_addr,
<a name="l00782"></a>00782                            slot_state_size);
<a name="l00783"></a>00783 
<a name="l00784"></a>00784             slot_state.<a class="code" href="classBaseBufferArg.html#a5313d1eb0008afa2840ecb223e1f7e2c">copyIn</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00785"></a>00785 
<a name="l00786"></a>00786             <span class="keywordflow">if</span> (slot_state[thread_index] != <a class="code" href="classTru64.html#ab144d8d176cdd3ce556458124e56699caa823217c9f812d166d408b1ca7ad80cd">Tru64::NXM_SLOT_AVAIL</a>) {
<a name="l00787"></a>00787                 cerr &lt;&lt; <span class="stringliteral">&quot;nxm_thread_createFunc: requested VP slot &quot;</span>
<a name="l00788"></a>00788                      &lt;&lt; thread_index &lt;&lt; <span class="stringliteral">&quot; not available!&quot;</span> &lt;&lt; endl;
<a name="l00789"></a>00789                 <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00790"></a>00790             }
<a name="l00791"></a>00791 
<a name="l00792"></a>00792             <span class="comment">// XXX This should have an endian conversion but I think this code</span>
<a name="l00793"></a>00793             <span class="comment">// doesn&#39;t work anyway</span>
<a name="l00794"></a>00794             slot_state[thread_index] = Tru64::NXM_SLOT_BOUND;
<a name="l00795"></a>00795 
<a name="l00796"></a>00796             slot_state.<a class="code" href="classBaseBufferArg.html#ac5e30574eafcdb5bd84d71479288eb73">copyOut</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00797"></a>00797 
<a name="l00798"></a>00798             <span class="comment">// Find a free simulator thread context.</span>
<a name="l00799"></a>00799             <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc = process-&gt;<a class="code" href="classProcess.html#a33d7f9bd41d8f61a2a9814813b7d8d58">findFreeContext</a>();
<a name="l00800"></a>00800             <span class="keywordflow">if</span> (tc) {
<a name="l00801"></a>00801                 <span class="comment">// inactive context... grab it</span>
<a name="l00802"></a>00802                 <a class="code" href="classTru64.html#ad6492f3a6fd17e2e251a0b3854add333" title="Initialize thread context.">init_thread_context</a>(process, tc, attrp, uniq_val);
<a name="l00803"></a>00803 
<a name="l00804"></a>00804                 <span class="comment">// This is supposed to be a port number, but we&#39;ll try</span>
<a name="l00805"></a>00805                 <span class="comment">// and get away with just sticking the thread index</span>
<a name="l00806"></a>00806                 <span class="comment">// here.</span>
<a name="l00807"></a>00807                 *kidp = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(thread_index);
<a name="l00808"></a>00808                 kidp.copyOut(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00809"></a>00809 
<a name="l00810"></a>00810                 <span class="keywordflow">return</span> 0;
<a name="l00811"></a>00811             }
<a name="l00812"></a>00812 
<a name="l00813"></a>00813             <span class="comment">// fell out of loop... no available inactive context</span>
<a name="l00814"></a>00814             cerr &lt;&lt; <span class="stringliteral">&quot;nxm_thread_create: no idle contexts available.&quot;</span> &lt;&lt; endl;
<a name="l00815"></a>00815             abort();
<a name="l00816"></a>00816         } <span class="keywordflow">else</span> {
<a name="l00817"></a>00817             cerr &lt;&lt; <span class="stringliteral">&quot;nxm_thread_create: can&#39;t handle thread type &quot;</span>
<a name="l00818"></a>00818                  &lt;&lt; attrp-&gt;type &lt;&lt; endl;
<a name="l00819"></a>00819             abort();
<a name="l00820"></a>00820         }
<a name="l00821"></a>00821 
<a name="l00822"></a>00822         <span class="keywordflow">return</span> 0;
<a name="l00823"></a>00823     }
<a name="l00824"></a>00824 
<a name="l00826"></a>00826     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l00827"></a><a class="code" href="classTru64.html#a5bb97d6cbb776c091248da3a3a6ae790">00827</a>     <a class="code" href="classTru64.html#a5bb97d6cbb776c091248da3a3a6ae790" title="Thread idle call (like yield()).">nxm_idleFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l00828"></a>00828                  <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l00829"></a>00829     {
<a name="l00830"></a>00830         <span class="keywordflow">return</span> 0;
<a name="l00831"></a>00831     }
<a name="l00832"></a>00832 
<a name="l00834"></a>00834     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l00835"></a><a class="code" href="classTru64.html#aeb566fc34b73847b2f675c51d73c3be4">00835</a>     <a class="code" href="classTru64.html#aeb566fc34b73847b2f675c51d73c3be4" title="Block thread.">nxm_thread_blockFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l00836"></a>00836                          <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l00837"></a>00837     {
<a name="l00838"></a>00838         <span class="keyword">using namespace </span>std;
<a name="l00839"></a>00839 
<a name="l00840"></a>00840         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l00841"></a>00841         uint64_t tid = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00842"></a>00842         uint64_t secs = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00843"></a>00843         uint64_t flags = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00844"></a>00844         uint64_t action = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00845"></a>00845         uint64_t usecs = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00846"></a>00846 
<a name="l00847"></a>00847         cout &lt;&lt; tc-&gt;<a class="code" href="classThreadContext.html#add24ea69a3c1a7862d25bec95f9bdc95">getCpuPtr</a>()-&gt;<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() &lt;&lt; <span class="stringliteral">&quot;: nxm_thread_block &quot;</span> &lt;&lt; tid &lt;&lt; <span class="stringliteral">&quot; &quot;</span>
<a name="l00848"></a>00848              &lt;&lt; secs &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; flags &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; action &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; usecs &lt;&lt; endl;
<a name="l00849"></a>00849 
<a name="l00850"></a>00850         <span class="keywordflow">return</span> 0;
<a name="l00851"></a>00851     }
<a name="l00852"></a>00852 
<a name="l00854"></a>00854     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l00855"></a><a class="code" href="classTru64.html#a913e3e8db40a89238ddd76e9aa7f80f6">00855</a>     <a class="code" href="classTru64.html#a913e3e8db40a89238ddd76e9aa7f80f6" title="block.">nxm_blockFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l00856"></a>00856                   <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l00857"></a>00857     {
<a name="l00858"></a>00858         <span class="keyword">using namespace </span>std;
<a name="l00859"></a>00859 
<a name="l00860"></a>00860         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l00861"></a>00861         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> uaddr = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00862"></a>00862         uint64_t <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a> = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00863"></a>00863         uint64_t secs = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00864"></a>00864         uint64_t usecs = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00865"></a>00865         uint64_t flags = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00866"></a>00866 
<a name="l00867"></a>00867         <a class="code" href="classBaseCPU.html">BaseCPU</a> *cpu = tc-&gt;<a class="code" href="classThreadContext.html#add24ea69a3c1a7862d25bec95f9bdc95">getCpuPtr</a>();
<a name="l00868"></a>00868 
<a name="l00869"></a>00869         cout &lt;&lt; cpu-&gt;<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() &lt;&lt; <span class="stringliteral">&quot;: nxm_block &quot;</span>
<a name="l00870"></a>00870              &lt;&lt; hex &lt;&lt; uaddr &lt;&lt; dec &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>
<a name="l00871"></a>00871              &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; secs &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; usecs
<a name="l00872"></a>00872              &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; flags &lt;&lt; endl;
<a name="l00873"></a>00873 
<a name="l00874"></a>00874         <span class="keywordflow">return</span> 0;
<a name="l00875"></a>00875     }
<a name="l00876"></a>00876 
<a name="l00878"></a>00878     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l00879"></a><a class="code" href="classTru64.html#af4f794043bb8c00427920ba5ef29ad75">00879</a>     <a class="code" href="classTru64.html#af4f794043bb8c00427920ba5ef29ad75" title="Unblock thread.">nxm_unblockFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l00880"></a>00880                     <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l00881"></a>00881     {
<a name="l00882"></a>00882         <span class="keyword">using namespace </span>std;
<a name="l00883"></a>00883 
<a name="l00884"></a>00884         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l00885"></a>00885         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> uaddr = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l00886"></a>00886 
<a name="l00887"></a>00887         cout &lt;&lt; tc-&gt;<a class="code" href="classThreadContext.html#add24ea69a3c1a7862d25bec95f9bdc95">getCpuPtr</a>()-&gt;<a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>() &lt;&lt; <span class="stringliteral">&quot;: nxm_unblock &quot;</span>
<a name="l00888"></a>00888              &lt;&lt; hex &lt;&lt; uaddr &lt;&lt; dec &lt;&lt; endl;
<a name="l00889"></a>00889 
<a name="l00890"></a>00890         <span class="keywordflow">return</span> 0;
<a name="l00891"></a>00891     }
<a name="l00892"></a>00892 
<a name="l00894"></a>00894     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l00895"></a><a class="code" href="classTru64.html#abe7bfe347adfe18463b8c32dc326b2d6">00895</a>     <a class="code" href="classTru64.html#abe7bfe347adfe18463b8c32dc326b2d6" title="Switch thread priority.">swtch_priFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l00896"></a>00896                   <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l00897"></a>00897     {
<a name="l00898"></a>00898         <span class="comment">// Attempts to switch to another runnable thread (if there is</span>
<a name="l00899"></a>00899         <span class="comment">// one).  Returns false if there are no other threads to run</span>
<a name="l00900"></a>00900         <span class="comment">// (i.e., the thread can reasonably spin-wait) or true if there</span>
<a name="l00901"></a>00901         <span class="comment">// are other threads.</span>
<a name="l00902"></a>00902         <span class="comment">//</span>
<a name="l00903"></a>00903         <span class="comment">// Since we assume at most one &quot;kernel&quot; thread per CPU, it&#39;s</span>
<a name="l00904"></a>00904         <span class="comment">// always safe to return false here.</span>
<a name="l00905"></a>00905         <span class="keywordflow">return</span> 0; <span class="comment">//false;</span>
<a name="l00906"></a>00906     }
<a name="l00907"></a>00907 
<a name="l00908"></a>00908 
<a name="l00911"></a>00911     <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00912"></a><a class="code" href="classTru64.html#a7026d486a25f3e6b582e386aa0b10915">00912</a>     <a class="code" href="classTru64.html#a7026d486a25f3e6b582e386aa0b10915" title="Activate thread context waiting on a channel.">activate_waiting_context</a>(<a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> uaddr, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l00913"></a>00913                              <span class="keywordtype">bool</span> activate_all = <span class="keyword">false</span>)
<a name="l00914"></a>00914     {
<a name="l00915"></a>00915         <span class="keyword">using namespace </span>std;
<a name="l00916"></a>00916 
<a name="l00917"></a>00917         <span class="keywordtype">int</span> num_activated = 0;
<a name="l00918"></a>00918 
<a name="l00919"></a>00919         list&lt;Process::WaitRec&gt;::iterator <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = process-&gt;<a class="code" href="classProcess.html#a37b595549b181c78be8478ea5f5fb8a9">waitList</a>.begin();
<a name="l00920"></a>00920         list&lt;Process::WaitRec&gt;::iterator end = process-&gt;<a class="code" href="classProcess.html#a37b595549b181c78be8478ea5f5fb8a9">waitList</a>.end();
<a name="l00921"></a>00921 
<a name="l00922"></a>00922         <span class="keywordflow">while</span> (<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> != end &amp;&amp; (num_activated == 0 || activate_all)) {
<a name="l00923"></a>00923             <span class="keywordflow">if</span> (<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>-&gt;waitChan == uaddr) {
<a name="l00924"></a>00924                 <span class="comment">// found waiting process: make it active</span>
<a name="l00925"></a>00925                 <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *newCtx = <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>-&gt;waitingContext;
<a name="l00926"></a>00926                 assert(newCtx-&gt;<a class="code" href="classThreadContext.html#a7d99d72e903622b08fbf253c6e58b1ec">status</a>() == ThreadContext::Suspended);
<a name="l00927"></a>00927                 newCtx-&gt;<a class="code" href="classThreadContext.html#a33f0fb994d7ace7a98f25e61a6580f75" title="Set the status to Active.">activate</a>();
<a name="l00928"></a>00928 
<a name="l00929"></a>00929                 <span class="comment">// get rid of this record</span>
<a name="l00930"></a>00930                 <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = process-&gt;<a class="code" href="classProcess.html#a37b595549b181c78be8478ea5f5fb8a9">waitList</a>.erase(<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>);
<a name="l00931"></a>00931 
<a name="l00932"></a>00932                 ++num_activated;
<a name="l00933"></a>00933             } <span class="keywordflow">else</span> {
<a name="l00934"></a>00934                 ++<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>;
<a name="l00935"></a>00935             }
<a name="l00936"></a>00936         }
<a name="l00937"></a>00937 
<a name="l00938"></a>00938         <span class="keywordflow">return</span> num_activated;
<a name="l00939"></a>00939     }
<a name="l00940"></a>00940 
<a name="l00942"></a>00942     <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00943"></a><a class="code" href="classTru64.html#a15653f17236111fbdd7a7a5430701b89">00943</a>     <a class="code" href="classTru64.html#a15653f17236111fbdd7a7a5430701b89" title="M5 hacked-up lock acquire.">m5_lock_mutex</a>(<a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> uaddr, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process, <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l00944"></a>00944     {
<a name="l00945"></a>00945         <span class="keyword">using namespace </span>TheISA;
<a name="l00946"></a>00946 
<a name="l00947"></a>00947         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;uint64_t&gt;</a> lockp(uaddr);
<a name="l00948"></a>00948 
<a name="l00949"></a>00949         lockp.<a class="code" href="classBaseBufferArg.html#a5313d1eb0008afa2840ecb223e1f7e2c">copyIn</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00950"></a>00950 
<a name="l00951"></a>00951         <span class="keywordflow">if</span> (<a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(*lockp) == 0) {
<a name="l00952"></a>00952             <span class="comment">// lock is free: grab it</span>
<a name="l00953"></a>00953             *lockp = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(1);
<a name="l00954"></a>00954             lockp.<a class="code" href="classBaseBufferArg.html#ac5e30574eafcdb5bd84d71479288eb73">copyOut</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00955"></a>00955         } <span class="keywordflow">else</span> {
<a name="l00956"></a>00956             <span class="comment">// lock is busy: disable until free</span>
<a name="l00957"></a>00957             process-&gt;<a class="code" href="classProcess.html#a37b595549b181c78be8478ea5f5fb8a9">waitList</a>.push_back(<a class="code" href="structProcess_1_1WaitRec.html">Process::WaitRec</a>(uaddr, tc));
<a name="l00958"></a>00958             tc-&gt;<a class="code" href="classThreadContext.html#a64b615a69ec0a49625f96843406a3f0b" title="Set the status to Suspended.">suspend</a>();
<a name="l00959"></a>00959         }
<a name="l00960"></a>00960     }
<a name="l00961"></a>00961 
<a name="l00963"></a>00963     <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00964"></a><a class="code" href="classTru64.html#a3b0a135eca263436427eac493b91abbc">00964</a>     <a class="code" href="classTru64.html#a3b0a135eca263436427eac493b91abbc" title="M5 unlock call.">m5_unlock_mutex</a>(<a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> uaddr, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process, <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l00965"></a>00965     {
<a name="l00966"></a>00966         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;uint64_t&gt;</a> lockp(uaddr);
<a name="l00967"></a>00967 
<a name="l00968"></a>00968         lockp.<a class="code" href="classBaseBufferArg.html#a5313d1eb0008afa2840ecb223e1f7e2c">copyIn</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00969"></a>00969         assert(*lockp != 0);
<a name="l00970"></a>00970 
<a name="l00971"></a>00971         <span class="comment">// Check for a process waiting on the lock.</span>
<a name="l00972"></a>00972         <span class="keywordtype">int</span> num_waiting = <a class="code" href="classTru64.html#a7026d486a25f3e6b582e386aa0b10915" title="Activate thread context waiting on a channel.">activate_waiting_context</a>(uaddr, process);
<a name="l00973"></a>00973 
<a name="l00974"></a>00974         <span class="comment">// clear lock field if no waiting context is taking over the lock</span>
<a name="l00975"></a>00975         <span class="keywordflow">if</span> (num_waiting == 0) {
<a name="l00976"></a>00976             *lockp = 0;
<a name="l00977"></a>00977             lockp.<a class="code" href="classBaseBufferArg.html#ac5e30574eafcdb5bd84d71479288eb73">copyOut</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l00978"></a>00978         }
<a name="l00979"></a>00979     }
<a name="l00980"></a>00980 
<a name="l00982"></a>00982     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l00983"></a><a class="code" href="classTru64.html#afc67769851143ea0ed434ea2693bdfef">00983</a>     <a class="code" href="classTru64.html#afc67769851143ea0ed434ea2693bdfef" title="Lock acquire syscall handler.">m5_mutex_lockFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l00984"></a>00984                       <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l00985"></a>00985     {
<a name="l00986"></a>00986         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l00987"></a>00987         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> uaddr = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, index);
<a name="l00988"></a>00988 
<a name="l00989"></a>00989         <a class="code" href="classTru64.html#a15653f17236111fbdd7a7a5430701b89" title="M5 hacked-up lock acquire.">m5_lock_mutex</a>(uaddr, process, tc);
<a name="l00990"></a>00990 
<a name="l00991"></a>00991         <span class="comment">// Return 0 since we will always return to the user with the lock</span>
<a name="l00992"></a>00992         <span class="comment">// acquired.  We will just keep the context inactive until that is</span>
<a name="l00993"></a>00993         <span class="comment">// true.</span>
<a name="l00994"></a>00994         <span class="keywordflow">return</span> 0;
<a name="l00995"></a>00995     }
<a name="l00996"></a>00996 
<a name="l00998"></a>00998     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l00999"></a><a class="code" href="classTru64.html#ac3cf79b5ed6005765ad8fa8c9a202bea">00999</a>     <a class="code" href="classTru64.html#ac3cf79b5ed6005765ad8fa8c9a202bea" title="Try lock (non-blocking).">m5_mutex_trylockFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l01000"></a>01000                          <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l01001"></a>01001     {
<a name="l01002"></a>01002         <span class="keyword">using namespace </span>TheISA;
<a name="l01003"></a>01003 
<a name="l01004"></a>01004         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l01005"></a>01005         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> uaddr = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l01006"></a>01006         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;uint64_t&gt;</a> lockp(uaddr);
<a name="l01007"></a>01007 
<a name="l01008"></a>01008         lockp.<a class="code" href="classBaseBufferArg.html#a5313d1eb0008afa2840ecb223e1f7e2c">copyIn</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l01009"></a>01009 
<a name="l01010"></a>01010         <span class="keywordflow">if</span> (<a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(*lockp) == 0) {
<a name="l01011"></a>01011             <span class="comment">// lock is free: grab it</span>
<a name="l01012"></a>01012             *lockp = <a class="code" href="namespaceBigEndianGuest.html#a10c3370b6af5a1216a2a64c0d379f788">htog</a>(1);
<a name="l01013"></a>01013             lockp.<a class="code" href="classBaseBufferArg.html#ac5e30574eafcdb5bd84d71479288eb73">copyOut</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l01014"></a>01014             <span class="keywordflow">return</span> 0;
<a name="l01015"></a>01015         } <span class="keywordflow">else</span> {
<a name="l01016"></a>01016             <span class="keywordflow">return</span> 1;
<a name="l01017"></a>01017         }
<a name="l01018"></a>01018     }
<a name="l01019"></a>01019 
<a name="l01021"></a>01021     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l01022"></a><a class="code" href="classTru64.html#a17e36f0270208fdb4a00a7527f38fe83">01022</a>     <a class="code" href="classTru64.html#a17e36f0270208fdb4a00a7527f38fe83" title="Unlock syscall handler.">m5_mutex_unlockFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l01023"></a>01023                         <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l01024"></a>01024     {
<a name="l01025"></a>01025         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l01026"></a>01026         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> uaddr = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, index);
<a name="l01027"></a>01027 
<a name="l01028"></a>01028         <a class="code" href="classTru64.html#a3b0a135eca263436427eac493b91abbc" title="M5 unlock call.">m5_unlock_mutex</a>(uaddr, process, tc);
<a name="l01029"></a>01029 
<a name="l01030"></a>01030         <span class="keywordflow">return</span> 0;
<a name="l01031"></a>01031     }
<a name="l01032"></a>01032 
<a name="l01034"></a>01034     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l01035"></a><a class="code" href="classTru64.html#af070e3ae8a863e6739b885bfff46b481">01035</a>     <a class="code" href="classTru64.html#af070e3ae8a863e6739b885bfff46b481" title="Signal ocndition.">m5_cond_signalFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l01036"></a>01036                        <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l01037"></a>01037     {
<a name="l01038"></a>01038         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l01039"></a>01039         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> cond_addr = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, index);
<a name="l01040"></a>01040 
<a name="l01041"></a>01041         <span class="comment">// Wake up one process waiting on the condition variable.</span>
<a name="l01042"></a>01042         <a class="code" href="classTru64.html#a7026d486a25f3e6b582e386aa0b10915" title="Activate thread context waiting on a channel.">activate_waiting_context</a>(cond_addr, process);
<a name="l01043"></a>01043 
<a name="l01044"></a>01044         <span class="keywordflow">return</span> 0;
<a name="l01045"></a>01045     }
<a name="l01046"></a>01046 
<a name="l01048"></a>01048     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l01049"></a><a class="code" href="classTru64.html#abad8cd559173c3a0034d4ef4d661b2d1">01049</a>     <a class="code" href="classTru64.html#abad8cd559173c3a0034d4ef4d661b2d1" title="Wake up all processes waiting on the condition variable.">m5_cond_broadcastFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l01050"></a>01050                           <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l01051"></a>01051     {
<a name="l01052"></a>01052         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l01053"></a>01053         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> cond_addr = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, index);
<a name="l01054"></a>01054 
<a name="l01055"></a>01055         <a class="code" href="classTru64.html#a7026d486a25f3e6b582e386aa0b10915" title="Activate thread context waiting on a channel.">activate_waiting_context</a>(cond_addr, process, <span class="keyword">true</span>);
<a name="l01056"></a>01056 
<a name="l01057"></a>01057         <span class="keywordflow">return</span> 0;
<a name="l01058"></a>01058     }
<a name="l01059"></a>01059 
<a name="l01061"></a>01061     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l01062"></a><a class="code" href="classTru64.html#a8d40e5da4e4a3e57d582e6a29fae9ed1">01062</a>     <a class="code" href="classTru64.html#a8d40e5da4e4a3e57d582e6a29fae9ed1" title="Wait on a condition.">m5_cond_waitFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l01063"></a>01063                      <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l01064"></a>01064     {
<a name="l01065"></a>01065         <span class="keyword">using namespace </span>TheISA;
<a name="l01066"></a>01066 
<a name="l01067"></a>01067         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l01068"></a>01068         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> cond_addr = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l01069"></a>01069         <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> lock_addr = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a>);
<a name="l01070"></a>01070         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;uint64_t&gt;</a> condp(cond_addr);
<a name="l01071"></a>01071         <a class="code" href="classTypedBufferArg.html">TypedBufferArg&lt;uint64_t&gt;</a> lockp(lock_addr);
<a name="l01072"></a>01072 
<a name="l01073"></a>01073         <span class="comment">// user is supposed to acquire lock before entering</span>
<a name="l01074"></a>01074         lockp.<a class="code" href="classBaseBufferArg.html#a5313d1eb0008afa2840ecb223e1f7e2c">copyIn</a>(tc-&gt;<a class="code" href="classThreadContext.html#a3958b622c4fdba48dae6bb110c4a3745">getMemProxy</a>());
<a name="l01075"></a>01075         assert(<a class="code" href="namespaceBigEndianGuest.html#adb51b41dd17278558edf419359f52de6">gtoh</a>(*lockp) != 0);
<a name="l01076"></a>01076 
<a name="l01077"></a>01077         <a class="code" href="classTru64.html#a3b0a135eca263436427eac493b91abbc" title="M5 unlock call.">m5_unlock_mutex</a>(lock_addr, process, tc);
<a name="l01078"></a>01078 
<a name="l01079"></a>01079         process-&gt;<a class="code" href="classProcess.html#a37b595549b181c78be8478ea5f5fb8a9">waitList</a>.push_back(<a class="code" href="structProcess_1_1WaitRec.html">Process::WaitRec</a>(cond_addr, tc));
<a name="l01080"></a>01080         tc-&gt;<a class="code" href="classThreadContext.html#a64b615a69ec0a49625f96843406a3f0b" title="Set the status to Suspended.">suspend</a>();
<a name="l01081"></a>01081 
<a name="l01082"></a>01082         <span class="keywordflow">return</span> 0;
<a name="l01083"></a>01083     }
<a name="l01084"></a>01084 
<a name="l01086"></a>01086     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l01087"></a><a class="code" href="classTru64.html#ab750852cfbbb143b8575d271c827f1ea">01087</a>     <a class="code" href="classTru64.html#ab750852cfbbb143b8575d271c827f1ea" title="Thread exit.">m5_thread_exitFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l01088"></a>01088                        <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l01089"></a>01089     {
<a name="l01090"></a>01090         assert(tc-&gt;<a class="code" href="classThreadContext.html#a7d99d72e903622b08fbf253c6e58b1ec">status</a>() == ThreadContext::Active);
<a name="l01091"></a>01091         tc-&gt;<a class="code" href="classThreadContext.html#a7b33bfc3365a49e55e07dd64eab21cec" title="Set the status to Halted.">halt</a>();
<a name="l01092"></a>01092 
<a name="l01093"></a>01093         <span class="keywordflow">return</span> 0;
<a name="l01094"></a>01094     }
<a name="l01095"></a>01095 
<a name="l01097"></a>01097     <span class="keyword">static</span> <a class="code" href="classSyscallReturn.html">SyscallReturn</a>
<a name="l01098"></a><a class="code" href="classTru64.html#a4c61ff448587d1c5ec77e534c8d5423c">01098</a>     <a class="code" href="classTru64.html#a4c61ff448587d1c5ec77e534c8d5423c" title="Indirect syscall invocation (call #0).">indirectSyscallFunc</a>(<a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *desc, <span class="keywordtype">int</span> callnum, <a class="code" href="classLiveProcess.html">LiveProcess</a> *process,
<a name="l01099"></a>01099                         <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> *tc)
<a name="l01100"></a>01100     {
<a name="l01101"></a>01101         <span class="keywordtype">int</span> <a class="code" href="namespaceMipsISA.html#aeeb2c1446acc9f3e056faacf09c36f7a">index</a> = 0;
<a name="l01102"></a>01102         <span class="keywordtype">int</span> new_callnum = process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, index);
<a name="l01103"></a>01103 
<a name="l01104"></a>01104         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; 5; ++<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>)
<a name="l01105"></a>01105             process-&gt;<a class="code" href="classLiveProcess.html#a44f33dbea316b952824d5bab7e85d115">setSyscallArg</a>(tc, <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>, process-&gt;<a class="code" href="classLiveProcess.html#adcff8f792fa201809b3770ae603356be">getSyscallArg</a>(tc, index));
<a name="l01106"></a>01106 
<a name="l01107"></a>01107 
<a name="l01108"></a>01108         <a class="code" href="classSyscallDesc.html" title="System call descriptor.">SyscallDesc</a> *new_desc = process-&gt;<a class="code" href="classLiveProcess.html#ab63849dcd6026e9e5bec915fd3b09a84">getDesc</a>(new_callnum);
<a name="l01109"></a>01109         <span class="keywordflow">if</span> (desc == NULL)
<a name="l01110"></a>01110             <a class="code" href="base_2misc_8hh.html#acad519418dbfdd70c1208711e609c80e">fatal</a>(<span class="stringliteral">&quot;Syscall %d out of range&quot;</span>, callnum);
<a name="l01111"></a>01111 
<a name="l01112"></a>01112         new_desc-&gt;<a class="code" href="classSyscallDesc.html#aa45c99a8c3b757e750c4498385f7e75c" title="Emulate the syscall. Public interface for calling through funcPtr.">doSyscall</a>(new_callnum, process, tc);
<a name="l01113"></a>01113 
<a name="l01114"></a>01114         <span class="keywordflow">return</span> 0;
<a name="l01115"></a>01115     }
<a name="l01116"></a>01116 
<a name="l01117"></a>01117 };  <span class="comment">// class Tru64</span>
<a name="l01118"></a>01118 
<a name="l01119"></a><a class="code" href="classTru64__F64.html">01119</a> <span class="keyword">class </span><a class="code" href="classTru64__F64.html">Tru64_F64</a> : <span class="keyword">public</span> <a class="code" href="classTru64.html" title="This class encapsulates the types, structures, constants, functions, and syscall-number mappings spec...">Tru64</a>
<a name="l01120"></a>01120 {
<a name="l01121"></a>01121   <span class="keyword">public</span>:
<a name="l01122"></a>01122 
<a name="l01127"></a><a class="code" href="structTru64__F64_1_1F64__stat.html">01127</a>     <span class="keyword">struct </span><a class="code" href="structTru64__F64_1_1F64__stat.html" title="Stat buffer.">F64_stat</a> {
<a name="l01128"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a2a4f924224ac10debd747060f7f513f2">01128</a>         <a class="code" href="classTru64.html#ab8119cec866c7d91d65cd650083c9a21">dev_t</a>   st_dev;                 
<a name="l01129"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#aaf21384f9c0a588be87d1566478c4930">01129</a>         int32_t st_retired1;            
<a name="l01130"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a65f9ebdeb9250c56e35f6c6baca14d42">01130</a>         <a class="code" href="classTru64.html#a6636080ceb6328836ccdf40a88386ce8">mode_t</a>  st_mode;                
<a name="l01131"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a0c2eabeb3f70c21e6b70d406cbdd6c76">01131</a>         <a class="code" href="classTru64.html#ac98a9d35546b10be28ac8b64addead98">nlink_t</a> st_nlink;               
<a name="l01132"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#ae717c0cae708d42d8e5717874f9b6639">01132</a>         uint16_t st_nlink_reserved;     
<a name="l01133"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#abc8f95b0a796219eb49425f5ebb7276d">01133</a>         <a class="code" href="classTru64.html#a817c2170b3317523205584cf1cd10107">uid_t</a>   st_uid;                 
<a name="l01134"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a1072e2048fe0b63abd4b1e2991d19277">01134</a>         <a class="code" href="classTru64.html#aeb8daab35a4eba2f7d0b542772a6e348">gid_t</a>   st_gid;                 
<a name="l01135"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a69d80549806f708ffc9e7cc6bec0db5f">01135</a>         <a class="code" href="classTru64.html#ab8119cec866c7d91d65cd650083c9a21">dev_t</a>   st_rdev;                
<a name="l01136"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#ab5e3062f26862a8ffa2707f866a572d5">01136</a>         <a class="code" href="classTru64.html#ab8119cec866c7d91d65cd650083c9a21">dev_t</a>   st_ldev;                
<a name="l01137"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a5b17896666127ad0f56c109aa350aaea">01137</a>         <a class="code" href="classTru64.html#aa0f1f377d0b9da0bcd6c7c1a0a31d64f">off_t</a>   st_size;                
<a name="l01138"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a847f6ba17d51caac7e3a03674f4a2fa7">01138</a>         <a class="code" href="classTru64.html#a4f8b3c49e0c484ce3a27d12395e49cce">time_t</a>  st_retired2;            
<a name="l01139"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a040d37e53e6d4b04c2d4bc0ead308375">01139</a>         int32_t st_uatime;              
<a name="l01140"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a62fd19eab5fb2ff09d62d0dedfbef79f">01140</a>         <a class="code" href="classTru64.html#a4f8b3c49e0c484ce3a27d12395e49cce">time_t</a>  st_retired3;            
<a name="l01141"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a55a038f788eb28d674c8a9c5919c2e73">01141</a>         int32_t st_umtime;              
<a name="l01142"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#ac0f3e75efa7e5a59c618ce0e9d8159f6">01142</a>         <a class="code" href="classTru64.html#a4f8b3c49e0c484ce3a27d12395e49cce">time_t</a>  st_retired4;            
<a name="l01143"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a1cf4d2f1a9538c0b44853b5ae81cc787">01143</a>         int32_t st_uctime;              
<a name="l01144"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#afcc0f8b315b7b51f9f0dc900d81a83c5">01144</a>         int32_t st_retired5;            
<a name="l01145"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a1ce69bd8238cb06c3885c7cac2816333">01145</a>         int32_t st_retired6;            
<a name="l01146"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a39ad709acf60903b1338f95e38fd4d9d">01146</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>        st_flags;       
<a name="l01147"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#af07deb8721e5dd4aa530cf7444b8528e">01147</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>        st_gen;         
<a name="l01148"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a894b7d669e34be4984f5bc67e1b88a03">01148</a>         uint64_t        st_spare[4];    
<a name="l01149"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a811e2d44679067e32c689f931f6423b0">01149</a>         <a class="code" href="classTru64.html#a030b165949c333e4d4c24804b271d551">ino_t</a>   st_ino;                 
<a name="l01150"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#ac2ec43738f13e426295316ec60b85a6b">01150</a>         int32_t st_ino_reserved;        
<a name="l01151"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#ab5beb60ae0570c33cad14386b9bdab26">01151</a>         <a class="code" href="classTru64.html#a4f8b3c49e0c484ce3a27d12395e49cce">time_t</a>  st_atimeX;              
<a name="l01152"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a0b3492d1d668a9a243b8790f0956fb1e">01152</a>         int32_t st_atime_reserved;      
<a name="l01153"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a129d45b3bddaa02a5e8d0b4a18ede2b0">01153</a>         <a class="code" href="classTru64.html#a4f8b3c49e0c484ce3a27d12395e49cce">time_t</a>  st_mtimeX;              
<a name="l01154"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a826968f1eb3345aeb39b168a44a58ac6">01154</a>         int32_t st_mtime_reserved;      
<a name="l01155"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a32b4238374ca4b409b052eee7e488232">01155</a>         <a class="code" href="classTru64.html#a4f8b3c49e0c484ce3a27d12395e49cce">time_t</a>  st_ctimeX;              
<a name="l01156"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a37a8666c5e25e5b8d879d17052972a34">01156</a>         int32_t st_ctime_reserved;      
<a name="l01157"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a5fd5a59a49138d41198641373784e1a7">01157</a>         uint64_t        st_blksize;     
<a name="l01158"></a><a class="code" href="structTru64__F64_1_1F64__stat.html#a02ac52c04e9a6035fd0bba2ac0407942">01158</a>         uint64_t        st_blocks;      
<a name="l01159"></a>01159     };
<a name="l01160"></a>01160 
<a name="l01161"></a><a class="code" href="classTru64__F64.html#a017d85032308cfc6f58b70a98c90d145">01161</a>     <span class="keyword">typedef</span> <a class="code" href="structTru64__F64_1_1F64__stat.html" title="Stat buffer.">F64_stat</a> tgt_stat;
<a name="l01162"></a>01162 <span class="comment">/*</span>
<a name="l01163"></a>01163 <span class="comment">    static void copyOutStatBuf(SETranslatingPortProxy &amp;mem, Addr addr,</span>
<a name="l01164"></a>01164 <span class="comment">                               global_stat *host)</span>
<a name="l01165"></a>01165 <span class="comment">    {</span>
<a name="l01166"></a>01166 <span class="comment">        Tru64::copyOutStatBuf&lt;Tru64::F64_stat&gt;(mem, addr, host);</span>
<a name="l01167"></a>01167 <span class="comment">    }*/</span>
<a name="l01168"></a>01168 
<a name="l01169"></a><a class="code" href="classTru64__F64.html#a0246e0410babc27a63ccaba03a6d65da">01169</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classTru64.html#a8f9217e8f6aa770e161dd88a624cde31" title="Helper function to convert a host statfs buffer to a target statfs buffer.">copyOutStatfsBuf</a>(<a class="code" href="classSETranslatingPortProxy.html">SETranslatingPortProxy</a> &amp;mem, <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="namespaceX86ISA.html#a79b5c08c190167d17c9b9b3fd40112f6">addr</a>,
<a name="l01170"></a>01170                                  <a class="code" href="kern_2tru64_2tru64_8hh.html#a1a8529336c3f2704cb49ee2cd97412a8">global_statfs</a> *host)
<a name="l01171"></a>01171     {
<a name="l01172"></a>01172         Tru64::copyOutStatfsBuf&lt;Tru64::F64_statfs&gt;(mem, addr, host);
<a name="l01173"></a>01173     }
<a name="l01174"></a>01174 };
<a name="l01175"></a>01175 
<a name="l01176"></a><a class="code" href="classTru64__PreF64.html">01176</a> <span class="keyword">class </span><a class="code" href="classTru64__PreF64.html">Tru64_PreF64</a> : <span class="keyword">public</span> <a class="code" href="classTru64.html" title="This class encapsulates the types, structures, constants, functions, and syscall-number mappings spec...">Tru64</a>
<a name="l01177"></a>01177 {
<a name="l01178"></a>01178   <span class="keyword">public</span>:
<a name="l01179"></a>01179 
<a name="l01185"></a>01185 
<a name="l01186"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html">01186</a>     <span class="keyword">struct </span><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html" title="Old Tru64 v4.x stat struct.">pre_F64_stat</a> {
<a name="l01187"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#ae17abdb9fcd069b2c962bde6d97e43be">01187</a>         <a class="code" href="classTru64.html#ab8119cec866c7d91d65cd650083c9a21">dev_t</a>   st_dev;
<a name="l01188"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#a1b4b99e00e35351e879dc7ad559a6095">01188</a>         <a class="code" href="classTru64.html#a030b165949c333e4d4c24804b271d551">ino_t</a>   st_ino;
<a name="l01189"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#a3f2fe76f8896144eba8b6d64fcea6219">01189</a>         <a class="code" href="classTru64.html#a6636080ceb6328836ccdf40a88386ce8">mode_t</a>  st_mode;
<a name="l01190"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#a738846fb57598e7f14aafc063efaa534">01190</a>         <a class="code" href="classTru64.html#ac98a9d35546b10be28ac8b64addead98">nlink_t</a> st_nlink;
<a name="l01191"></a>01191         <a class="code" href="classTru64.html#a817c2170b3317523205584cf1cd10107">uid_t</a>   st_uid <a class="code" href="init_8cc.html#aff02fcdd36bf0c05520cfd39fd4eff67">__attribute__</a> ((aligned(<span class="keyword">sizeof</span>(<a class="code" href="classTru64.html#a817c2170b3317523205584cf1cd10107">uid_t</a>))));
<a name="l01192"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#a5068f07738debbdedb161aafd0752760">01192</a>         <a class="code" href="classTru64.html#aeb8daab35a4eba2f7d0b542772a6e348">gid_t</a>   st_gid;
<a name="l01193"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#ab8c1915f4e395437ad86d435a5f5ba0b">01193</a>         <a class="code" href="classTru64.html#ab8119cec866c7d91d65cd650083c9a21">dev_t</a>   st_rdev;
<a name="l01194"></a>01194         <a class="code" href="classTru64.html#aa0f1f377d0b9da0bcd6c7c1a0a31d64f">off_t</a>   st_size <a class="code" href="init_8cc.html#aff02fcdd36bf0c05520cfd39fd4eff67">__attribute__</a> ((aligned(<span class="keyword">sizeof</span>(<a class="code" href="classTru64.html#aa0f1f377d0b9da0bcd6c7c1a0a31d64f">off_t</a>))));
<a name="l01195"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#a22d8d6c8159a2c9ddc52b21ec8f4188e">01195</a>         <a class="code" href="classTru64.html#a4f8b3c49e0c484ce3a27d12395e49cce">time_t</a>  st_atimeX;
<a name="l01196"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#a4506999a434d3d174d3cfa63ee4eab27">01196</a>         int32_t st_uatime;
<a name="l01197"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#a940171503aec7b844ce93d09e01caf30">01197</a>         <a class="code" href="classTru64.html#a4f8b3c49e0c484ce3a27d12395e49cce">time_t</a>  st_mtimeX;
<a name="l01198"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#acbca14fc0fbda77b4b4287b27ed4cf84">01198</a>         int32_t st_umtime;
<a name="l01199"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#ad42b8d48d82e9cf5e15fde7fab81cdfb">01199</a>         <a class="code" href="classTru64.html#a4f8b3c49e0c484ce3a27d12395e49cce">time_t</a>  st_ctimeX;
<a name="l01200"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#a67b82246aba9f3a1e98c8bcdb88dc7df">01200</a>         int32_t st_uctime;
<a name="l01201"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#a6eaed3cde57e64ddd97b4c5e72c03404">01201</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> st_blksize;
<a name="l01202"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#a2648723ce20c0dab023eca62f8ecf5ef">01202</a>         int32_t st_blocks;
<a name="l01203"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#a39d66af6f18bf0821eda87f1ebd14ad0">01203</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> st_flags;
<a name="l01204"></a><a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html#a01c77a0046338e7fb3c6c09d31ea8cd2">01204</a>         <a class="code" href="Type_8hh.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> st_gen;
<a name="l01205"></a>01205     };
<a name="l01206"></a>01206 
<a name="l01207"></a><a class="code" href="classTru64__PreF64.html#ac0aa3fe1aca35937e3e6ef845e7da70d">01207</a>     <span class="keyword">typedef</span> <a class="code" href="structTru64__PreF64_1_1pre__F64__stat.html" title="Old Tru64 v4.x stat struct.">pre_F64_stat</a> tgt_stat;
<a name="l01208"></a>01208 <span class="comment">/*</span>
<a name="l01209"></a>01209 <span class="comment">    static void copyOutStatBuf(SETranslatingPortProxy &amp;mem, Addr addr,</span>
<a name="l01210"></a>01210 <span class="comment">                               global_stat *host)</span>
<a name="l01211"></a>01211 <span class="comment">    {</span>
<a name="l01212"></a>01212 <span class="comment">        Tru64::copyOutStatBuf&lt;Tru64::pre_F64_stat&gt;(mem, addr, host);</span>
<a name="l01213"></a>01213 <span class="comment">    }*/</span>
<a name="l01214"></a>01214 
<a name="l01215"></a><a class="code" href="classTru64__PreF64.html#a2a6e66f4bf93b718047509ba8ed26a62">01215</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classTru64.html#a8f9217e8f6aa770e161dd88a624cde31" title="Helper function to convert a host statfs buffer to a target statfs buffer.">copyOutStatfsBuf</a>(<a class="code" href="classSETranslatingPortProxy.html">SETranslatingPortProxy</a> &amp;mem, <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="namespaceX86ISA.html#a79b5c08c190167d17c9b9b3fd40112f6">addr</a>,
<a name="l01216"></a>01216                                  <a class="code" href="kern_2tru64_2tru64_8hh.html#a1a8529336c3f2704cb49ee2cd97412a8">global_statfs</a> *host)
<a name="l01217"></a>01217     {
<a name="l01218"></a>01218         Tru64::copyOutStatfsBuf&lt;Tru64::pre_F64_statfs&gt;(mem, addr, host);
<a name="l01219"></a>01219     }
<a name="l01220"></a>01220 };
<a name="l01221"></a>01221 
<a name="l01222"></a>01222 <span class="preprocessor">#endif // __TRU64_HH__</span>
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"><address style="align: right;"><small>
Generated on Sun Apr 7 2013 18:15:58 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.7.1</small></address>

</body>
</html>
