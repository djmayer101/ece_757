<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gem5: cpu/thread_context.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>cpu/thread_context.cc File Reference</h1>  </div>
</div>
<div class="contents">
<code>#include &quot;<a class="el" href="base_2misc_8hh_source.html">base/misc.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="trace_8hh_source.html">base/trace.hh</a>&quot;</code><br/>
<code>#include &quot;config/the_isa.hh&quot;</code><br/>
<code>#include &quot;<a class="el" href="cpu_2base_8hh_source.html">cpu/base.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="quiesce__event_8hh_source.html">cpu/quiesce_event.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="thread__context_8hh_source.html">cpu/thread_context.hh</a>&quot;</code><br/>
<code>#include &quot;debug/Context.hh&quot;</code><br/>
<code>#include &quot;<a class="el" href="full__system_8hh_source.html">sim/full_system.hh</a>&quot;</code><br/>

<p><a href="thread__context_8cc_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__context_8cc.html#a40792bd7060f1fdd6c31469ce46d0a95">serialize</a> (<a class="el" href="classThreadContext.html">ThreadContext</a> &amp;tc, std::ostream &amp;os)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Thread context serialization helpers.  <a href="#a40792bd7060f1fdd6c31469ce46d0a95"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__context_8cc.html#aab2bbbf3710db70a2886ed6c49038af7">unserialize</a> (<a class="el" href="classThreadContext.html">ThreadContext</a> &amp;tc, <a class="el" href="classCheckpoint.html">Checkpoint</a> *cp, const std::string &amp;section)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__context_8cc.html#a7627814f4dfa033bb38db10402db619d">takeOverFrom</a> (<a class="el" href="classThreadContext.html">ThreadContext</a> &amp;ntc, <a class="el" href="classThreadContext.html">ThreadContext</a> &amp;otc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy state between thread contexts in preparation for CPU handover.  <a href="#a7627814f4dfa033bb38db10402db619d"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a40792bd7060f1fdd6c31469ce46d0a95"></a><!-- doxytag: member="thread_context.cc::serialize" ref="a40792bd7060f1fdd6c31469ce46d0a95" args="(ThreadContext &amp;tc, std::ostream &amp;os)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Thread context serialization helpers. </p>
<p>These helper functions provide a way to the data in a <a class="el" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a>. They are provided as separate helper function since implementing them as members of the <a class="el" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> interface would be confusing when the <a class="el" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a> is exported via a proxy. </p>

<p>Definition at line <a class="el" href="thread__context_8cc_source.html#l00098">98</a> of file <a class="el" href="thread__context_8cc_source.html">thread_context.cc</a>.</p>

<p>References <a class="el" href="serialize_8cc_source.html#l00191">arrayParamOut()</a>, <a class="el" href="arm_2miscregs_8hh_source.html#l00342">ArmISA::i</a>, <a class="el" href="alpha_2registers_8hh_source.html#l00094">AlphaISA::NumFloatRegs</a>, <a class="el" href="alpha_2registers_8hh_source.html#l00093">AlphaISA::NumIntRegs</a>, <a class="el" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">ThreadContext::pcState()</a>, <a class="el" href="classThreadContext.html#a6fd33830a6d746988def9deeb81bb8d2">ThreadContext::readFloatRegBitsFlat()</a>, <a class="el" href="classThreadContext.html#a7d6aa765fe56dc52aa786358d42782e9">ThreadContext::readIntRegFlat()</a>, and <a class="el" href="serialize_8hh_source.html#l00132">SERIALIZE_ARRAY</a>.</p>

<p>Referenced by <a class="el" href="arch_2arm_2types_8hh_source.html#l00206">ArmISA::EndBitUnion()</a>, and <a class="el" href="x86_2pagetable_8hh_source.html#l00074">X86ISA::EndBitUnion()</a>.</p>

</div>
</div>
<a class="anchor" id="a7627814f4dfa033bb38db10402db619d"></a><!-- doxytag: member="thread_context.cc::takeOverFrom" ref="a7627814f4dfa033bb38db10402db619d" args="(ThreadContext &amp;ntc, ThreadContext &amp;otc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void takeOverFrom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>new_tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>old_tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Copy state between thread contexts in preparation for CPU handover. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>This method modifies the old thread contexts as well as the new thread context. The old thread context will have its quiesce event descheduled if it is scheduled and its status set to halted.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>new_tc</em>&nbsp;</td><td>Destination <a class="el" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>old_tc</em>&nbsp;</td><td>Source <a class="el" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside of the CPU...">ThreadContext</a>. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="thread__context_8cc_source.html#l00144">144</a> of file <a class="el" href="thread__context_8cc_source.html">thread_context.cc</a>.</p>

<p>References <a class="el" href="classThreadContext.html#a516a77735ff104335e299bf628b87614">ThreadContext::contextId()</a>, <a class="el" href="classThreadContext.html#aaa0ead9942a9494268bd1794ac62b089">ThreadContext::copyArchRegs()</a>, <a class="el" href="root_8cc_source.html#l00165">FullSystem</a>, <a class="el" href="classThreadContext.html#add24ea69a3c1a7862d25bec95f9bdc95">ThreadContext::getCpuPtr()</a>, <a class="el" href="classThreadContext.html#a578034e4f174170011007e9908ca666d">ThreadContext::getProcessPtr()</a>, <a class="el" href="classThreadContext.html#a35cd235abfbb3c62c8077b558d9cb02b">ThreadContext::getQuiesceEvent()</a>, <a class="el" href="classThreadContext.html#a119dd28f703f77bafb74788f8110300c">ThreadContext::getSystemPtr()</a>, <a class="el" href="thread__context_8hh_source.html#l00115">ThreadContext::Halted</a>, <a class="el" href="classThreadContext.html#aaa16774f1fbbb0201ee0c8ea27c139d5">ThreadContext::setContextId()</a>, <a class="el" href="classThreadContext.html#a8219da21012da41fb8e3a6b4d746d55b">ThreadContext::setStatus()</a>, <a class="el" href="classThreadContext.html#af39690a57e5702f0f1cf6fc7f83a2087">ThreadContext::setThreadId()</a>, <a class="el" href="classThreadContext.html#a7d99d72e903622b08fbf253c6e58b1ec">ThreadContext::status()</a>, and <a class="el" href="classThreadContext.html#a8e594e2269df0830027d05db0d322c6d">ThreadContext::threadId()</a>.</p>

</div>
</div>
<a class="anchor" id="aab2bbbf3710db70a2886ed6c49038af7"></a><!-- doxytag: member="thread_context.cc::unserialize" ref="aab2bbbf3710db70a2886ed6c49038af7" args="(ThreadContext &amp;tc, Checkpoint *cp, const std::string &amp;section)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classThreadContext.html">ThreadContext</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCheckpoint.html">Checkpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>section</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="thread__context_8cc_source.html#l00120">120</a> of file <a class="el" href="thread__context_8cc_source.html">thread_context.cc</a>.</p>

<p>References <a class="el" href="serialize_8cc_source.html#l00262">arrayParamIn()</a>, <a class="el" href="arm_2miscregs_8hh_source.html#l00342">ArmISA::i</a>, <a class="el" href="alpha_2registers_8hh_source.html#l00094">AlphaISA::NumFloatRegs</a>, <a class="el" href="alpha_2registers_8hh_source.html#l00093">AlphaISA::NumIntRegs</a>, <a class="el" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">ThreadContext::pcState()</a>, <a class="el" href="classThreadContext.html#afc53d9f0a0edc8a855148cfb396b0aac">ThreadContext::setFloatRegBitsFlat()</a>, <a class="el" href="classThreadContext.html#a1948450d40f3a1d50fd71880cb0a86f9">ThreadContext::setIntRegFlat()</a>, and <a class="el" href="serialize_8hh_source.html#l00135">UNSERIALIZE_ARRAY</a>.</p>

<p>Referenced by <a class="el" href="arch_2arm_2types_8hh_source.html#l00206">ArmISA::EndBitUnion()</a>, and <a class="el" href="x86_2pagetable_8hh_source.html#l00074">X86ISA::EndBitUnion()</a>.</p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"><address style="align: right;"><small>
Generated on Sun Apr 7 2013 18:17:01 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.7.1</small></address>

</body>
</html>
